{
  "version": 3,
  "sources": ["../../src/shared/storage.ts", "../../src/shared/backlogConfig.ts", "../../src/background/backlogClient.ts", "../../src/background/serviceWorker.ts"],
  "sourcesContent": ["type StorageArea = chrome.storage.LocalStorageArea;\n\nconst storage: StorageArea = chrome.storage.local;\n\nexport function storageGet<T>(keys: string[]): Promise<Record<string, T>> {\n  return new Promise((resolve, reject) => {\n    storage.get(keys, (items) => {\n      const error = chrome.runtime.lastError;\n      if (error) {\n        reject(error);\n      } else {\n        resolve(items as Record<string, T>);\n      }\n    });\n  });\n}\n\nexport function storageSet(items: Record<string, unknown>): Promise<void> {\n  return new Promise((resolve, reject) => {\n    storage.set(items, () => {\n      const error = chrome.runtime.lastError;\n      if (error) {\n        reject(error);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\nexport function storageRemove(keys: string[]): Promise<void> {\n  return new Promise((resolve, reject) => {\n    storage.remove(keys, () => {\n      const error = chrome.runtime.lastError;\n      if (error) {\n        reject(error);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n", "import { storageGet, storageSet, storageRemove } from \"./storage\";\n\nexport interface BacklogAuthConfig {\n  spaceDomain: string;\n  apiKey: string;\n  host: \"backlog.com\" | \"backlog.jp\";\n  showNoDueSection?: boolean;\n  showTomorrowSection?: boolean;\n}\n\nexport const BACKLOG_AUTH_KEY = \"backlogAuth\";\nexport const BACKLOG_ISSUES_REVISION_KEY = \"backlogManagerIssuesRevision\";\n\nexport async function getBacklogAuthConfig(): Promise<BacklogAuthConfig | null> {\n  const result = await storageGet<BacklogAuthConfig | null>([BACKLOG_AUTH_KEY]);\n  const config = result[BACKLOG_AUTH_KEY];\n  if (!config) {\n    return null;\n  }\n  if (config.showNoDueSection === undefined) {\n    config.showNoDueSection = true;\n  }\n  if (config.showTomorrowSection === undefined) {\n    config.showTomorrowSection = true;\n  }\n  return config;\n}\n\nexport async function saveBacklogAuthConfig(config: BacklogAuthConfig): Promise<void> {\n  await storageSet({ [BACKLOG_AUTH_KEY]: config });\n}\n\nexport async function clearBacklogAuthConfig(): Promise<void> {\n  await storageRemove([BACKLOG_AUTH_KEY]);\n}\n\nexport function backlogBaseUrl(config: BacklogAuthConfig): string {\n  return `https://${config.spaceDomain}.${config.host}`;\n}\n\nexport function backlogApiOrigin(config: BacklogAuthConfig): string {\n  return `${backlogBaseUrl(config)}/`;\n}\n", "import { backlogBaseUrl, getBacklogAuthConfig, BacklogAuthConfig, BACKLOG_ISSUES_REVISION_KEY } from \"@shared/backlogConfig\";\nimport type {\n  BacklogIssueBuckets,\n  BacklogIssueLite,\n  BacklogProjectStatuses,\n  BacklogStatusLite,\n  BacklogCategoryLite,\n  BacklogIssueTypeLite,\n  BacklogUserLite\n} from \"@shared/backlogTypes\";\n\ntype BacklogIssueResponse = {\n  id: number;\n  projectId: number;\n  issueKey: string;\n  summary: string;\n  description: string;\n  dueDate: string | null;\n  created: string;\n  status: {\n    id: number;\n    name: string;\n  } | null;\n  project: {\n    projectKey: string;\n    name: string;\n  };\n  category: Array<{\n    id: number;\n    name: string;\n  }>;\n  assignee: {\n    id: number;\n    name: string;\n  } | null;\n};\n\ntype BacklogUserResponse = {\n  id: number;\n  name: string;\n};\n\nconst CACHE_TTL_MS = 10 * 60 * 1000;\nconst MAX_FETCH_COUNT = 100;\n\nlet cachedBuckets: { data: BacklogIssueBuckets; fetchedAt: number } | null = null;\nconst projectStatusCache = new Map<number, { data: BacklogStatusLite[]; fetchedAt: number }>();\nconst projectInfoCache = new Map<number, { data: { name: string; projectKey: string }; fetchedAt: number }>();\nconst projectCategoryCache = new Map<number, { data: BacklogCategoryLite[]; fetchedAt: number }>();\nconst projectIssueTypeCache = new Map<number, { data: BacklogIssueTypeLite[]; fetchedAt: number }>();\nconst projectUserCache = new Map<number, { data: BacklogUserLite[]; fetchedAt: number }>();\nlet currentUser: BacklogUserResponse | null = null;\nlet cachedActiveStatusIds: { ids: number[]; fetchedAt: number } | null = null;\n\nexport function clearBacklogIssueCache(): void {\n  cachedBuckets = null;\n  projectStatusCache.clear();\n  projectInfoCache.clear();\n  projectCategoryCache.clear();\n  projectIssueTypeCache.clear();\n  projectUserCache.clear();\n  currentUser = null;\n  cachedActiveStatusIds = null;\n}\n\nexport async function updateIssueStatusById(issueId: number, statusId: number): Promise<void> {\n  if (!Number.isFinite(issueId) || issueId <= 0) {\n    throw new Error(\"Invalid issue id\");\n  }\n  if (!Number.isFinite(statusId) || statusId <= 0) {\n    throw new Error(\"Invalid status id\");\n  }\n\n  const config = await ensureAuthConfig();\n  await ensureHostPermission(config);\n  await updateIssueStatus(config, issueId, statusId);\n  cachedBuckets = null;\n  void chrome.storage.local.set({ [BACKLOG_ISSUES_REVISION_KEY]: Date.now() });\n}\n\nexport async function getProjectStatusesById(projectId: number): Promise<BacklogProjectStatuses> {\n  if (!Number.isFinite(projectId) || projectId <= 0) {\n    throw new Error(\"Invalid project id\");\n  }\n  const config = await ensureAuthConfig();\n  await ensureHostPermission(config);\n  const statuses = await ensureProjectStatuses(config, projectId);\n  return { projectId, statuses };\n}\n\ntype ProjectListResponse = Array<{\n  id: number;\n  name: string;\n  projectKey: string;\n}>;\n\nexport type ProjectDetails = {\n  projectId: number;\n  name: string;\n  projectKey: string;\n  statuses: BacklogStatusLite[];\n  categories: BacklogCategoryLite[];\n  issueTypes: BacklogIssueTypeLite[];\n  users: BacklogUserLite[];\n  currentUserId: number | null;\n};\n\nexport type CreateIssueParams = {\n  projectId: number;\n  issueTypeId: number;\n  summary: string;\n  description?: string;\n  startDate?: string;\n  dueDate?: string;\n  categoryId?: number;\n  assigneeId?: number;\n  priorityId?: number;\n};\n\ntype CreatedIssueResponse = {\n  id: number;\n  issueKey: string;\n  summary: string;\n};\n\nexport async function getAllProjectDetails(): Promise<ProjectDetails[]> {\n  const config = await ensureAuthConfig();\n  await ensureHostPermission(config);\n\n  const current = await ensureCurrentUser(config).catch(() => null);\n  const currentUserId = current?.id ?? null;\n\n  const projects = await backlogFetch<ProjectListResponse>(config, \"/api/v2/projects\");\n  const details: ProjectDetails[] = [];\n\n  for (const project of projects) {\n    const [statuses, categories, issueTypes, users] = await Promise.all([\n      ensureProjectStatuses(config, project.id),\n      ensureProjectCategories(config, project.id),\n      ensureProjectIssueTypes(config, project.id),\n      ensureProjectUsers(config, project.id)\n    ]);\n\n    details.push({\n      projectId: project.id,\n      name: project.name,\n      projectKey: project.projectKey,\n      statuses,\n      categories,\n      issueTypes,\n      users,\n      currentUserId\n    });\n  }\n\n  return details;\n}\n\nexport async function createIssue(params: CreateIssueParams): Promise<CreatedIssueResponse> {\n  if (!Number.isFinite(params.projectId) || params.projectId <= 0) {\n    throw new Error(\"Invalid project id\");\n  }\n  if (!Number.isFinite(params.issueTypeId) || params.issueTypeId <= 0) {\n    throw new Error(\"Invalid issue type id\");\n  }\n  if (!params.summary || !params.summary.trim()) {\n    throw new Error(\"Summary is required\");\n  }\n\n  const config = await ensureAuthConfig();\n  await ensureHostPermission(config);\n\n  const base = backlogBaseUrl(config);\n  const url = new URL(\"/api/v2/issues\", `${base}/`);\n  url.searchParams.set(\"apiKey\", config.apiKey);\n\n  const body = new URLSearchParams();\n  body.set(\"projectId\", String(params.projectId));\n  body.set(\"issueTypeId\", String(params.issueTypeId));\n  body.set(\"summary\", params.summary.trim());\n  if (params.description) {\n    body.set(\"description\", params.description);\n  }\n  if (params.startDate) {\n    body.set(\"startDate\", params.startDate);\n  }\n  if (params.dueDate) {\n    body.set(\"dueDate\", params.dueDate);\n  }\n  const priorityId = Number.isFinite(params.priorityId) && params.priorityId ? Number(params.priorityId) : 3;\n  body.set(\"priorityId\", String(priorityId));\n  if (params.categoryId) {\n    body.append(\"categoryId[]\", String(params.categoryId));\n  }\n  if (Number.isFinite(params.assigneeId) && params.assigneeId) {\n    body.set(\"assigneeId\", String(params.assigneeId));\n  }\n\n  const response = await fetch(url.toString(), {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    },\n    body: body.toString()\n  });\n\n  if (!response.ok) {\n    const text = await response.text().catch(() => \"\");\n    const error = new Error(`Backlog API error ${response.status}${text ? `: ${text}` : \"\"}`);\n    (error as Error & { code?: string }).code = response.status === 401 ? \"REQUEST_DENIED\" : \"NETWORK_ERROR\";\n    throw error;\n  }\n\n  const created = (await response.json()) as CreatedIssueResponse;\n\n  cachedBuckets = null;\n  void chrome.storage.local.set({ [BACKLOG_ISSUES_REVISION_KEY]: Date.now() });\n  return created;\n}\n\nexport async function updateIssueDueDate(issueId: number, dueDate: string): Promise<void> {\n  if (!Number.isFinite(issueId) || issueId <= 0) {\n    throw new Error(\"Invalid issue id\");\n  }\n  if (!dueDate) {\n    throw new Error(\"Invalid due date\");\n  }\n  const config = await ensureAuthConfig();\n  await ensureHostPermission(config);\n  try {\n    await updateIssueDueDateInternal(config, issueId, dueDate);\n  } catch (error) {\n    const message = error instanceof Error ? error.message : String(error);\n    const needsStartDateUpdate =\n      message.includes(\"\u958B\u59CB\u65E5\") ||\n      message.includes(\"code\\\":7\") ||\n      message.includes(\"start date\") ||\n      message.includes(\"StartDate\");\n    if (!needsStartDateUpdate) {\n      throw error;\n    }\n    await updateIssueDueDateInternal(config, issueId, dueDate, dueDate);\n  }\n  cachedBuckets = null;\n  void chrome.storage.local.set({ [BACKLOG_ISSUES_REVISION_KEY]: Date.now() });\n}\n\nexport async function getTodayTomorrowIssues(force = false): Promise<BacklogIssueBuckets> {\n  if (!force && cachedBuckets && Date.now() - cachedBuckets.fetchedAt < CACHE_TTL_MS) {\n    return cachedBuckets.data;\n  }\n\n  let projectIds: number[] = [];\n  try {\n    const config = await ensureAuthConfig();\n    await ensureHostPermission(config);\n    const user = await ensureCurrentUser(config);\n    const activeStatusIds = await ensureActiveStatusIds(config);\n    const issues = await fetchAssignedIssues(config, user.id, activeStatusIds);\n    projectIds = Array.from(\n      new Set(issues.map((issue) => issue.projectId).filter((id): id is number => typeof id === \"number\" && id > 0))\n    );\n    console.debug(\"Resolved project IDs from issues\", projectIds);\n    const statusBundles: BacklogProjectStatuses[] = [];\n    const projectInfoPairs: Array<[number, { name: string; projectKey: string }]> = [];\n    for (const projectId of projectIds) {\n      const [statuses, projectInfo] = await Promise.all([\n        ensureProjectStatuses(config, projectId),\n        ensureProjectInfo(config, projectId)\n      ]);\n      statusBundles.push({ projectId, statuses });\n      projectInfoPairs.push([projectId, projectInfo]);\n    }\n    const projectInfoMap = new Map(projectInfoPairs);\n    const buckets = bucketIssues(issues, config, projectInfoMap);\n    const result: BacklogIssueBuckets = {\n      ...buckets,\n      statuses: statusBundles\n    };\n    cachedBuckets = { data: result, fetchedAt: Date.now() };\n    return result;\n  } catch (error) {\n    const message = error instanceof Error ? error.message : String(error);\n    const fallback = cachedBuckets?.data;\n\n    if (isMissingConfigError(error)) {\n      return createEmptyBuckets(\"missing-config\", message, projectIds);\n    }\n\n    if (isPermissionError(error)) {\n      return fallback\n        ? { ...fallback, stale: true, errorCode: \"permission-denied\", errorMessage: message }\n        : createEmptyBuckets(\"permission-denied\", message, projectIds);\n    }\n\n    if (isRequestDeniedError(error)) {\n      return fallback\n        ? { ...fallback, stale: true, errorCode: \"request-denied\", errorMessage: message }\n        : createEmptyBuckets(\"request-denied\", message, projectIds);\n    }\n\n    if (fallback) {\n      return { ...fallback, stale: true, errorCode: \"network-error\", errorMessage: message };\n    }\n\n    return createEmptyBuckets(\"network-error\", message, projectIds);\n  }\n}\n\nasync function ensureAuthConfig(): Promise<BacklogAuthConfig> {\n  const config = await getBacklogAuthConfig();\n  if (!config) {\n    const error = new Error(\"Backlog API \u30AD\u30FC\u304C\u672A\u8A2D\u5B9A\u3067\u3059\u3002\u30AA\u30D7\u30B7\u30E7\u30F3\u30DA\u30FC\u30B8\u304B\u3089\u767B\u9332\u3057\u3066\u304F\u3060\u3055\u3044\u3002\");\n    (error as Error & { code?: string }).code = \"MISSING_CONFIG\";\n    throw error;\n  }\n  return config;\n}\n\nasync function ensureHostPermission(config: BacklogAuthConfig): Promise<void> {\n  const origin = `${backlogBaseUrl(config)}/`;\n  const permission = { origins: [`${origin}*`] };\n  const hasPermission = await chrome.permissions.contains(permission);\n  if (hasPermission) {\n    return;\n  }\n  const error = new Error(`${origin} \u3078\u306E\u30A2\u30AF\u30BB\u30B9\u8A31\u53EF\u304C\u5FC5\u8981\u3067\u3059\u3002\u30AA\u30D7\u30B7\u30E7\u30F3\u30DA\u30FC\u30B8\u3067\u8A31\u53EF\u3057\u3066\u304F\u3060\u3055\u3044\u3002`);\n  (error as Error & { code?: string }).code = \"PERMISSION_DENIED\";\n  throw error;\n}\n\nasync function ensureCurrentUser(config?: BacklogAuthConfig): Promise<BacklogUserResponse> {\n  if (currentUser) {\n    return currentUser;\n  }\n  const resolvedConfig = config ?? (await ensureAuthConfig());\n  const response = await backlogFetch<BacklogUserResponse>(resolvedConfig, \"/api/v2/users/myself\");\n  currentUser = response;\n  return response;\n}\n\nasync function fetchAssignedIssues(\n  config: BacklogAuthConfig,\n  assigneeId: number,\n  activeStatusIds: number[]\n): Promise<BacklogIssueResponse[]> {\n  const params: Record<string, string | number | Array<string | number>> = {\n    \"assigneeId[]\": [assigneeId],\n    sort: \"dueDate\",\n    order: \"desc\",\n    count: MAX_FETCH_COUNT\n  };\n  if (Array.isArray(activeStatusIds) && activeStatusIds.length > 0) {\n    params[\"statusId[]\"] = activeStatusIds;\n  }\n\n  const response = await backlogFetch<BacklogIssueResponse[]>(config, \"/api/v2/issues\", params);\n  console.debug(\"Fetched issues\", { count: response.length, projectIds: Array.from(new Set(response.map((issue) => issue.projectId))) });\n  return response;\n}\n\nasync function ensureActiveStatusIds(config: BacklogAuthConfig): Promise<number[]> {\n  const now = Date.now();\n  if (cachedActiveStatusIds && now - cachedActiveStatusIds.fetchedAt < CACHE_TTL_MS) {\n    return cachedActiveStatusIds.ids;\n  }\n\n  let projects: ProjectListResponse = [];\n  try {\n    projects = await backlogFetch<ProjectListResponse>(config, \"/api/v2/projects\");\n  } catch (error) {\n    console.warn(\"Failed to load project list when resolving active statuses\", error);\n    if (cachedActiveStatusIds) {\n      return cachedActiveStatusIds.ids;\n    }\n    return [];\n  }\n\n  const statusIdSet = new Set<number>();\n  await Promise.all(\n    projects.map(async (project) => {\n      try {\n        const statuses = await ensureProjectStatuses(config, project.id);\n        statuses\n          .filter((status) => !isCompletedStatus(status.name))\n          .forEach((status) => {\n            if (Number.isFinite(status.id)) {\n              statusIdSet.add(status.id);\n            }\n          });\n      } catch (error) {\n        console.warn(`Failed to resolve statuses for project ${project.id}`, error);\n      }\n    })\n  );\n\n  const ids = Array.from(statusIdSet);\n  cachedActiveStatusIds = { ids, fetchedAt: now };\n  return ids;\n}\n\nasync function ensureProjectStatuses(config: BacklogAuthConfig, projectId: number): Promise<BacklogStatusLite[]> {\n  const cached = projectStatusCache.get(projectId);\n  const now = Date.now();\n  if (cached && now - cached.fetchedAt < CACHE_TTL_MS) {\n    return cached.data;\n  }\n\n  type StatusResponse = {\n    id: number;\n    name: string;\n    displayOrder: number;\n  };\n\n  try {\n  const response = await backlogFetch<StatusResponse[]>(config, `/api/v2/projects/${projectId}/statuses`);\n  console.debug(\"Fetched project statuses\", { projectId, count: response.length });\n    const normalized = response\n      .map((status) => ({ id: status.id, name: status.name, displayOrder: status.displayOrder ?? 0 }))\n      .sort((a, b) => a.displayOrder - b.displayOrder);\n    projectStatusCache.set(projectId, { data: normalized, fetchedAt: now });\n    return normalized;\n  } catch (error) {\n    console.warn(`Failed to fetch statuses for project ${projectId}`, error);\n    const fallback = projectStatusCache.get(projectId);\n    return fallback ? fallback.data : [];\n  }\n}\n\nasync function ensureProjectCategories(config: BacklogAuthConfig, projectId: number): Promise<BacklogCategoryLite[]> {\n  const cached = projectCategoryCache.get(projectId);\n  const now = Date.now();\n  if (cached && now - cached.fetchedAt < CACHE_TTL_MS) {\n    return cached.data;\n  }\n\n  type CategoryResponse = {\n    id: number;\n    name: string;\n  };\n\n  try {\n    const response = await backlogFetch<CategoryResponse[]>(config, `/api/v2/projects/${projectId}/categories`);\n    const normalized = response.map((category) => ({ id: category.id, name: category.name }));\n    projectCategoryCache.set(projectId, { data: normalized, fetchedAt: now });\n    return normalized;\n  } catch (error) {\n    console.warn(`Failed to fetch categories for project ${projectId}`, error);\n    const fallback = projectCategoryCache.get(projectId);\n    return fallback ? fallback.data : [];\n  }\n}\n\nasync function ensureProjectIssueTypes(config: BacklogAuthConfig, projectId: number): Promise<BacklogIssueTypeLite[]> {\n  const cached = projectIssueTypeCache.get(projectId);\n  const now = Date.now();\n  if (cached && now - cached.fetchedAt < CACHE_TTL_MS) {\n    return cached.data;\n  }\n\n  type IssueTypeResponse = {\n    id: number;\n    name: string;\n    color?: string;\n    displayOrder?: number;\n  };\n\n  try {\n    const response = await backlogFetch<IssueTypeResponse[]>(config, `/api/v2/projects/${projectId}/issueTypes`);\n    const normalized = response\n      .map((issueType) => ({\n        id: issueType.id,\n        name: issueType.name,\n        color: issueType.color,\n        displayOrder: issueType.displayOrder ?? 0\n      }))\n      .sort((a, b) => {\n        const orderDelta = (a.displayOrder ?? 0) - (b.displayOrder ?? 0);\n        return orderDelta !== 0 ? orderDelta : a.name.localeCompare(b.name, \"ja\");\n      })\n      .map(({ displayOrder: _discard, ...rest }) => rest);\n    projectIssueTypeCache.set(projectId, { data: normalized, fetchedAt: now });\n    return normalized;\n  } catch (error) {\n    console.warn(`Failed to fetch issue types for project ${projectId}`, error);\n    const fallback = projectIssueTypeCache.get(projectId);\n    return fallback ? fallback.data : [];\n  }\n}\n\nasync function ensureProjectUsers(config: BacklogAuthConfig, projectId: number): Promise<BacklogUserLite[]> {\n  const cached = projectUserCache.get(projectId);\n  const now = Date.now();\n  if (cached && now - cached.fetchedAt < CACHE_TTL_MS) {\n    return cached.data;\n  }\n\n  type ProjectUserResponse = {\n    id: number;\n    name: string;\n  };\n\n  try {\n    const response = await backlogFetch<ProjectUserResponse[]>(config, `/api/v2/projects/${projectId}/users`);\n    const normalized = response\n      .map((user) => ({ id: user.id, name: user.name }))\n      .sort((a, b) => a.id - b.id);\n    projectUserCache.set(projectId, { data: normalized, fetchedAt: now });\n    return normalized;\n  } catch (error) {\n    console.warn(`Failed to fetch users for project ${projectId}`, error);\n    const fallback = projectUserCache.get(projectId);\n    return fallback ? fallback.data : [];\n  }\n}\n\nasync function ensureProjectInfo(\n  config: BacklogAuthConfig,\n  projectId: number\n): Promise<{ name: string; projectKey: string }> {\n  const cached = projectInfoCache.get(projectId);\n  const now = Date.now();\n  if (cached && now - cached.fetchedAt < CACHE_TTL_MS) {\n    return cached.data;\n  }\n\n  type ProjectResponse = {\n    id: number;\n    name: string;\n    projectKey: string;\n  };\n\n  try {\n    const response = await backlogFetch<ProjectResponse>(config, `/api/v2/projects/${projectId}`);\n    const info = { name: response.name, projectKey: response.projectKey };\n    projectInfoCache.set(projectId, { data: info, fetchedAt: now });\n    return info;\n  } catch (error) {\n    console.warn(`Failed to fetch project info for project ${projectId}`, error);\n    const fallback = projectInfoCache.get(projectId);\n    if (fallback) {\n      return fallback.data;\n    }\n    return { name: `Project ${projectId}`, projectKey: `${projectId}` };\n  }\n}\n\nfunction collectCachedProjectStatuses(projectIds: number[] = []): BacklogProjectStatuses[] {\n  const ids = projectIds.length ? projectIds : Array.from(projectStatusCache.keys());\n  return ids\n    .map((projectId) => {\n      const entry = projectStatusCache.get(projectId);\n      if (!entry) {\n        return null;\n      }\n      return { projectId, statuses: entry.data } as BacklogProjectStatuses;\n    })\n    .filter((bundle): bundle is BacklogProjectStatuses => bundle !== null);\n}\n\nasync function backlogFetch<T>(\n  config: BacklogAuthConfig,\n  path: string,\n  params: Record<string, string | number | Array<string | number>> = {}\n): Promise<T> {\n  const base = backlogBaseUrl(config);\n  const url = new URL(path, `${base}/`);\n  url.searchParams.set(\"apiKey\", config.apiKey);\n\n  for (const [key, value] of Object.entries(params)) {\n    if (Array.isArray(value)) {\n      value.forEach((entry) => url.searchParams.append(key, String(entry)));\n    } else if (value !== undefined && value !== null) {\n      url.searchParams.set(key, String(value));\n    }\n  }\n\n  const response = await fetch(url.toString(), {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n\n  if (!response.ok) {\n    const error = new Error(`Backlog API error ${response.status}`);\n    (error as Error & { code?: string }).code = response.status === 401 ? \"REQUEST_DENIED\" : \"NETWORK_ERROR\";\n    throw error;\n  }\n\n  return (await response.json()) as T;\n}\n\nasync function updateIssueStatus(config: BacklogAuthConfig, issueId: number, statusId: number): Promise<void> {\n  const base = backlogBaseUrl(config);\n  const url = new URL(`/api/v2/issues/${issueId}`, `${base}/`);\n  url.searchParams.set(\"apiKey\", config.apiKey);\n\n  const body = new URLSearchParams();\n  body.set(\"statusId\", String(statusId));\n\n  console.debug(\"Updating issue status\", { issueId, statusId, url: url.toString() });\n\n  const response = await fetch(url.toString(), {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    },\n    body: body.toString()\n  });\n\n  if (!response.ok) {\n    const message = await response.text().catch(() => \"\");\n    const error = new Error(message || `Backlog API error ${response.status}`);\n    console.warn(\"Issue status update failed\", { issueId, statusId, status: response.status, message });\n    throw error;\n  }\n\n  console.debug(\"Updated issue status\", { issueId, statusId });\n}\n\nasync function updateIssueDueDateInternal(\n  config: BacklogAuthConfig,\n  issueId: number,\n  dueDate: string,\n  startDate?: string\n): Promise<void> {\n  const base = backlogBaseUrl(config);\n  const url = new URL(`/api/v2/issues/${issueId}`, `${base}/`);\n  url.searchParams.set(\"apiKey\", config.apiKey);\n\n  const body = new URLSearchParams();\n  body.set(\"dueDate\", dueDate);\n  if (startDate) {\n    body.set(\"startDate\", startDate);\n  }\n  body.set(\"comment\", \"\u671F\u9650\u65E5\u3092\u66F4\u65B0\u3057\u307E\u3057\u305F\");\n\n  console.debug(\"Updating issue due date\", { issueId, dueDate, startDate, url: url.toString() });\n\n  const response = await fetch(url.toString(), {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    },\n    body: body.toString()\n  });\n\n  if (!response.ok) {\n    const message = await response.text().catch(() => \"\");\n    const error = new Error(message || `Backlog API error ${response.status}`);\n    console.warn(\"Issue due date update failed\", { issueId, dueDate, status: response.status, message });\n    throw error;\n  }\n\n  console.debug(\"Updated issue due date\", { issueId, dueDate });\n}\n\nfunction bucketIssues(\n  issues: BacklogIssueResponse[],\n  config: BacklogAuthConfig,\n  projectInfoMap: Map<number, { name: string; projectKey: string }>\n): Omit<BacklogIssueBuckets, \"statuses\"> {\n  const baseUrl = backlogBaseUrl(config);\n  const today = truncateDate(new Date());\n  const todayKey = formatDateKey(today);\n  const dayOfWeek = today.getDay();\n  const daysUntilSunday = (7 - dayOfWeek) % 7;\n  const weekEnd = truncateDate(addDays(today, daysUntilSunday));\n  const weekEndKey = formatDateKey(weekEnd);\n\n  const normalized: BacklogIssueLite[] = issues\n    .filter((issue) => issue.assignee) // only assigned\n    .filter((issue) => !isCompletedStatus(issue.status?.name ?? \"\"))\n    .map((issue) => {\n      const projectIdRaw =\n        typeof issue.projectId === \"number\" && Number.isFinite(issue.projectId)\n          ? issue.projectId\n          : (issue.project as { id?: number } | undefined)?.id ?? 0;\n      if (!projectIdRaw) {\n        console.warn(\"Issue missing projectId\", {\n          issueKey: issue.issueKey,\n          projectId: issue.projectId,\n          project: issue.project\n        });\n      }\n      const categoryName = issue.category?.map((item) => item.name).join(\", \") || null;\n      const projectInfo = projectInfoMap.get(projectIdRaw);\n      const projectName =\n        projectInfo?.name ||\n        issue.project?.name ||\n        projectInfo?.projectKey ||\n        (issue.project as { projectKey?: string } | undefined)?.projectKey ||\n        projectIdRaw.toString();\n      const url = `${baseUrl}/view/${issue.issueKey}`;\n      return {\n        id: issue.id,\n        issueKey: issue.issueKey,\n        summary: issue.summary,\n        description: issue.description ?? \"\",\n        status: issue.status?.name ?? \"\u672A\u8A2D\u5B9A\",\n        statusId: issue.status?.id ?? null,\n        projectId: projectIdRaw,\n        projectName: projectName ?? `Project ${projectIdRaw}`,\n        categoryName,\n        dueDate: normalizeDueDate(issue.dueDate),\n        created: issue.created,\n        url\n      };\n    });\n\n  const past: BacklogIssueLite[] = [];\n  const todayList: BacklogIssueLite[] = [];\n  const thisWeekList: BacklogIssueLite[] = [];\n  const noDueList: BacklogIssueLite[] = [];\n\n  normalized.forEach((issue) => {\n    const due = issue.dueDate;\n    if (!due) {\n      noDueList.push(issue);\n      return;\n    }\n    if (due < todayKey) {\n      past.push(issue);\n    } else if (due === todayKey) {\n      todayList.push(issue);\n    } else if (due <= weekEndKey) {\n      thisWeekList.push(issue);\n    }\n  });\n\n  const sortByProjectThenCreated = (a: BacklogIssueLite, b: BacklogIssueLite) => {\n    if (a.projectId !== b.projectId) {\n      return a.projectId - b.projectId;\n    }\n    const aCreated = new Date(a.created).getTime();\n    const bCreated = new Date(b.created).getTime();\n    return aCreated - bCreated;\n  };\n\n  past.sort(sortByProjectThenCreated);\n  todayList.sort(sortByProjectThenCreated);\n  thisWeekList.sort(sortByProjectThenCreated);\n  noDueList.sort(sortByProjectThenCreated);\n\n  return {\n    past,\n    today: todayList,\n    thisWeek: thisWeekList,\n    noDue: noDueList,\n    fetchedAt: new Date().toISOString()\n  };\n}\n\nfunction createEmptyBuckets(\n  errorCode: BacklogIssueBuckets[\"errorCode\"],\n  errorMessage: string,\n  projectIds: number[] = []\n): BacklogIssueBuckets {\n  return {\n    past: [],\n    today: [],\n    thisWeek: [],\n    noDue: [],\n    statuses: collectCachedProjectStatuses(projectIds),\n    fetchedAt: new Date().toISOString(),\n    errorCode,\n    errorMessage\n  };\n}\n\nfunction isCompletedStatus(statusName: string): boolean {\n  if (!statusName) {\n    return false;\n  }\n  const normalized = statusName.trim();\n  return [\"\u5B8C\u4E86\", \"\u30AF\u30ED\u30FC\u30BA\", \"\u5374\u4E0B\", \"\u7D42\u4E86\"].some((keyword) => normalized.includes(keyword));\n}\n\nfunction formatDateKey(date: Date): string {\n  const year = date.getFullYear();\n  const month = `${date.getMonth() + 1}`.padStart(2, \"0\");\n  const day = `${date.getDate()}`.padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n}\n\nfunction addDays(date: Date, amount: number): Date {\n  const result = new Date(date);\n  result.setDate(result.getDate() + amount);\n  return result;\n}\n\nfunction truncateDate(date: Date): Date {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\n\nfunction normalizeDueDate(input: string | null): string | null {\n  if (!input) {\n    return null;\n  }\n  const date = new Date(input);\n  if (Number.isNaN(date.getTime())) {\n    return null;\n  }\n  const truncated = truncateDate(date);\n  return formatDateKey(truncated);\n}\n\nfunction isMissingConfigError(error: unknown): boolean {\n  return Boolean(error && typeof error === \"object\" && (error as { code?: string }).code === \"MISSING_CONFIG\");\n}\n\nfunction isPermissionError(error: unknown): boolean {\n  return Boolean(error && typeof error === \"object\" && (error as { code?: string }).code === \"PERMISSION_DENIED\");\n}\n\nfunction isRequestDeniedError(error: unknown): boolean {\n  return Boolean(error && typeof error === \"object\" && (error as { code?: string }).code === \"REQUEST_DENIED\");\n}\n", "import { getBacklogAuthConfig, BACKLOG_AUTH_KEY } from \"@shared/backlogConfig\";\nimport {\n  getTodayTomorrowIssues,\n  clearBacklogIssueCache,\n  updateIssueStatusById,\n  getProjectStatusesById,\n  updateIssueDueDate,\n  getAllProjectDetails,\n  createIssue,\n  CreateIssueParams\n} from \"./backlogClient\";\n\nconst SIDE_PANEL_PATH = \"sidepanel/index.html\";\nconst CHATGPT_URL_PATTERNS = [\"https://chatgpt.com/*\", \"https://chat.openai.com/*\"];\n\nchrome.runtime.onInstalled.addListener(() => {\n  chrome.contextMenus.create({\n    id: \"backlog-quick-capture\",\n    title: \"Backlog \u306B\u9001\u308B\",\n    contexts: [\"selection\"]\n  });\n\n  chrome.sidePanel.setOptions({\n    enabled: true,\n    path: SIDE_PANEL_PATH\n  }).catch((error) => console.warn(\"Failed to preset side panel options:\", error));\n});\n\nchrome.action.onClicked.addListener(async (tab) => {\n  await openSidePanel(tab.windowId ?? undefined);\n});\n\nchrome.commands.onCommand.addListener(async (command, tab) => {\n  if (command === \"toggle-side-panel\") {\n    await openSidePanel(tab?.windowId);\n  }\n});\n\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n  if (message?.type === \"backlog-auth:get\") {\n    getBacklogAuthConfig()\n      .then((config) => sendResponse({ config }))\n      .catch((error) => sendResponse({ error: error?.message ?? String(error) }));\n    return true;\n  }\n  if (message?.type === \"sidepanel:toggle\") {\n    toggleSidePanelFromMessage(sender)\n      .then(() => sendResponse({ ok: true }))\n      .catch((error) => sendResponse({ error: error?.message ?? String(error) }));\n    return true;\n  }\n  if (message?.type === \"backlog:issues:list\") {\n    getTodayTomorrowIssues(Boolean(message?.force))\n      .then((data) => sendResponse({ data }))\n      .catch((error) => sendResponse({ error: error?.message ?? String(error) }));\n    return true;\n  }\n  if (message?.type === \"backlog:issue:updateStatus\") {\n    const issueId = Number(message.issueId);\n    const statusId = Number(message.statusId);\n    updateIssueStatusById(issueId, statusId)\n      .then(() => sendResponse({ ok: true }))\n      .catch((error) => sendResponse({ error: error?.message ?? String(error) }));\n    return true;\n  }\n  if (message?.type === \"backlog:issue:updateDueDate\") {\n    const issueId = Number(message.issueId);\n    const dueDate = String(message.dueDate ?? \"\");\n    updateIssueDueDate(issueId, dueDate)\n      .then(() => sendResponse({ ok: true }))\n      .catch((error) => sendResponse({ error: error?.message ?? String(error) }));\n    return true;\n  }\n  if (message?.type === \"backlog:project:statuses\") {\n    const projectId = Number(message.projectId);\n    getProjectStatusesById(projectId)\n      .then((data) => sendResponse({ data }))\n      .catch((error) => sendResponse({ error: error?.message ?? String(error) }));\n    return true;\n  }\n  if (message?.type === \"backlog:projects:details\") {\n    getAllProjectDetails()\n      .then((data) => sendResponse({ data }))\n      .catch((error) => sendResponse({ error: error?.message ?? String(error) }));\n    return true;\n  }\n  if (message?.type === \"backlog:issue:create\") {\n    const payload = message.payload ?? {};\n    const params: CreateIssueParams = {\n      projectId: Number(payload.projectId),\n      issueTypeId: Number(payload.issueTypeId),\n      summary: String(payload.summary ?? \"\"),\n      description: typeof payload.description === \"string\" ? payload.description : undefined,\n      startDate: typeof payload.startDate === \"string\" && payload.startDate ? payload.startDate : undefined,\n      dueDate: typeof payload.dueDate === \"string\" && payload.dueDate ? payload.dueDate : undefined,\n      assigneeId: Number(payload.assigneeId) > 0 ? Number(payload.assigneeId) : undefined,\n      categoryId: Number(payload.categoryId) > 0 ? Number(payload.categoryId) : undefined\n    };\n    createIssue(params)\n      .then((issue) => sendResponse({ ok: true, issue }))\n      .catch((error) => sendResponse({ error: error?.message ?? String(error) }));\n    return true;\n  }\n  if (message?.type === \"chatgpt:json:request\") {\n    extractJsonFromChatGpt()\n      .then((result) => sendResponse({ data: result.data, raw: result.raw }))\n      .catch((error) => sendResponse({ error: error instanceof Error ? error.message : String(error) }));\n    return true;\n  }\n  return undefined;\n});\n\nasync function openSidePanel(windowId?: number): Promise<void> {\n  if (!chrome.sidePanel?.open) {\n    throw new Error(\"Chrome \u306E\u30B5\u30A4\u30C9\u30D1\u30CD\u30EB API \u304C\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002\u30D6\u30E9\u30A6\u30B6\u306E\u30D0\u30FC\u30B8\u30E7\u30F3\u3084\u5B9F\u9A13\u6A5F\u80FD\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002\");\n  }\n\n  const args =\n    typeof windowId === \"number\" && windowId !== chrome.windows.WINDOW_ID_NONE\n      ? { windowId }\n      : undefined;\n\n  try {\n    await chrome.sidePanel.open(args ?? {});\n  } catch (error) {\n    const message = error instanceof Error ? error.message : String(error);\n    if (message.includes(\"Extension context invalidated\")) {\n      console.warn(\"Side panel context invalidated; retrying open after short delay\");\n      await delay(200);\n      await chrome.sidePanel.open(args ?? {});\n      return;\n    }\n    console.warn(\"Failed to open side panel:\", error);\n    throw error instanceof Error ? error : new Error(String(error));\n  }\n}\n\nasync function toggleSidePanelFromMessage(sender: chrome.runtime.MessageSender): Promise<void> {\n  await openSidePanel(sender.tab?.windowId);\n}\n\nchrome.storage.onChanged.addListener((changes, areaName) => {\n  if (areaName === \"local\" && BACKLOG_AUTH_KEY in changes) {\n    clearBacklogIssueCache();\n  }\n});\n\nfunction delay(ms: number): Promise<void> {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n}\n\nasync function extractJsonFromChatGpt(): Promise<{ data: unknown; raw: string }> {\n  const tabs = await chrome.tabs.query({ url: CHATGPT_URL_PATTERNS });\n  if (!tabs.length) {\n    throw new Error(\"ChatGPT \u306E\u30BF\u30D6\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002\u5148\u306B ChatGPT \u3092\u958B\u3044\u3066\u304F\u3060\u3055\u3044\u3002\");\n  }\n\n  const orderedTabs = [\n    ...tabs.filter((tab) => tab.active),\n    ...tabs.filter((tab) => !tab.active)\n  ];\n\n  let lastError: unknown = null;\n  for (const tab of orderedTabs) {\n    if (!tab.id) {\n      continue;\n    }\n    try {\n      const response = await chrome.tabs.sendMessage(tab.id, { type: \"chatgpt:extract-json\" });\n      if (response?.ok) {\n        return { data: response.data, raw: response.raw };\n      }\n      if (response?.error) {\n        lastError = response.error;\n      }\n    } catch (error) {\n      lastError = error;\n    }\n  }\n\n  if (typeof lastError === \"string\" && lastError.trim().length > 0) {\n    throw new Error(lastError);\n  }\n  if (lastError instanceof Error) {\n    throw lastError;\n  }\n  throw new Error(\"ChatGPT \u304B\u3089\u6709\u52B9\u306A JSON \u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\");\n}\n"],
  "mappings": "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",
  "names": []
}
