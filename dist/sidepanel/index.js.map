{
  "version": 3,
  "sources": ["../../src/shared/storage.ts", "../../src/shared/promptTemplate.ts", "../../src/shared/backlogConfig.ts", "../../src/sidepanel/index.ts"],
  "sourcesContent": ["type StorageArea = chrome.storage.LocalStorageArea;\n\nconst storage: StorageArea = chrome.storage.local;\n\nexport function storageGet<T>(keys: string[]): Promise<Record<string, T>> {\n  return new Promise((resolve, reject) => {\n    storage.get(keys, (items) => {\n      const error = chrome.runtime.lastError;\n      if (error) {\n        reject(error);\n      } else {\n        resolve(items as Record<string, T>);\n      }\n    });\n  });\n}\n\nexport function storageSet(items: Record<string, unknown>): Promise<void> {\n  return new Promise((resolve, reject) => {\n    storage.set(items, () => {\n      const error = chrome.runtime.lastError;\n      if (error) {\n        reject(error);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\nexport function storageRemove(keys: string[]): Promise<void> {\n  return new Promise((resolve, reject) => {\n    storage.remove(keys, () => {\n      const error = chrome.runtime.lastError;\n      if (error) {\n        reject(error);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n", "import { storageGet, storageRemove, storageSet } from \"./storage\";\n\nexport const CHATGPT_PROMPT_TEMPLATE_KEY = \"chatgptPromptTemplate\";\n\nexport const DEFAULT_PROMPT_TEMPLATE = `You are a JSON extraction assistant. Read the unstructured input text and produce **only** a JSON object that validates against the JSON Schema provided below. All textual values (summary, description, category names, etc.) must be written in Japanese. Enforce the following domain rules:\n- summary\u306F\u65E5\u672C\u8A9E\u306720\u6587\u5B57\u4EE5\u5185\u306B\u3057\u307E\u3059\u3002\n- \u30B5\u30D6\u30BF\u30B9\u30AF\u3084\u30A2\u30AF\u30B7\u30E7\u30F3\u304C\u542B\u307E\u308C\u308B\u5834\u5408\u3001Backlog\u306E\u30C1\u30A7\u30C3\u30AF\u30DC\u30C3\u30AF\u30B9\u8A18\u6CD5 (\u4F8B: \"- [ ] \u30BF\u30B9\u30AF\") \u3067\u5217\u6319\u3057\u307E\u3059\u3002\n- startDate\u304C\u5165\u529B\u6587\u3067\u6307\u5B9A\u3055\u308C\u3066\u3044\u306A\u3044\u5834\u5408\u306F {{TODAY}} \u3092\u8A2D\u5B9A\u3057\u307E\u3059\u3002\n- \u308F\u304B\u3089\u306A\u3044\u5024\u306F null \u307E\u305F\u306F\u7A7A\u914D\u5217\u306B\u3057\u307E\u3059\u3002\n\nAvailable project context:\n- Issue types: {{ISSUE_TYPES}}\n- Categories: {{CATEGORIES}}\n- Assignees:\n{{ASSIGNEES}}\n\nInput text:\n{{INPUT_TEXT}}\n\nJSON Schema (Draft 2020-12):\n{{JSON_SCHEMA}}\n\nOutput the JSON object now.`;\n\nexport async function getPromptTemplate(): Promise<string> {\n  const stored = await storageGet<string | null>([CHATGPT_PROMPT_TEMPLATE_KEY]);\n  const value = stored[CHATGPT_PROMPT_TEMPLATE_KEY];\n  if (typeof value === \"string\" && value.trim().length > 0) {\n    return value;\n  }\n  return DEFAULT_PROMPT_TEMPLATE;\n}\n\nexport async function savePromptTemplate(value: string): Promise<void> {\n  const normalized = value.trim().length > 0 ? value : DEFAULT_PROMPT_TEMPLATE;\n  await storageSet({ [CHATGPT_PROMPT_TEMPLATE_KEY]: normalized });\n}\n\nexport async function clearPromptTemplate(): Promise<void> {\n  await storageRemove([CHATGPT_PROMPT_TEMPLATE_KEY]);\n}\n", "import { storageGet, storageSet, storageRemove } from \"./storage\";\n\nexport type LlmProvider = \"chatgpt\" | \"gemini\";\n\nexport interface BacklogAuthConfig {\n  spaceDomain: string;\n  apiKey: string;\n  host: \"backlog.com\" | \"backlog.jp\";\n  showNoDueSection?: boolean;\n  showTomorrowSection?: boolean;\n  issueFetchLimit?: number;\n  excludedProjects?: string[];\n  llmProvider?: LlmProvider;\n  autoImportDelaySeconds?: number;\n  autoCreateDelaySeconds?: number;\n}\n\nexport const BACKLOG_AUTH_KEY = \"backlogAuth\";\nexport const BACKLOG_ISSUES_REVISION_KEY = \"backlogManagerIssuesRevision\";\nexport const ISSUE_FETCH_LIMIT_MIN = 50;\nexport const ISSUE_FETCH_LIMIT_MAX = 1000;\nexport const DEFAULT_ISSUE_FETCH_LIMIT = 1000;\nexport const DEFAULT_LLM_PROVIDER: LlmProvider = \"chatgpt\";\nexport const AUTO_IMPORT_DELAY_MIN = 10;\nexport const AUTO_IMPORT_DELAY_MAX = 600;\nexport const DEFAULT_AUTO_IMPORT_DELAY_SECONDS = 60;\nexport const AUTO_CREATE_DELAY_MIN = 5;\nexport const AUTO_CREATE_DELAY_MAX = 300;\nexport const DEFAULT_AUTO_CREATE_DELAY_SECONDS = 15;\n\nexport async function getBacklogAuthConfig(): Promise<BacklogAuthConfig | null> {\n  const result = await storageGet<BacklogAuthConfig | null>([BACKLOG_AUTH_KEY]);\n  const config = result[BACKLOG_AUTH_KEY];\n  if (!config) {\n    return null;\n  }\n  if (config.showNoDueSection === undefined) {\n    config.showNoDueSection = true;\n  }\n  if (config.showTomorrowSection === undefined) {\n    config.showTomorrowSection = true;\n  }\n  config.issueFetchLimit = normalizeIssueFetchLimit(config.issueFetchLimit);\n  config.excludedProjects = normalizeExcludedProjects(config.excludedProjects);\n  config.llmProvider = normalizeLlmProvider(config.llmProvider);\n  config.autoImportDelaySeconds = normalizeAutoDelay(\n    config.autoImportDelaySeconds,\n    AUTO_IMPORT_DELAY_MIN,\n    AUTO_IMPORT_DELAY_MAX,\n    DEFAULT_AUTO_IMPORT_DELAY_SECONDS\n  );\n  config.autoCreateDelaySeconds = normalizeAutoDelay(\n    config.autoCreateDelaySeconds,\n    AUTO_CREATE_DELAY_MIN,\n    AUTO_CREATE_DELAY_MAX,\n    DEFAULT_AUTO_CREATE_DELAY_SECONDS\n  );\n  return config;\n}\n\nexport async function saveBacklogAuthConfig(config: BacklogAuthConfig): Promise<void> {\n  await storageSet({ [BACKLOG_AUTH_KEY]: config });\n}\n\nexport async function clearBacklogAuthConfig(): Promise<void> {\n  await storageRemove([BACKLOG_AUTH_KEY]);\n}\n\nexport function backlogBaseUrl(config: BacklogAuthConfig): string {\n  return `https://${config.spaceDomain}.${config.host}`;\n}\n\nexport function backlogApiOrigin(config: BacklogAuthConfig): string {\n  return `${backlogBaseUrl(config)}/`;\n}\n\nexport function normalizeIssueFetchLimit(value?: number): number {\n  if (!Number.isFinite(value ?? NaN)) {\n    return DEFAULT_ISSUE_FETCH_LIMIT;\n  }\n  const numericValue = Number(value);\n  return Math.min(ISSUE_FETCH_LIMIT_MAX, Math.max(ISSUE_FETCH_LIMIT_MIN, Math.floor(numericValue)));\n}\n\nexport function normalizeExcludedProjects(raw?: string[] | null): string[] {\n  if (!Array.isArray(raw)) {\n    return [];\n  }\n  const seen = new Set<string>();\n  raw.forEach((item) => {\n    if (typeof item !== \"string\") {\n      return;\n    }\n    const trimmed = item.trim();\n    if (!trimmed) {\n      return;\n    }\n    seen.add(trimmed);\n  });\n  return Array.from(seen);\n}\n\nexport function normalizeLlmProvider(value?: string | null): LlmProvider {\n  if (value === \"gemini\") {\n    return \"gemini\";\n  }\n  return DEFAULT_LLM_PROVIDER;\n}\n\nexport function normalizeAutoDelay(\n  value: unknown,\n  min: number,\n  max: number,\n  fallback: number\n): number {\n  const numeric = Number(value);\n  if (!Number.isFinite(numeric)) {\n    return fallback;\n  }\n  const clamped = Math.floor(Math.max(min, Math.min(max, numeric)));\n  return clamped;\n}\n", "import { CHATGPT_PROMPT_TEMPLATE_KEY, getPromptTemplate } from \"@shared/promptTemplate\";\nimport { BACKLOG_AUTH_KEY, DEFAULT_LLM_PROVIDER, normalizeLlmProvider } from \"@shared/backlogConfig\";\nimport type { BacklogAuthConfig, LlmProvider } from \"@shared/backlogConfig\";\n\nconst CHATGPT_URL = \"https://chatgpt.com/?temporary-chat=true\";\nconst GEMINI_URL = \"https://gemini.google.com/app?hl=ja\";\nconst STORAGE_LAST_PROJECT_ID_KEY = \"sidepanel:lastProjectId\";\nconst STORAGE_PROJECT_PREFS_KEY = \"sidepanel:lastProjectPrefs\";\n\ntype LlmProviderInfo = {\n  id: LlmProvider;\n  label: string;\n  cardTitle: string;\n  description: string;\n  openButtonLabel: string;\n  successMessage: (hasWarnings: boolean, warnings: string[]) => string;\n  openUrl: string;\n  noTabError: string;\n};\n\nconst LLM_PROVIDER_CONFIG: Record<LlmProvider, LlmProviderInfo> = {\n  chatgpt: {\n    id: \"chatgpt\",\n    label: \"ChatGPT\",\n    cardTitle: \"ChatGPT \u9023\u643A\",\n    description: \"\u30C1\u30B1\u30C3\u30C8\u306B\u3064\u3044\u3066\u306E\u60C5\u5831\u3092\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3057\u3066\u3001\u4EE5\u4E0B\u306E\u30DC\u30BF\u30F3\u3092\u62BC\u3057\u3066\u304F\u3060\u3055\u3044\u3002\",\n    openButtonLabel: \"ChatGPT \u3092\u958B\u304F\",\n    successMessage: (hasWarnings, warnings) =>\n      hasWarnings\n        ? `ChatGPT \u306E JSON \u3092\u53D6\u308A\u8FBC\u307F\u307E\u3057\u305F\u3002\uFF08\u672A\u8A2D\u5B9A: ${warnings.join(\", \")}\uFF09`\n        : \"ChatGPT \u306E JSON \u3092\u53D6\u308A\u8FBC\u307F\u307E\u3057\u305F\u3002\",\n    openUrl: CHATGPT_URL,\n    noTabError: \"ChatGPT \u306E\u30BF\u30D6\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002\u5148\u306B ChatGPT \u3092\u958B\u3044\u3066\u304F\u3060\u3055\u3044\u3002\"\n  },\n  gemini: {\n    id: \"gemini\",\n    label: \"Gemini\",\n    cardTitle: \"Gemini \u9023\u643A\",\n    description: \"\u30C1\u30B1\u30C3\u30C8\u306E\u60C5\u5831\u3092\u30B3\u30D4\u30FC\u3057\u305F\u3042\u3068\u3001\u4EE5\u4E0B\u306E\u30DC\u30BF\u30F3\u304B\u3089 Gemini \u3092\u958B\u3044\u3066\u304F\u3060\u3055\u3044\u3002\",\n    openButtonLabel: \"Gemini \u3092\u958B\u304F\",\n    successMessage: (hasWarnings, warnings) =>\n      hasWarnings\n        ? `Gemini \u306E JSON \u3092\u53D6\u308A\u8FBC\u307F\u307E\u3057\u305F\u3002\uFF08\u672A\u8A2D\u5B9A: ${warnings.join(\", \")}\uFF09`\n        : \"Gemini \u306E JSON \u3092\u53D6\u308A\u8FBC\u307F\u307E\u3057\u305F\u3002\",\n    openUrl: GEMINI_URL,\n    noTabError: \"Gemini \u306E\u30BF\u30D6\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002\u5148\u306B Gemini \u3092\u958B\u3044\u3066\u304F\u3060\u3055\u3044\u3002\"\n  }\n};\n\ntype ProjectPreference = {\n  issueTypeId?: number;\n  categoryId?: number;\n};\n\ntype ProjectDetailBundle = {\n  projectId: number;\n  name: string;\n  projectKey: string;\n  statuses: Array<{ id: number; name: string; displayOrder: number }>;\n  categories: Array<{ id: number; name: string }>;\n  issueTypes: Array<{ id: number; name: string; color?: string }>;\n  users: Array<{ id: number; name: string }>;\n  currentUserId: number | null;\n};\n\nlet cachedProjectDetails: ProjectDetailBundle[] | null = null;\nlet projectDetailsPromise: Promise<ProjectDetailBundle[] | null> | null = null;\nlet ticketProjectSelectRef: HTMLSelectElement | null = null;\nlet chatgptProjectSelectRef: HTMLSelectElement | null = null;\nlet chatgptCopyButtonRef: HTMLButtonElement | null = null;\nlet lastProjectId: number | null = null;\nlet projectPreferences: Record<string, ProjectPreference> = {};\nlet formPreferencesLoaded = false;\nlet promptTemplateCache: string | null = null;\nconst excludedProjectIds = new Set<number>();\nconst excludedProjectKeys = new Set<string>();\nlet currentLlmProvider: LlmProvider = DEFAULT_LLM_PROVIDER;\nconst llmUiRefs: {\n  heading: HTMLHeadingElement | null;\n  description: HTMLParagraphElement | null;\n  openButton: HTMLButtonElement | null;\n} = {\n  heading: null,\n  description: null,\n  openButton: null\n};\n\nfunction getActiveLlmProvider(): LlmProvider {\n  return currentLlmProvider;\n}\n\nfunction getLlmProviderInfo(provider: LlmProvider = currentLlmProvider): LlmProviderInfo {\n  return LLM_PROVIDER_CONFIG[provider];\n}\n\nfunction setActiveLlmProvider(provider: LlmProvider): void {\n  const normalized = normalizeLlmProvider(provider);\n  if (currentLlmProvider === normalized) {\n    return;\n  }\n  currentLlmProvider = normalized;\n  updateLlmUiTexts();\n}\n\nfunction updateLlmUiTexts(): void {\n  const info = getLlmProviderInfo();\n  if (llmUiRefs.heading) {\n    llmUiRefs.heading.textContent = info.cardTitle;\n  }\n  if (llmUiRefs.description) {\n    llmUiRefs.description.textContent = info.description;\n  }\n  if (llmUiRefs.openButton) {\n    llmUiRefs.openButton.textContent = info.openButtonLabel;\n  }\n}\n\nasync function refreshAuthPreferences(): Promise<void> {\n  try {\n    const response = await chrome.runtime.sendMessage({ type: \"backlog-auth:get\" });\n    const config = response?.config as BacklogAuthConfig | null;\n    updateProjectExclusions(config?.excludedProjects ?? []);\n    setActiveLlmProvider(config?.llmProvider ?? DEFAULT_LLM_PROVIDER);\n    autoImportDelaySeconds = normalizeAutoDelay(\n      config?.autoImportDelaySeconds,\n      AUTO_IMPORT_DELAY_MIN,\n      AUTO_IMPORT_DELAY_MAX,\n      DEFAULT_AUTO_IMPORT_DELAY_SECONDS\n    );\n    autoCreateDelaySeconds = normalizeAutoDelay(\n      config?.autoCreateDelaySeconds,\n      AUTO_CREATE_DELAY_MIN,\n      AUTO_CREATE_DELAY_MAX,\n      DEFAULT_AUTO_CREATE_DELAY_SECONDS\n    );\n  } catch (error) {\n    console.warn(\"Failed to load Backlog auth config\", error);\n    updateProjectExclusions([]);\n    setActiveLlmProvider(DEFAULT_LLM_PROVIDER);\n    autoImportDelaySeconds = DEFAULT_AUTO_IMPORT_DELAY_SECONDS;\n    autoCreateDelaySeconds = DEFAULT_AUTO_CREATE_DELAY_SECONDS;\n  }\n}\n\nfunction updateProjectExclusions(tokens: string[]): void {\n  excludedProjectIds.clear();\n  excludedProjectKeys.clear();\n  tokens.forEach((token) => {\n    if (typeof token !== \"string\") {\n      return;\n    }\n    const trimmed = token.trim();\n    if (!trimmed) {\n      return;\n    }\n    if (/^\\d+$/.test(trimmed)) {\n      excludedProjectIds.add(Number(trimmed));\n      return;\n    }\n    excludedProjectKeys.add(trimmed.toLowerCase());\n  });\n}\n\nfunction isProjectExcluded(project: { projectId: number; projectKey: string }): boolean {\n  if (excludedProjectIds.has(project.projectId)) {\n    return true;\n  }\n  const key = project.projectKey?.toLowerCase?.();\n  if (key && excludedProjectKeys.has(key)) {\n    return true;\n  }\n  return false;\n}\n\nfunction filterProjects<T extends { projectId: number; projectKey: string }>(projects: T[]): T[] {\n  if (!excludedProjectIds.size && !excludedProjectKeys.size) {\n    return projects;\n  }\n  return projects.filter((project) => !isProjectExcluded(project));\n}\n\nasync function ensureFormPreferencesLoaded(): Promise<void> {\n  if (formPreferencesLoaded) {\n    return;\n  }\n  try {\n    const result = await chrome.storage.local.get([STORAGE_LAST_PROJECT_ID_KEY, STORAGE_PROJECT_PREFS_KEY]);\n    const storedProjectId = result[STORAGE_LAST_PROJECT_ID_KEY];\n    if (typeof storedProjectId === \"number\" && Number.isFinite(storedProjectId) && storedProjectId > 0) {\n      lastProjectId = storedProjectId;\n    }\n    const rawPrefs = result[STORAGE_PROJECT_PREFS_KEY];\n    if (rawPrefs && typeof rawPrefs === \"object\") {\n      const normalized: Record<string, ProjectPreference> = {};\n      for (const [key, value] of Object.entries(rawPrefs as Record<string, unknown>)) {\n        if (!value || typeof value !== \"object\") {\n          continue;\n        }\n        const prefValue = value as { issueTypeId?: unknown; categoryId?: unknown };\n        const pref: ProjectPreference = {};\n        const issueTypeId = Number(prefValue.issueTypeId);\n        if (Number.isFinite(issueTypeId) && issueTypeId > 0) {\n          pref.issueTypeId = issueTypeId;\n        }\n        const categoryId = Number(prefValue.categoryId);\n        if (Number.isFinite(categoryId) && categoryId > 0) {\n          pref.categoryId = categoryId;\n        }\n        normalized[key] = pref;\n      }\n      projectPreferences = normalized;\n    } else {\n      projectPreferences = {};\n    }\n  } catch (error) {\n    console.warn(\"Failed to load ticket form preferences\", error);\n    projectPreferences = {};\n    lastProjectId = null;\n  } finally {\n    formPreferencesLoaded = true;\n  }\n}\n\nasync function persistFormPreferences(projectId: number, updates: ProjectPreference): Promise<void> {\n  if (!Number.isFinite(projectId) || projectId <= 0) {\n    return;\n  }\n  await ensureFormPreferencesLoaded();\n\n  const key = String(projectId);\n  const current = projectPreferences[key] ?? {};\n  const next: ProjectPreference = { ...current };\n  if (updates.issueTypeId !== undefined) {\n    next.issueTypeId = updates.issueTypeId > 0 ? updates.issueTypeId : undefined;\n  }\n  if (updates.categoryId !== undefined) {\n    next.categoryId = updates.categoryId > 0 ? updates.categoryId : undefined;\n  }\n  projectPreferences[key] = next;\n  lastProjectId = projectId;\n\n  try {\n    await chrome.storage.local.set({\n      [STORAGE_LAST_PROJECT_ID_KEY]: lastProjectId,\n      [STORAGE_PROJECT_PREFS_KEY]: projectPreferences\n    });\n  } catch (error) {\n    console.warn(\"Failed to persist ticket form preferences\", error);\n  }\n}\n\nfunction getStoredPreference(projectId: number | null): ProjectPreference | null {\n  if (!projectId) {\n    return null;\n  }\n  const pref = projectPreferences[String(projectId)];\n  return pref ?? null;\n}\n\nasync function ensurePromptTemplateLoaded(): Promise<string> {\n  if (promptTemplateCache) {\n    return promptTemplateCache;\n  }\n  const template = await getPromptTemplate();\n  promptTemplateCache = template;\n  return template;\n}\n\nasync function init(): Promise<void> {\n  const root = document.getElementById(\"sidepanel-root\");\n  if (!root) {\n    return;\n  }\n\n  cachedProjectDetails = null;\n  projectDetailsPromise = null;\n  await refreshAuthPreferences().catch((error) => {\n    console.warn(\"Failed to load Backlog preferences\", error);\n  });\n  void loadProjectDetails(true);\n\n  root.append(createLlmCard(), createTicketCard());\n}\n\nfunction createCardBase(title: string, description?: string): HTMLDivElement {\n  const card = document.createElement(\"div\");\n  card.className = \"panel-card\";\n\n  const header = document.createElement(\"header\");\n  header.className = \"panel-card__header\";\n\n  const heading = document.createElement(\"h2\");\n  heading.textContent = title;\n  header.append(heading);\n\n  if (description) {\n    const desc = document.createElement(\"p\");\n    desc.className = \"panel-card__description\";\n    desc.textContent = description;\n    header.append(desc);\n  }\n\n  card.append(header);\n  return card;\n}\n\nfunction createTicketCard(): HTMLElement {\n  const card = createCardBase(\"Backlog \u30C1\u30B1\u30C3\u30C8\u4F5C\u6210\", \"\u4E0A\u90E8\u30D0\u30FC\u3068\u9023\u52D5\u3057\u305F\u30C1\u30B1\u30C3\u30C8\u4F5C\u6210\u30D5\u30A9\u30FC\u30E0\u3092\u3053\u3053\u306B\u914D\u7F6E\u3057\u307E\u3059\u3002\");\n\n  void ensureFormPreferencesLoaded();\n\n  const form = document.createElement(\"div\");\n  form.className = \"ticket-form\";\n\n  const projectField = document.createElement(\"div\");\n  projectField.className = \"ticket-form__field\";\n  const projectLabel = document.createElement(\"span\");\n  projectLabel.textContent = \"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\";\n  const projectSelect = document.createElement(\"select\");\n  projectSelect.className = \"ticket-form__select\";\n  projectSelect.innerHTML = `<option value=\"\" selected>\u8AAD\u307F\u8FBC\u307F\u4E2D...</option>`;\n  projectField.append(projectLabel, projectSelect);\n  ticketProjectSelectRef = projectSelect;\n\n  const issueTypeField = document.createElement(\"div\");\n  issueTypeField.className = \"ticket-form__field\";\n  const issueTypeLabel = document.createElement(\"span\");\n  issueTypeLabel.textContent = \"\u7A2E\u5225\";\n  const issueTypeSelect = document.createElement(\"select\");\n  issueTypeSelect.className = \"ticket-form__select\";\n  issueTypeSelect.disabled = true;\n  issueTypeSelect.innerHTML = `<option value=\"\" selected>\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044</option>`;\n  issueTypeField.append(issueTypeLabel, issueTypeSelect);\n\n  const categoryField = document.createElement(\"div\");\n  categoryField.className = \"ticket-form__field\";\n  const categoryLabel = document.createElement(\"span\");\n  categoryLabel.textContent = \"\u30AB\u30C6\u30B4\u30EA\u30FC\";\n  const categorySelect = document.createElement(\"select\");\n  categorySelect.className = \"ticket-form__select\";\n  categorySelect.disabled = true;\n  categorySelect.innerHTML = `<option value=\"\" selected>\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044</option>`;\n  categoryField.append(categoryLabel, categorySelect);\n\n  const assigneeField = document.createElement(\"div\");\n  assigneeField.className = \"ticket-form__field\";\n  const assigneeLabel = document.createElement(\"span\");\n  assigneeLabel.textContent = \"\u62C5\u5F53\u8005\";\n  const assigneeSelect = document.createElement(\"select\");\n  assigneeSelect.className = \"ticket-form__select\";\n  assigneeSelect.disabled = true;\n  assigneeSelect.innerHTML = `<option value=\"\" selected>\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044</option>`;\n  assigneeField.append(assigneeLabel, assigneeSelect);\n\n  form.append(projectField, issueTypeField, categoryField, assigneeField);\n\n  const startDateField = createDateField(\"\u958B\u59CB\u65E5\");\n  const dueDateField = createDateField(\"\u671F\u9650\u65E5\");\n  form.append(startDateField.container, dueDateField.container);\n\n  const titleField = createTextField(\"\u30BF\u30A4\u30C8\u30EB\", \"\u6982\u8981\u3092\u5165\u529B\");\n  const bodyField = createTextareaField(\"\u672C\u6587\", \"\u8A73\u7D30\u3092\u5165\u529B\");\n  form.append(titleField.container, bodyField.container);\n\n  const actions = document.createElement(\"div\");\n  actions.className = \"ticket-form__actions\";\n\n  const autoImportButton = document.createElement(\"button\");\n  autoImportButton.type = \"button\";\n  autoImportButton.className = \"button button--ghost\";\n  autoImportButton.textContent = \"1\u5206\u5F8C\u306B\u81EA\u52D5\u53D6\u308A\u8FBC\u307F\";\n\n  const importButton = document.createElement(\"button\");\n  importButton.type = \"button\";\n  importButton.className = \"button button--ghost\";\n  importButton.textContent = \"JSON \u3092\u53D6\u308A\u8FBC\u3080\";\n\n  const createButton = document.createElement(\"button\");\n  createButton.type = \"button\";\n  createButton.className = \"button button--primary\";\n  createButton.textContent = \"\u30C1\u30B1\u30C3\u30C8\u3092\u4F5C\u6210\";\n\n  actions.append(autoImportButton, importButton, createButton);\n\n  const feedback = document.createElement(\"p\");\n  feedback.className = \"ticket-form__feedback\";\n  feedback.hidden = true;\n  form.append(feedback);\n\n  card.append(form, actions);\n\n  void loadProjectDetails().then(async (details) => {\n    const list = details ?? [];\n    populateProjectSelect(projectSelect, issueTypeSelect, categorySelect, assigneeSelect, list);\n    if (chatgptProjectSelectRef) {\n      populateChatGptProjectSelect(chatgptProjectSelectRef, list);\n    }\n    populateProjectMetadataForSelection(\n      Number(projectSelect.value),\n      issueTypeSelect,\n      categorySelect,\n      assigneeSelect,\n      list\n    );\n\n    await ensureFormPreferencesLoaded();\n    const storedProjectId = lastProjectId;\n    if (storedProjectId && projectSelect.querySelector(`option[value=\"${storedProjectId}\"]`)) {\n      if (String(storedProjectId) !== projectSelect.value) {\n        projectSelect.value = String(storedProjectId);\n        projectSelect.dispatchEvent(new Event(\"change\", { bubbles: true, cancelable: false }));\n      } else {\n        populateProjectMetadataForSelection(\n          storedProjectId,\n          issueTypeSelect,\n          categorySelect,\n          assigneeSelect,\n          list\n        );\n        const preference = getStoredPreference(storedProjectId);\n        applyStoredPreferenceToSelectors(issueTypeSelect, categorySelect, preference);\n        void persistFormPreferences(storedProjectId, preference ?? {});\n      }\n    } else {\n      const currentProjectId = Number(projectSelect.value);\n      if (currentProjectId) {\n        const preference = getStoredPreference(currentProjectId);\n        applyStoredPreferenceToSelectors(issueTypeSelect, categorySelect, preference);\n      }\n    }\n  });\n\n  projectSelect.addEventListener(\"change\", () => {\n    const projectId = Number(projectSelect.value);\n    const details = cachedProjectDetails ?? [];\n    populateProjectMetadataForSelection(projectId, issueTypeSelect, categorySelect, assigneeSelect, details);\n    syncChatGptProjectSelection(projectId);\n    resetPromptCache();\n    if (projectId) {\n      void ensureFormPreferencesLoaded().then(() => {\n        const preference = getStoredPreference(projectId);\n        applyStoredPreferenceToSelectors(issueTypeSelect, categorySelect, preference);\n        if (preference) {\n          void persistFormPreferences(projectId, preference);\n        } else {\n          void persistFormPreferences(projectId, {});\n        }\n      });\n    }\n  });\n\n  const titleInput = titleField.input;\n  const bodyTextarea = bodyField.textarea;\n  let autoImportTimeoutId: number | null = null;\n  let autoImportIntervalId: number | null = null;\n  let autoImportRemainingSeconds = 0;\n  let autoProcessPhase: \"idle\" | \"wait-import\" | \"wait-create\" = \"idle\";\n  let pendingAutoCloseTabId: number | null = null;\n\n  function showFeedback(type: \"error\" | \"success\", message: string): void {\n    feedback.hidden = false;\n    feedback.textContent = message;\n    feedback.classList.toggle(\"ticket-form__feedback--error\", type === \"error\");\n    feedback.classList.toggle(\"ticket-form__feedback--success\", type === \"success\");\n  }\n\n  function clearFeedback(): void {\n    feedback.hidden = true;\n    feedback.textContent = \"\";\n    feedback.classList.remove(\"ticket-form__feedback--error\", \"ticket-form__feedback--success\");\n  }\n\n  function resetAutoImportTimer(showMessage = false): void {\n    if (autoImportTimeoutId) {\n      window.clearTimeout(autoImportTimeoutId);\n      autoImportTimeoutId = null;\n    }\n    if (autoImportIntervalId) {\n      window.clearInterval(autoImportIntervalId);\n      autoImportIntervalId = null;\n    }\n    autoImportButton.dataset.timer = \"idle\";\n    autoImportButton.textContent = \"1\u5206\u5F8C\u306B\u81EA\u52D5\u53D6\u308A\u8FBC\u307F\";\n    autoImportButton.disabled = false;\n    if (showMessage) {\n      showFeedback(\"success\", \"\u81EA\u52D5\u53D6\u308A\u8FBC\u307F\u3092\u30AD\u30E3\u30F3\u30BB\u30EB\u3057\u307E\u3057\u305F\u3002\");\n    }\n    autoProcessPhase = \"idle\";\n    pendingAutoCloseTabId = null;\n  }\n\n  async function runAutoImportWorkflow(triggeredByTimer: boolean): Promise<void> {\n    const projectId = Number(projectSelect.value);\n    if (!projectId) {\n      showFeedback(\"error\", \"\u5148\u306B\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002\");\n      return;\n    }\n    if (issueTypeSelect.disabled || categorySelect.disabled) {\n      showFeedback(\"error\", \"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u60C5\u5831\u3092\u8AAD\u307F\u8FBC\u307F\u4E2D\u3067\u3059\u3002\u5C11\u3057\u5F85\u3063\u3066\u304B\u3089\u518D\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002\");\n      return;\n    }\n    const provider = getActiveLlmProvider();\n    try {\n      showFeedback(\"success\", \"AI \u306E\u56DE\u7B54\u304B\u3089 JSON \u3092\u53D6\u308A\u8FBC\u307F\u4E2D\u3067\u3059\u2026\");\n      const response = await chrome.runtime.sendMessage({ type: \"llm:json:request\", provider });\n      if (!response || response.error) {\n        const info = getLlmProviderInfo(provider);\n        throw new Error(response?.error ?? `${info.label} \u304B\u3089 JSON \u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002`);\n      }\n      const data = response.data ?? {};\n      const tabIdToClose = typeof response.tabId === \"number\" ? response.tabId : null;\n      applyImportedJson(\n        data as Record<string, unknown>,\n        { issueTypeSelect, categorySelect, titleInput, bodyTextarea, startDateField, dueDateField },\n        showFeedback,\n        projectId\n      );\n      if (triggeredByTimer) {\n        pendingAutoCloseTabId = tabIdToClose;\n        await startAutoCreateCountdown();\n      }\n    } catch (error) {\n      const message = error instanceof Error ? error.message : String(error);\n      showFeedback(\"error\", message);\n      resetAutoImportTimer();\n    }\n  }\n\n  async function startAutoCreateCountdown(): Promise<void> {\n    autoProcessPhase = \"wait-create\";\n    autoImportRemainingSeconds = autoCreateDelaySeconds;\n    autoImportButton.dataset.timer = \"auto-create\";\n    autoImportButton.disabled = false;\n    autoImportButton.textContent = `\u30C1\u30B1\u30C3\u30C8\u4F5C\u6210\u307E\u3067 ${autoImportRemainingSeconds}\u79D2`;\n    showFeedback(\"success\", `${autoCreateDelaySeconds}\u79D2\u5F8C\u306B\u81EA\u52D5\u3067\u30C1\u30B1\u30C3\u30C8\u4F5C\u6210\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002`);\n    if (autoImportIntervalId) {\n      window.clearInterval(autoImportIntervalId);\n    }\n    autoImportIntervalId = window.setInterval(() => {\n      autoImportRemainingSeconds -= 1;\n      if (autoImportRemainingSeconds <= 0) {\n        if (autoImportIntervalId) {\n          window.clearInterval(autoImportIntervalId);\n          autoImportIntervalId = null;\n        }\n        autoImportButton.textContent = \"\u30C1\u30B1\u30C3\u30C8\u4F5C\u6210\u4E2D\u2026\";\n        autoImportButton.disabled = true;\n        return;\n      }\n      autoImportButton.textContent = `\u30C1\u30B1\u30C3\u30C8\u4F5C\u6210\u307E\u3067 ${autoImportRemainingSeconds}\u79D2`;\n    }, 1000);\n    if (autoImportTimeoutId) {\n      window.clearTimeout(autoImportTimeoutId);\n      autoImportTimeoutId = null;\n    }\n    autoImportTimeoutId = window.setTimeout(async () => {\n      autoImportTimeoutId = null;\n      if (autoImportIntervalId) {\n        window.clearInterval(autoImportIntervalId);\n        autoImportIntervalId = null;\n      }\n      autoImportButton.textContent = \"\u30C1\u30B1\u30C3\u30C8\u4F5C\u6210\u4E2D\u2026\";\n      autoImportButton.disabled = true;\n      await submitTicketCreation({ auto: true, tabIdToClose: pendingAutoCloseTabId });\n      resetAutoImportTimer();\n    }, autoCreateDelaySeconds * 1000);\n  }\n\n  autoImportButton.addEventListener(\"click\", () => {\n    if (autoImportTimeoutId) {\n      resetAutoImportTimer(true);\n      return;\n    }\n    if (!Number(projectSelect.value)) {\n      showFeedback(\"error\", \"\u5148\u306B\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002\");\n      return;\n    }\n    autoImportRemainingSeconds = autoImportDelaySeconds;\n    autoProcessPhase = \"wait-import\";\n    autoImportButton.dataset.timer = \"active\";\n    autoImportButton.textContent = `\u81EA\u52D5\u53D6\u308A\u8FBC\u307F\u307E\u3067 ${autoImportRemainingSeconds}\u79D2`;\n    showFeedback(\n      \"success\",\n      `${autoImportDelaySeconds}\u79D2\u5F8C\u306B AI \u306E JSON \u3092\u53D6\u308A\u8FBC\u307F\u3001\u305D\u306E\u5F8C\u30C1\u30B1\u30C3\u30C8\u4F5C\u6210\u307E\u3067\u81EA\u52D5\u3067\u9032\u3081\u307E\u3059\u3002`\n    );\n    autoImportIntervalId = window.setInterval(() => {\n      autoImportRemainingSeconds -= 1;\n      if (autoImportRemainingSeconds <= 0) {\n        if (autoImportIntervalId) {\n          window.clearInterval(autoImportIntervalId);\n          autoImportIntervalId = null;\n        }\n        autoImportButton.textContent = \"\u53D6\u308A\u8FBC\u307F\u4E2D\u2026\";\n        autoImportButton.disabled = true;\n        return;\n      }\n      autoImportButton.textContent = `\u81EA\u52D5\u53D6\u308A\u8FBC\u307F\u307E\u3067 ${autoImportRemainingSeconds}\u79D2`;\n    }, 1000);\n    autoImportTimeoutId = window.setTimeout(async () => {\n      autoImportTimeoutId = null;\n      if (autoImportIntervalId) {\n        window.clearInterval(autoImportIntervalId);\n        autoImportIntervalId = null;\n      }\n      autoImportButton.textContent = \"\u53D6\u308A\u8FBC\u307F\u4E2D\u2026\";\n      autoImportButton.disabled = true;\n      await runAutoImportWorkflow(true);\n    }, autoImportDelaySeconds * 1000);\n  });\n\n  importButton.addEventListener(\"click\", async () => {\n    if (autoImportTimeoutId) {\n      resetAutoImportTimer();\n    }\n    if (importButton.dataset.loading === \"true\") {\n      return;\n    }\n    clearFeedback();\n\n    const projectId = Number(projectSelect.value);\n    if (!projectId) {\n      showFeedback(\"error\", \"\u5148\u306B\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002\");\n      return;\n    }\n    if (issueTypeSelect.disabled || categorySelect.disabled) {\n      showFeedback(\"error\", \"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u60C5\u5831\u3092\u8AAD\u307F\u8FBC\u307F\u4E2D\u3067\u3059\u3002\u5C11\u3057\u5F85\u3063\u3066\u304B\u3089\u518D\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002\");\n      return;\n    }\n\n    importButton.dataset.loading = \"true\";\n    importButton.disabled = true;\n    try {\n      await ensureFormPreferencesLoaded();\n      const provider = getActiveLlmProvider();\n      const response = await chrome.runtime.sendMessage({ type: \"llm:json:request\", provider });\n      if (!response || response.error) {\n        const info = getLlmProviderInfo(provider);\n        throw new Error(response?.error ?? `${info.label} \u304B\u3089 JSON \u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002`);\n      }\n      const data = response.data ?? {};\n      applyImportedJson(\n        data as Record<string, unknown>,\n        { issueTypeSelect, categorySelect, titleInput, bodyTextarea, startDateField, dueDateField },\n        showFeedback,\n        projectId\n      );\n    } catch (error) {\n      const message = error instanceof Error ? error.message : String(error);\n      showFeedback(\"error\", message);\n    } finally {\n      delete importButton.dataset.loading;\n      importButton.disabled = false;\n    }\n  });\n\n  createButton.addEventListener(\"click\", () => {\n    if (autoProcessPhase !== \"idle\") {\n      resetAutoImportTimer();\n    }\n    void submitTicketCreation();\n  });\n\n  async function submitTicketCreation(\n    options: { auto?: boolean; tabIdToClose?: number | null } = {}\n  ): Promise<boolean> {\n    if (createButton.dataset.loading === \"true\") {\n      return false;\n    }\n    clearFeedback();\n\n    const projectId = Number(projectSelect.value);\n    if (!projectId) {\n      showFeedback(\"error\", \"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002\");\n      projectSelect.focus();\n      return false;\n    }\n\n    const issueTypeId = Number(issueTypeSelect.value);\n    if (!issueTypeId || issueTypeSelect.disabled) {\n      showFeedback(\"error\", \"\u7A2E\u5225\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002\");\n      issueTypeSelect.focus();\n      return false;\n    }\n\n    const summary = titleInput.value.trim();\n    if (!summary) {\n      showFeedback(\"error\", \"\u30BF\u30A4\u30C8\u30EB\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002\");\n      titleInput.focus();\n      return false;\n    }\n\n    const startDate = startDateField.input.value;\n    const dueDate = dueDateField.input.value;\n    if (startDate && dueDate && startDate > dueDate) {\n      showFeedback(\"error\", \"\u958B\u59CB\u65E5\u306F\u671F\u9650\u65E5\u4EE5\u524D\u306E\u65E5\u4ED8\u3092\u6307\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002\");\n      dueDateField.input.focus();\n      return false;\n    }\n\n    const payload = {\n      projectId,\n      issueTypeId,\n      summary,\n      description: bodyTextarea.value,\n      startDate: startDate || undefined,\n      dueDate: dueDate || undefined,\n      categoryId: Number(categorySelect.value) > 0 ? Number(categorySelect.value) : undefined,\n      assigneeId: !assigneeSelect.disabled && Number(assigneeSelect.value) > 0 ? Number(assigneeSelect.value) : undefined\n    };\n\n    createButton.dataset.loading = options.auto ? \"auto\" : \"manual\";\n    createButton.disabled = true;\n\n    try {\n      const response = await chrome.runtime.sendMessage({ type: \"backlog:issue:create\", payload });\n      if (!response || response.error) {\n        throw new Error(response?.error ?? \"\u30C1\u30B1\u30C3\u30C8\u3092\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\");\n      }\n      const issueKey = response.issue?.issueKey ?? \"\";\n      if (options.auto) {\n        showFeedback(\n          \"success\",\n          issueKey ? `\u81EA\u52D5\u3067\u30C1\u30B1\u30C3\u30C8 ${issueKey} \u3092\u4F5C\u6210\u3057\u307E\u3057\u305F\u3002` : \"\u81EA\u52D5\u3067\u30C1\u30B1\u30C3\u30C8\u3092\u4F5C\u6210\u3057\u307E\u3057\u305F\u3002\"\n        );\n      } else {\n        showFeedback(\"success\", issueKey ? `\u30C1\u30B1\u30C3\u30C8 ${issueKey} \u3092\u4F5C\u6210\u3057\u307E\u3057\u305F\u3002` : \"\u30C1\u30B1\u30C3\u30C8\u3092\u4F5C\u6210\u3057\u307E\u3057\u305F\u3002\");\n      }\n      titleInput.value = \"\";\n      bodyTextarea.value = \"\";\n      if (options.auto && options.tabIdToClose) {\n        void chrome.tabs.remove(options.tabIdToClose).catch((error) => {\n          console.warn(\"Failed to close AI tab after auto creation:\", error);\n        });\n        pendingAutoCloseTabId = null;\n      }\n      return true;\n    } catch (error) {\n      const message = error instanceof Error ? error.message : String(error);\n      showFeedback(\"error\", message);\n      return false;\n    } finally {\n      delete createButton.dataset.loading;\n      createButton.disabled = false;\n    }\n  }\n\n  return card;\n}\n\nfunction createLlmCard(): HTMLElement {\n  const providerInfo = getLlmProviderInfo();\n  const card = createCardBase(providerInfo.cardTitle, providerInfo.description);\n  const headingEl = card.querySelector(\"h2\");\n  const descriptionEl = card.querySelector(\".panel-card__description\");\n  if (headingEl) {\n    llmUiRefs.heading = headingEl;\n  }\n  if (descriptionEl) {\n    llmUiRefs.description = descriptionEl;\n  }\n\n  void ensureFormPreferencesLoaded();\n\n  const projectField = document.createElement(\"div\");\n  projectField.className = \"ticket-form__field\";\n  const projectLabel = document.createElement(\"span\");\n  projectLabel.textContent = \"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\";\n  const projectSelect = document.createElement(\"select\");\n  projectSelect.className = \"ticket-form__select\";\n  projectSelect.innerHTML = `<option value=\"\" selected>\u8AAD\u307F\u8FBC\u307F\u4E2D...</option>`;\n  projectField.append(projectLabel, projectSelect);\n  chatgptProjectSelectRef = projectSelect;\n\n  const viewport = document.createElement(\"div\");\n  viewport.className = \"chatgpt-view chatgpt-view--placeholder\";\n\n  const copyButton = document.createElement(\"button\");\n  copyButton.type = \"button\";\n  copyButton.className = \"button button--ghost\";\n  copyButton.textContent = \"\u30D7\u30ED\u30F3\u30D7\u30C8\u3092\u30B3\u30D4\u30FC\u3059\u308B\";\n  copyButton.hidden = true;\n  chatgptCopyButtonRef = copyButton;\n  copyButton.addEventListener(\"click\", async () => {\n    try {\n      const prompt = await buildPromptText();\n      await navigator.clipboard.writeText(prompt);\n      copyButton.textContent = \"\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F\uFF01\";\n      window.setTimeout(() => {\n        copyButton.textContent = \"\u30D7\u30ED\u30F3\u30D7\u30C8\u3092\u30B3\u30D4\u30FC\u3059\u308B\";\n      }, 1800);\n    } catch (error) {\n      console.warn(\"Failed to copy prompt\", error);\n      copyButton.textContent = \"\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F\";\n      window.setTimeout(() => {\n        copyButton.textContent = \"\u30D7\u30ED\u30F3\u30D7\u30C8\u3092\u30B3\u30D4\u30FC\u3059\u308B\";\n      }, 1800);\n      resetPromptCache();\n    }\n  });\n\n  const openButton = document.createElement(\"button\");\n  openButton.type = \"button\";\n  openButton.className = \"button button--primary\";\n  openButton.textContent = providerInfo.openButtonLabel;\n  llmUiRefs.openButton = openButton;\n  updateLlmUiTexts();\n  openButton.addEventListener(\"click\", async () => {\n    const activeProvider = getActiveLlmProvider();\n    const activeInfo = getLlmProviderInfo(activeProvider);\n    if (openButton.dataset.loading === \"true\") {\n      return;\n    }\n    openButton.dataset.loading = \"true\";\n    openButton.disabled = true;\n    try {\n      const details = cachedProjectDetails ?? (await loadProjectDetails());\n      const projectId = determineChatGptProjectId();\n      const project = details?.find((item) => item.projectId === projectId) ?? null;\n      if (!project) {\n        resetPromptCache();\n        return;\n      }\n\n      const prompt = await buildProjectPromptWithClipboard(project);\n      lastGeneratedPrompt = prompt;\n      await navigator.clipboard.writeText(prompt);\n      copyButton.hidden = false;\n      copyButton.textContent = \"\u30D7\u30ED\u30F3\u30D7\u30C8\u3092\u30B3\u30D4\u30FC\u3059\u308B\";\n    } catch (error) {\n      console.warn(\"Failed to prepare prompt for provider\", error);\n      resetPromptCache();\n      return;\n    } finally {\n      delete openButton.dataset.loading;\n      openButton.disabled = false;\n    }\n\n    chrome.tabs.create({ url: activeInfo.openUrl }).catch((error) => {\n      console.warn(\"Failed to open provider tab\", error);\n    });\n  });\n\n  viewport.append(openButton, copyButton);\n  card.append(projectField, viewport);\n\n  void loadProjectDetails().then((details) => {\n    const list = details ?? [];\n    populateChatGptProjectSelect(projectSelect, list);\n    const initialProjectId = determineChatGptProjectId();\n    if (initialProjectId) {\n      syncChatGptProjectSelection(initialProjectId);\n    }\n  });\n\n  projectSelect.addEventListener(\"change\", () => {\n    const projectId = Number(projectSelect.value);\n    if (ticketProjectSelectRef && projectId && ticketProjectSelectRef.value !== String(projectId)) {\n      if (ticketProjectSelectRef.querySelector(`option[value=\"${projectId}\"]`)) {\n        ticketProjectSelectRef.value = String(projectId);\n        const event = new Event(\"change\", { bubbles: true, cancelable: false });\n        ticketProjectSelectRef.dispatchEvent(event);\n      }\n    }\n    resetPromptCache();\n  });\n\n  return card;\n}\n\nif (document.readyState === \"loading\") {\n  document.addEventListener(\n    \"DOMContentLoaded\",\n    () => {\n      void init();\n    },\n    { once: true }\n  );\n} else {\n  void init();\n}\n\nasync function loadProjectDetails(force = false): Promise<ProjectDetailBundle[] | null> {\n  if (!force && cachedProjectDetails) {\n    return cachedProjectDetails;\n  }\n  if (!force && projectDetailsPromise) {\n    return projectDetailsPromise;\n  }\n\n  const request = (async () => {\n  try {\n    const response = await chrome.runtime.sendMessage({ type: \"backlog:projects:details\", force });\n      const data = response?.data as ProjectDetailBundle[] | undefined;\n      if (Array.isArray(data)) {\n        cachedProjectDetails = data;\n        return data;\n      }\n      if (response?.error) {\n        console.warn(\"Failed to load project details:\", response.error);\n      }\n    } catch (error) {\n      console.warn(\"Failed to load project details\", error);\n    } finally {\n      projectDetailsPromise = null;\n    }\n    return null;\n  })();\n\n  if (!force) {\n    projectDetailsPromise = request;\n  } else {\n    projectDetailsPromise = request;\n  }\n\n  return request;\n}\n\nfunction populateProjectSelect(\n  projectSelect: HTMLSelectElement,\n  issueTypeSelect: HTMLSelectElement,\n  categorySelect: HTMLSelectElement,\n  assigneeSelect: HTMLSelectElement,\n  details: ProjectDetailBundle[]\n): void {\n  projectSelect.innerHTML = \"\";\n  const visibleProjects = filterProjects(details);\n  const sortedProjects = visibleProjects.slice().sort((a, b) => a.name.localeCompare(b.name, \"ja\"));\n\n  if (!sortedProjects.length) {\n    const emptyOption = document.createElement(\"option\");\n    emptyOption.value = \"\";\n    emptyOption.textContent = \"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\";\n    projectSelect.append(emptyOption);\n    projectSelect.disabled = true;\n    populateIssueTypeSelect(issueTypeSelect, []);\n    populateCategorySelect(categorySelect, []);\n    populateAssigneeSelect(assigneeSelect, [], null);\n    return;\n  }\n\n  projectSelect.disabled = false;\n  sortedProjects.forEach((project) => {\n    const option = document.createElement(\"option\");\n    option.value = String(project.projectId);\n    option.textContent = `${project.name} (${project.projectKey})`;\n    projectSelect.append(option);\n  });\n\n  if (!projectSelect.value || !projectSelect.querySelector(`option[value=\"${projectSelect.value}\"]`)) {\n    projectSelect.value = String(sortedProjects[0].projectId);\n  }\n\n  populateIssueTypeSelect(issueTypeSelect, []);\n  populateCategorySelect(categorySelect, []);\n  populateAssigneeSelect(assigneeSelect, [], null);\n  issueTypeSelect.disabled = true;\n  categorySelect.disabled = true;\n}\n\nfunction populateChatGptProjectSelect(\n  select: HTMLSelectElement | null,\n  details: ProjectDetailBundle[]\n): void {\n  if (!select) {\n    return;\n  }\n  const currentValue = select.value;\n  select.innerHTML = \"\";\n  const visibleProjects = filterProjects(details);\n  const sortedProjects = visibleProjects.slice().sort((a, b) => a.name.localeCompare(b.name, \"ja\"));\n\n  if (!sortedProjects.length) {\n    const emptyOption = document.createElement(\"option\");\n    emptyOption.value = \"\";\n    emptyOption.textContent = \"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\";\n    select.append(emptyOption);\n    select.disabled = true;\n    return;\n  }\n\n  select.disabled = false;\n  sortedProjects.forEach((project) => {\n    const option = document.createElement(\"option\");\n    option.value = String(project.projectId);\n    option.textContent = `${project.name} (${project.projectKey})`;\n    select.append(option);\n  });\n\n  if (currentValue && select.querySelector(`option[value=\"${currentValue}\"]`)) {\n    select.value = currentValue;\n  } else if (!select.value && sortedProjects.length) {\n    select.value = String(sortedProjects[0].projectId);\n  }\n}\n\nfunction populateIssueTypeSelect(issueTypeSelect: HTMLSelectElement, issueTypes: Array<{ id: number; name: string }>): void {\n  issueTypeSelect.innerHTML = \"\";\n\n  if (!issueTypes.length) {\n    const emptyOption = document.createElement(\"option\");\n    emptyOption.value = \"\";\n    emptyOption.textContent = \"\u7A2E\u5225\u672A\u8A2D\u5B9A\";\n    issueTypeSelect.append(emptyOption);\n    issueTypeSelect.value = \"\";\n    issueTypeSelect.disabled = true;\n    return;\n  }\n\n  const sorted = issueTypes.slice().sort((a, b) => a.id - b.id);\n  sorted.forEach((issueType) => {\n    const option = document.createElement(\"option\");\n    option.value = String(issueType.id);\n    option.textContent = issueType.name;\n    issueTypeSelect.append(option);\n  });\n\n  issueTypeSelect.disabled = false;\n  issueTypeSelect.value = String(sorted[0]?.id ?? \"\");\n}\n\nfunction populateCategorySelect(categorySelect: HTMLSelectElement, categories: Array<{ id: number; name: string }>): void {\n  categorySelect.innerHTML = \"\";\n\n  if (!categories.length) {\n    const emptyOption = document.createElement(\"option\");\n    emptyOption.value = \"\";\n    emptyOption.textContent = \"\u30AB\u30C6\u30B4\u30EA\u30FC\u672A\u8A2D\u5B9A\";\n    categorySelect.append(emptyOption);\n    categorySelect.value = \"\";\n    categorySelect.disabled = true;\n    return;\n  }\n\n  const sorted = categories.slice().sort((a, b) => a.id - b.id);\n  sorted.forEach((category) => {\n    const option = document.createElement(\"option\");\n    option.value = String(category.id);\n    option.textContent = category.name;\n    categorySelect.append(option);\n  });\n\n  categorySelect.disabled = false;\n  categorySelect.value = String(sorted[0]?.id ?? \"\");\n}\n\nfunction populateAssigneeSelect(\n  assigneeSelect: HTMLSelectElement,\n  users: Array<{ id: number; name: string }>,\n  currentUserId: number | null\n): void {\n  assigneeSelect.innerHTML = \"\";\n\n  if (!users.length) {\n    const emptyOption = document.createElement(\"option\");\n    emptyOption.value = \"\";\n    emptyOption.textContent = \"\u62C5\u5F53\u8005\u672A\u8A2D\u5B9A\";\n    assigneeSelect.append(emptyOption);\n    assigneeSelect.value = \"\";\n    assigneeSelect.disabled = true;\n    return;\n  }\n\n  const sorted = users.slice().sort((a, b) => a.id - b.id);\n  let selectedValue: string | null = null;\n  sorted.forEach((user) => {\n    const option = document.createElement(\"option\");\n    option.value = String(user.id);\n    option.textContent = user.name;\n    if (currentUserId && user.id === currentUserId) {\n      selectedValue = option.value;\n    }\n    assigneeSelect.append(option);\n  });\n\n  assigneeSelect.disabled = false;\n  assigneeSelect.value = selectedValue ?? String(sorted[0]?.id ?? \"\");\n}\n\nfunction populateProjectMetadataForSelection(\n  projectId: number,\n  issueTypeSelect: HTMLSelectElement,\n  categorySelect: HTMLSelectElement,\n  assigneeSelect: HTMLSelectElement,\n  details?: ProjectDetailBundle[] | null\n): void {\n  const list = details ?? cachedProjectDetails ?? [];\n  if (!projectId || !list.length) {\n    populateIssueTypeSelect(issueTypeSelect, []);\n    populateCategorySelect(categorySelect, []);\n    populateAssigneeSelect(assigneeSelect, [], null);\n    return;\n  }\n  const project = list.find((item) => item.projectId === projectId);\n  if (!project) {\n    populateIssueTypeSelect(issueTypeSelect, []);\n    populateCategorySelect(categorySelect, []);\n    populateAssigneeSelect(assigneeSelect, [], null);\n    return;\n  }\n  populateIssueTypeSelect(issueTypeSelect, project.issueTypes ?? []);\n  populateCategorySelect(categorySelect, project.categories ?? []);\n  populateAssigneeSelect(assigneeSelect, project.users ?? [], project.currentUserId ?? null);\n}\n\nconst DATE_PATTERN = /^\\d{4}-\\d{2}-\\d{2}$/;\n\nfunction applyImportedJson(\n  data: Record<string, unknown>,\n  context: {\n    issueTypeSelect: HTMLSelectElement;\n    categorySelect: HTMLSelectElement;\n    titleInput: HTMLInputElement;\n    bodyTextarea: HTMLTextAreaElement;\n    startDateField: { input: HTMLInputElement };\n    dueDateField: { input: HTMLInputElement };\n  },\n  showFeedback: (type: \"error\" | \"success\", message: string) => void,\n  projectId: number\n): void {\n  const warnings: string[] = [];\n  const issueTypeName = typeof data.issueType === \"string\" ? data.issueType.trim() : \"\";\n  const categoryNames = Array.isArray(data.categoryNames)\n    ? data.categoryNames.filter((name): name is string => typeof name === \"string\" && name.trim().length > 0)\n    : [];\n  const summary = typeof data.summary === \"string\" ? data.summary.trim() : \"\";\n  const description = typeof data.description === \"string\" ? data.description.trim() : \"\";\n  const startDate = typeof data.startDate === \"string\" ? data.startDate.trim() : \"\";\n  const dueDateValue = data.dueDate;\n\n  if (summary) {\n    context.titleInput.value = summary;\n  } else {\n    warnings.push(\"summary\");\n  }\n\n  if (description) {\n    context.bodyTextarea.value = description.replace(/\\r\\n/g, \"\\n\");\n  } else {\n    warnings.push(\"description\");\n  }\n\n  if (startDate && DATE_PATTERN.test(startDate)) {\n    context.startDateField.input.value = startDate;\n  } else if (!startDate) {\n    warnings.push(\"startDate\");\n  } else {\n    warnings.push(`startDate(${startDate})`);\n  }\n\n  if (typeof dueDateValue === \"string\" && DATE_PATTERN.test(dueDateValue)) {\n    context.dueDateField.input.value = dueDateValue;\n  } else if (dueDateValue === null || dueDateValue === undefined) {\n    context.dueDateField.input.value = \"\";\n  } else if (dueDateValue !== null) {\n    warnings.push(\"dueDate\");\n  }\n\n  if (issueTypeName) {\n    if (!selectOptionByLabel(context.issueTypeSelect, issueTypeName)) {\n      warnings.push(`issueType(${issueTypeName})`);\n    }\n  }\n\n  if (categoryNames.length) {\n    const matched = categoryNames.find((name) => selectOptionByLabel(context.categorySelect, name));\n    if (!matched) {\n      warnings.push(`categoryNames(${categoryNames.join(\", \")})`);\n    }\n  }\n\n  void persistFormPreferences(projectId, {\n    issueTypeId: Number(context.issueTypeSelect.value) > 0 ? Number(context.issueTypeSelect.value) : undefined,\n    categoryId: Number(context.categorySelect.value) > 0 ? Number(context.categorySelect.value) : undefined\n  });\n\n  if (warnings.length) {\n    const info = getLlmProviderInfo();\n    showFeedback(\"success\", info.successMessage(true, warnings));\n  } else {\n    const info = getLlmProviderInfo();\n    showFeedback(\"success\", info.successMessage(false, warnings));\n  }\n}\n\nfunction syncChatGptProjectSelection(projectId: number | null): void {\n  if (!chatgptProjectSelectRef) {\n    return;\n  }\n  if (projectId && chatgptProjectSelectRef.querySelector(`option[value=\"${projectId}\"]`)) {\n    chatgptProjectSelectRef.value = String(projectId);\n  }\n}\n\nfunction selectOptionByLabel(select: HTMLSelectElement, label: string): boolean {\n  const normalized = label.trim();\n  if (!normalized) {\n    return false;\n  }\n  const option = Array.from(select.options).find((item) => item.textContent?.trim() === normalized);\n  if (option) {\n    select.value = option.value;\n    return true;\n  }\n  return false;\n}\n\nfunction applyStoredPreferenceToSelectors(\n  issueTypeSelect: HTMLSelectElement,\n  categorySelect: HTMLSelectElement,\n  preference: ProjectPreference | null\n): void {\n  if (!preference) {\n    return;\n  }\n  if (preference.issueTypeId && issueTypeSelect.querySelector(`option[value=\"${preference.issueTypeId}\"]`)) {\n    issueTypeSelect.value = String(preference.issueTypeId);\n  }\n  if (preference.categoryId && categorySelect.querySelector(`option[value=\"${preference.categoryId}\"]`)) {\n    categorySelect.value = String(preference.categoryId);\n  }\n}\n\nfunction determineChatGptProjectId(): number | null {\n  if (chatgptProjectSelectRef) {\n    const projectId = Number(chatgptProjectSelectRef.value);\n    if (Number.isFinite(projectId) && projectId > 0) {\n      return projectId;\n    }\n  }\n  if (ticketProjectSelectRef) {\n    const projectId = Number(ticketProjectSelectRef.value);\n    if (Number.isFinite(projectId) && projectId > 0) {\n      return projectId;\n    }\n  }\n  return null;\n}\n\nasync function buildProjectPromptWithClipboard(project: ProjectDetailBundle): Promise<string> {\n  const [template, clipboardText] = await Promise.all([\n    ensurePromptTemplateLoaded(),\n    navigator.clipboard.readText().catch(() => \"\")\n  ]);\n  return buildProjectPrompt(project, clipboardText, template);\n}\n\nlet lastGeneratedPrompt = \"\";\nfunction resetPromptCache(): void {\n  lastGeneratedPrompt = \"\";\n  if (chatgptCopyButtonRef) {\n    chatgptCopyButtonRef.hidden = true;\n    chatgptCopyButtonRef.textContent = \"\u30D7\u30ED\u30F3\u30D7\u30C8\u3092\u30B3\u30D4\u30FC\u3059\u308B\";\n  }\n  promptTemplateCache = null;\n}\n\nasync function buildPromptText(): Promise<string> {\n  if (!lastGeneratedPrompt) {\n    await ensureFormPreferencesLoaded();\n    const details = cachedProjectDetails ?? (await loadProjectDetails());\n    const projectId = determineChatGptProjectId();\n    const project = details?.find((item) => item.projectId === projectId) ?? null;\n    if (!project) {\n      throw new Error(\"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u304C\u9078\u629E\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002\");\n    }\n    lastGeneratedPrompt = await buildProjectPromptWithClipboard(project);\n  }\n  return lastGeneratedPrompt;\n}\n\nfunction buildProjectPrompt(project: ProjectDetailBundle, clipboardText: string, template: string): string {\n  const today = formatDateValue(new Date());\n  const issueTypeNames = project.issueTypes.map((item) => item.name.trim()).filter((name) => name.length > 0);\n  const categoryNames = project.categories.map((item) => item.name.trim()).filter((name) => name.length > 0);\n  const assigneeNames = project.users.map((item) => item.name.trim()).filter((name) => name.length > 0);\n  const fallbackIssueTypes = [\"\u30D0\u30B0\", \"\u30BF\u30B9\u30AF\", \"\u6539\u5584\u8981\u671B\", \"\u304A\u554F\u3044\u5408\u308F\u305B\", \"\u305D\u306E\u4ED6\"];\n  const issueTypeEnumValues = issueTypeNames.length ? issueTypeNames : fallbackIssueTypes;\n  const issueTypeListText = issueTypeEnumValues.join(\" / \");\n  const categoryListText = categoryNames.length ? categoryNames.join(\" / \") : \"\u306A\u3057\";\n  const assigneeContext = assigneeNames.length\n    ? assigneeNames.map((name) => `- ${name}`).join(\"\\n\")\n    : \"- \u306A\u3057\";\n\n  const normalizedClipboard = clipboardText.replace(/\\r\\n/g, \"\\n\").trim();\n  const inputText = normalizedClipboard || \"{clipboard}\";\n  const schemaText = createSchemaText(issueTypeEnumValues, categoryNames);\n\n  const replacements: Record<string, string> = {\n    TODAY: today,\n    ISSUE_TYPES: issueTypeListText,\n    CATEGORIES: categoryListText,\n    ASSIGNEES: assigneeContext,\n    INPUT_TEXT: inputText,\n    JSON_SCHEMA: schemaText\n  };\n\n  return renderPromptTemplate(template, replacements);\n}\n\nfunction createSchemaText(issueTypeEnumValues: string[], categoryNames: string[]): string {\n  const properties: Record<string, unknown> = {\n    issueType: {\n      type: [\"string\", \"null\"],\n      enum: [...issueTypeEnumValues, null]\n    },\n    categoryNames: {\n      type: \"array\",\n      items: categoryNames.length\n        ? { type: \"string\", enum: categoryNames }\n        : { type: \"string\" }\n    },\n    summary: {\n      type: \"string\",\n      minLength: 1,\n      maxLength: 20\n    },\n    description: {\n      type: \"string\",\n      minLength: 1\n    },\n    startDate: {\n      type: \"string\",\n      pattern: \"^\\\\d{4}-\\\\d{2}-\\\\d{2}$\"\n    },\n    dueDate: {\n      type: [\"string\", \"null\"],\n      pattern: \"^\\\\d{4}-\\\\d{2}-\\\\d{2}$\"\n    }\n  };\n\n  const schema = {\n    $schema: \"https://json-schema.org/draft/2020-12/schema\",\n    type: \"object\",\n    required: [\"summary\", \"description\", \"startDate\"],\n    properties,\n    additionalProperties: false\n  };\n\n  return JSON.stringify(schema, null, 2);\n}\n\nfunction renderPromptTemplate(template: string, replacements: Record<string, string>): string {\n  return template.replace(/\\{\\{(\\w+)\\}\\}/g, (match, key) => {\n    if (Object.prototype.hasOwnProperty.call(replacements, key)) {\n      return replacements[key];\n    }\n    return match;\n  });\n}\n\nchrome.storage.onChanged.addListener((changes, areaName) => {\n  if (areaName === \"local\" && changes[CHATGPT_PROMPT_TEMPLATE_KEY]) {\n    promptTemplateCache = null;\n    resetPromptCache();\n  }\n  if (areaName === \"local\" && changes[BACKLOG_AUTH_KEY]) {\n    void refreshAuthPreferences();\n  }\n});\n\nfunction createDateField(label: string): { container: HTMLDivElement; input: HTMLInputElement } {\n  const container = document.createElement(\"div\");\n  container.className = \"ticket-form__field\";\n\n  const name = document.createElement(\"span\");\n  name.textContent = label;\n\n  const input = document.createElement(\"input\");\n  input.type = \"date\";\n  input.className = \"ticket-form__input\";\n  input.value = formatDateValue(new Date());\n\n  container.append(name, input);\n  return { container, input };\n}\n\nfunction formatDateValue(date: Date): string {\n  const year = date.getFullYear();\n  const month = `${date.getMonth() + 1}`.padStart(2, \"0\");\n  const day = `${date.getDate()}`.padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n}\n\nfunction createTextField(label: string, placeholder: string): { container: HTMLDivElement; input: HTMLInputElement } {\n  const container = document.createElement(\"div\");\n  container.className = \"ticket-form__field ticket-form__field--wide\";\n\n  const name = document.createElement(\"span\");\n  name.textContent = label;\n\n  const input = document.createElement(\"input\");\n  input.type = \"text\";\n  input.className = \"ticket-form__input\";\n  input.placeholder = placeholder;\n\n  container.append(name, input);\n  return { container, input };\n}\n\nfunction createTextareaField(label: string, placeholder: string): {\n  container: HTMLDivElement;\n  textarea: HTMLTextAreaElement;\n} {\n  const container = document.createElement(\"div\");\n  container.className = \"ticket-form__field ticket-form__field--wide\";\n\n  const name = document.createElement(\"span\");\n  name.textContent = label;\n\n  const textarea = document.createElement(\"textarea\");\n  textarea.className = \"ticket-form__textarea\";\n  textarea.placeholder = placeholder;\n  textarea.rows = 5;\n\n  container.append(name, textarea);\n  return { container, textarea };\n}\n"],
  "mappings": "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",
  "names": []
}
