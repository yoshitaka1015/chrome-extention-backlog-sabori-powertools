{
  "version": 3,
  "sources": ["../../../src/shared/storage.ts", "../../../src/shared/backlogConfig.ts", "../../../src/content/topbar/index.ts"],
  "sourcesContent": ["type StorageArea = chrome.storage.LocalStorageArea;\n\nconst storage: StorageArea = chrome.storage.local;\n\nexport function storageGet<T>(keys: string[]): Promise<Record<string, T>> {\n  return new Promise((resolve, reject) => {\n    storage.get(keys, (items) => {\n      const error = chrome.runtime.lastError;\n      if (error) {\n        reject(error);\n      } else {\n        resolve(items as Record<string, T>);\n      }\n    });\n  });\n}\n\nexport function storageSet(items: Record<string, unknown>): Promise<void> {\n  return new Promise((resolve, reject) => {\n    storage.set(items, () => {\n      const error = chrome.runtime.lastError;\n      if (error) {\n        reject(error);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\nexport function storageRemove(keys: string[]): Promise<void> {\n  return new Promise((resolve, reject) => {\n    storage.remove(keys, () => {\n      const error = chrome.runtime.lastError;\n      if (error) {\n        reject(error);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n", "import { storageGet, storageSet, storageRemove } from \"./storage\";\n\nexport type LlmProvider = \"chatgpt\" | \"gemini\";\n\nexport interface BacklogAuthConfig {\n  spaceDomain: string;\n  apiKey: string;\n  host: \"backlog.com\" | \"backlog.jp\";\n  showNoDueSection?: boolean;\n  showTomorrowSection?: boolean;\n  issueFetchLimit?: number;\n  excludedProjects?: string[];\n  llmProvider?: LlmProvider;\n  autoImportDelaySeconds?: number;\n  autoCreateDelaySeconds?: number;\n}\n\nexport const BACKLOG_AUTH_KEY = \"backlogAuth\";\nexport const BACKLOG_ISSUES_REVISION_KEY = \"backlogManagerIssuesRevision\";\nexport const ISSUE_FETCH_LIMIT_MIN = 50;\nexport const ISSUE_FETCH_LIMIT_MAX = 1000;\nexport const DEFAULT_ISSUE_FETCH_LIMIT = 1000;\nexport const DEFAULT_LLM_PROVIDER: LlmProvider = \"chatgpt\";\nexport const AUTO_IMPORT_DELAY_MIN = 10;\nexport const AUTO_IMPORT_DELAY_MAX = 600;\nexport const DEFAULT_AUTO_IMPORT_DELAY_SECONDS = 60;\nexport const AUTO_CREATE_DELAY_MIN = 5;\nexport const AUTO_CREATE_DELAY_MAX = 300;\nexport const DEFAULT_AUTO_CREATE_DELAY_SECONDS = 15;\n\nexport async function getBacklogAuthConfig(): Promise<BacklogAuthConfig | null> {\n  const result = await storageGet<BacklogAuthConfig | null>([BACKLOG_AUTH_KEY]);\n  const config = result[BACKLOG_AUTH_KEY];\n  if (!config) {\n    return null;\n  }\n  if (config.showNoDueSection === undefined) {\n    config.showNoDueSection = true;\n  }\n  if (config.showTomorrowSection === undefined) {\n    config.showTomorrowSection = true;\n  }\n  config.issueFetchLimit = normalizeIssueFetchLimit(config.issueFetchLimit);\n  config.excludedProjects = normalizeExcludedProjects(config.excludedProjects);\n  config.llmProvider = normalizeLlmProvider(config.llmProvider);\n  config.autoImportDelaySeconds = normalizeAutoDelay(\n    config.autoImportDelaySeconds,\n    AUTO_IMPORT_DELAY_MIN,\n    AUTO_IMPORT_DELAY_MAX,\n    DEFAULT_AUTO_IMPORT_DELAY_SECONDS\n  );\n  config.autoCreateDelaySeconds = normalizeAutoDelay(\n    config.autoCreateDelaySeconds,\n    AUTO_CREATE_DELAY_MIN,\n    AUTO_CREATE_DELAY_MAX,\n    DEFAULT_AUTO_CREATE_DELAY_SECONDS\n  );\n  return config;\n}\n\nexport async function saveBacklogAuthConfig(config: BacklogAuthConfig): Promise<void> {\n  await storageSet({ [BACKLOG_AUTH_KEY]: config });\n}\n\nexport async function clearBacklogAuthConfig(): Promise<void> {\n  await storageRemove([BACKLOG_AUTH_KEY]);\n}\n\nexport function backlogBaseUrl(config: BacklogAuthConfig): string {\n  return `https://${config.spaceDomain}.${config.host}`;\n}\n\nexport function backlogApiOrigin(config: BacklogAuthConfig): string {\n  return `${backlogBaseUrl(config)}/`;\n}\n\nexport function normalizeIssueFetchLimit(value?: number): number {\n  if (!Number.isFinite(value ?? NaN)) {\n    return DEFAULT_ISSUE_FETCH_LIMIT;\n  }\n  const numericValue = Number(value);\n  return Math.min(ISSUE_FETCH_LIMIT_MAX, Math.max(ISSUE_FETCH_LIMIT_MIN, Math.floor(numericValue)));\n}\n\nexport function normalizeExcludedProjects(raw?: string[] | null): string[] {\n  if (!Array.isArray(raw)) {\n    return [];\n  }\n  const seen = new Set<string>();\n  raw.forEach((item) => {\n    if (typeof item !== \"string\") {\n      return;\n    }\n    const trimmed = item.trim();\n    if (!trimmed) {\n      return;\n    }\n    seen.add(trimmed);\n  });\n  return Array.from(seen);\n}\n\nexport function normalizeLlmProvider(value?: string | null): LlmProvider {\n  if (value === \"gemini\") {\n    return \"gemini\";\n  }\n  return DEFAULT_LLM_PROVIDER;\n}\n\nexport function normalizeAutoDelay(\n  value: unknown,\n  min: number,\n  max: number,\n  fallback: number\n): number {\n  const numeric = Number(value);\n  if (!Number.isFinite(numeric)) {\n    return fallback;\n  }\n  const clamped = Math.floor(Math.max(min, Math.min(max, numeric)));\n  return clamped;\n}\n", "import { BACKLOG_AUTH_KEY, BACKLOG_ISSUES_REVISION_KEY, getBacklogAuthConfig } from \"@shared/backlogConfig\";\nimport type { BacklogAuthConfig } from \"@shared/backlogConfig\";\nimport type { BacklogIssueBuckets, BacklogIssueLite, BacklogStatusLite } from \"@shared/backlogTypes\";\nimport { storageGet, storageSet, storageRemove } from \"@shared/storage\";\n\ntype TopBarTask = BacklogIssueLite;\n\nconst SHADOW_HOST_ID = \"backlog-manager-topbar-host\";\nconst SPACER_ID = \"backlog-manager-topbar-spacer\";\nconst DATA_ORIGINAL_PADDING = \"backlogManagerOriginalPaddingTop\";\nconst DATA_ORIGINAL_SCROLL_PADDING = \"backlogManagerOriginalScrollPaddingTop\";\nconst DATA_OBSERVER_ACTIVE = \"backlogManagerObserverActive\";\nconst DATA_ORIGINAL_TOP = \"backlogManagerOriginalTopPx\";\nconst DATA_ORIGINAL_BODY_HEIGHT = \"backlogManagerOriginalBodyHeight\";\nconst DATA_ORIGINAL_ROOT_HEIGHT = \"backlogManagerOriginalRootHeight\";\nconst DATA_ORIGINAL_BODY_MIN_HEIGHT = \"backlogManagerOriginalBodyMinHeight\";\nconst DATA_ORIGINAL_ROOT_MIN_HEIGHT = \"backlogManagerOriginalRootMinHeight\";\nconst DATA_HEIGHT_COMPENSATED = \"backlogManagerHeightCompensated\";\nconst VIEWPORT_SHIM_EVENT = \"backlogManagerViewportShim\";\nconst STORAGE_MINIMIZED_KEY = \"backlogManagerTopbarMinimized\";\nconst STORAGE_FOCUSED_TASK_KEY = \"backlogManagerFocusedTaskId\";\n\nlet layoutCheckScheduled = false;\nconst MAX_SCAN_ELEMENTS = 1200;\nconst HEIGHT_OVERSIZE_TOLERANCE_PX = 4;\nconst SECTION_LABEL_MARGIN_TOP = 1;\nconst SECTION_LABEL_MARGIN_BOTTOM = 1;\nconst BADGE_ROW_MARGIN_TOP = 0;\nconst BADGE_ROW_MARGIN_BOTTOM = 2;\nconst BAR_ACCENT_HEIGHT_PX = 5;\nconst LABEL_FONT_SIZE_PX = 11;\nconst LABEL_LINE_HEIGHT = 1.4;\nconst BADGE_HEIGHT_PX = 20;\nconst BADGE_BORDER_RADIUS_PX = 10;\nconst BADGE_FONT_SIZE_PX = 10;\nconst FOCUSED_BADGE_HEIGHT_PX = 24;\nconst FOCUSED_BADGE_RADIUS_PX = 12;\nconst FOCUSED_BADGE_FONT_SIZE_PX = BADGE_FONT_SIZE_PX + Math.round((2 * 96) / 72);\nconst ESTIMATED_BAR_HEIGHT = Math.round(\n  SECTION_LABEL_MARGIN_TOP +\n    LABEL_FONT_SIZE_PX * LABEL_LINE_HEIGHT +\n    SECTION_LABEL_MARGIN_BOTTOM +\n    BADGE_ROW_MARGIN_TOP +\n    BADGE_HEIGHT_PX +\n    BADGE_ROW_MARGIN_BOTTOM +\n    BAR_ACCENT_HEIGHT_PX\n);\nconst MINIMIZED_HEIGHT = 12;\nlet expandedBarHeight = ESTIMATED_BAR_HEIGHT;\nlet currentBarHeight = ESTIMATED_BAR_HEIGHT;\nlet isMinimized = false;\nconst STATUS_COLOR_MAP: Record<string, string> = {\n  \u672A\u5BFE\u5FDC: \"#ed8077\",\n  \u51E6\u7406\u4E2D: \"#4487c5\",\n  \u51E6\u7406\u6E08\u307F: \"#5eb5a6\",\n  \u5B8C\u4E86: \"#a1b030\"\n};\nconst DEFAULT_STATUS_COLOR = \"#dc9926\";\nconst FOCUS_DIM_BACKGROUND = \"#d4d4d8\";\nconst FOCUS_DIM_TEXT_COLOR = \"#475569\";\nconst CAKE_EMOJI = \"\uD83C\uDF82\";\nconst CONFETTI_COLORS = [\"#f97316\", \"#22d3ee\", \"#facc15\", \"#a855f7\", \"#38bdf8\", \"#fb7185\"] as const;\nconst CRACKER_CONFETTI_COLORS = [\"#facc15\", \"#f97316\", \"#38bdf8\", \"#fb7185\"] as const;\nconst STORAGE_LEVEL_KEY = \"backlogManagerLevel\";\ntype SectionKey = \"past\" | \"today\" | \"week\" | \"noDue\";\nconst SECTION_SEQUENCE: SectionKey[] = [\"past\", \"today\", \"week\", \"noDue\"];\n\ntype InteractionContext = {\n  tooltip: HTMLDivElement;\n  statusMenu: HTMLDivElement;\n  taskRegistry: WeakMap<HTMLElement, TopBarTask>;\n  shadowRoot: ShadowRoot;\n  sections: Record<SectionKey, HTMLDivElement>;\n  sectionContainers: Record<SectionKey, HTMLElement>;\n  sectionsContainer: HTMLDivElement;\n  statuses: Map<number, BacklogStatusLite[]>;\n  bar: HTMLDivElement;\n  preferences: {\n    showTomorrowSection: boolean;\n    showNoDueSection: boolean;\n  };\n  celebration: CelebrationElements;\n  levelBadge: HTMLDivElement;\n};\n\ntype CelebrationElements = {\n  overlay: HTMLDivElement;\n  card: HTMLDivElement;\n  title: HTMLHeadingElement;\n  message: HTMLParagraphElement;\n  close: HTMLButtonElement;\n  confettiLayer: HTMLDivElement;\n  sparklesLayer: HTMLDivElement;\n  confettiPieces: HTMLSpanElement[];\n  sparkles: HTMLSpanElement[];\n  crackerLeft: HTMLDivElement;\n  crackerRight: HTMLDivElement;\n  crackerPiecesLeft: HTMLSpanElement[];\n  crackerPiecesRight: HTMLSpanElement[];\n};\n\nlet tooltipHideTimer: number | undefined;\nlet tooltipShowTimer: number | undefined;\nlet menuHideTimer: number | undefined;\nlet menuCurrentBadge: HTMLButtonElement | null = null;\nlet menuCurrentTask: TopBarTask | null = null;\nlet documentClickHandlerAttached = false;\nlet activeStatusMenuRef: HTMLDivElement | null = null;\nlet latestIssueBuckets: BacklogIssueBuckets | null = null;\nlet issuesRefreshTimer: number | undefined;\nconst ISSUES_REFRESH_INTERVAL_MS = 10 * 60 * 1000;\nlet minimizedIndicator: HTMLDivElement | null = null;\nlet minimizedIndicatorContext: InteractionContext | null = null;\nlet pendingBarMeasurementFrame = 0;\nlet focusedTaskId: number | null = null;\nlet celebrationHideTimer: number | undefined;\nlet celebrationArmed = false;\nlet currentLevel = 1;\n\nfunction isSheetsPage(): boolean {\n  return location.hostname === \"docs.google.com\" && location.pathname.startsWith(\"/spreadsheets\");\n}\n\nfunction getIndicatorHeight(): number {\n  if (!minimizedIndicator || minimizedIndicator.style.display === \"none\") {\n    return 0;\n  }\n  const height = minimizedIndicator.offsetHeight;\n  return Number.isFinite(height) ? height : 0;\n}\n\nasync function loadMinimizedState(): Promise<boolean> {\n  try {\n    const result = await storageGet<boolean>([STORAGE_MINIMIZED_KEY]);\n    return Boolean(result[STORAGE_MINIMIZED_KEY]);\n  } catch (error) {\n    console.warn(\"Failed to load minimized state:\", error);\n    return false;\n  }\n}\n\nasync function saveMinimizedState(minimized: boolean): Promise<void> {\n  try {\n    await storageSet({ [STORAGE_MINIMIZED_KEY]: minimized });\n  } catch (error) {\n    console.warn(\"Failed to persist minimized state:\", error);\n  }\n}\n\nasync function sendMessageWithRetry<T = unknown>(payload: unknown, retries = 1, backoffMs = 300): Promise<T> {\n  let attempt = 0;\n  for (;;) {\n    try {\n      return (await chrome.runtime.sendMessage(payload)) as T;\n    } catch (error) {\n      const message = error instanceof Error ? error.message : String(error);\n      const canRetry = message.includes(\"Extension context invalidated\") && attempt < retries;\n      if (!canRetry) {\n        throw error instanceof Error ? error : new Error(message);\n      }\n      attempt += 1;\n      await new Promise((resolve) => window.setTimeout(resolve, backoffMs));\n    }\n  }\n}\n\nasync function loadStoredLevel(): Promise<number> {\n  try {\n    const result = await storageGet<number | null>([STORAGE_LEVEL_KEY]);\n    const stored = result[STORAGE_LEVEL_KEY];\n    if (typeof stored === \"number\" && Number.isFinite(stored) && stored >= 1) {\n      return Math.floor(stored);\n    }\n  } catch (error) {\n    console.warn(\"Failed to load stored level:\", error);\n  }\n  return 1;\n}\n\nasync function saveCurrentLevel(level: number): Promise<void> {\n  try {\n    await storageSet({ [STORAGE_LEVEL_KEY]: level });\n  } catch (error) {\n    console.warn(\"Failed to persist level:\", error);\n  }\n}\n\nfunction parseFocusedTaskId(value: unknown): number | null {\n  const parsed = typeof value === \"number\" ? value : Number(value);\n  if (Number.isFinite(parsed) && parsed > 0) {\n    return parsed;\n  }\n  return null;\n}\n\nasync function loadFocusedTaskId(): Promise<number | null> {\n  try {\n    const result = await storageGet<number | null>([STORAGE_FOCUSED_TASK_KEY]);\n    return parseFocusedTaskId(result[STORAGE_FOCUSED_TASK_KEY] ?? null);\n  } catch (error) {\n    console.warn(\"Failed to load focused task id:\", error);\n    return null;\n  }\n}\n\nfunction persistFocusedTaskId(taskId: number | null): void {\n  if (taskId && Number.isFinite(taskId) && taskId > 0) {\n    void storageSet({ [STORAGE_FOCUSED_TASK_KEY]: taskId });\n  } else {\n    void storageRemove([STORAGE_FOCUSED_TASK_KEY]);\n  }\n}\n\nfunction setFocusedTask(\n  context: InteractionContext | null,\n  taskId: number | null,\n  options: { persist?: boolean } = {}\n): void {\n  const shouldPersist = options.persist ?? true;\n  const nextId = taskId && Number.isFinite(taskId) && taskId > 0 ? taskId : null;\n  const changed = focusedTaskId !== nextId;\n  focusedTaskId = nextId;\n  if (shouldPersist && changed) {\n    persistFocusedTaskId(nextId);\n  }\n  if (context) {\n    applyFocusModeAppearance(context);\n    scheduleBarMeasurement(context);\n  }\n}\n\nfunction ensureShadowHost(): ShadowRoot | null {\n  let host = document.getElementById(SHADOW_HOST_ID);\n\n  if (!host) {\n    host = document.createElement(\"div\");\n    host.id = SHADOW_HOST_ID;\n    host.style.position = \"fixed\";\n    host.style.top = \"0\";\n    host.style.left = \"0\";\n    host.style.right = \"0\";\n    host.style.zIndex = \"2147483647\";\n    host.style.pointerEvents = \"auto\";\n    const shadowRoot = host.attachShadow({ mode: \"open\" });\n    document.documentElement.appendChild(host);\n    host.style.height = `${currentBarHeight}px`;\n    host.style.display = isMinimized ? \"none\" : \"block\";\n    return shadowRoot;\n  }\n\n  if (!host.shadowRoot) {\n    try {\n      const shadowRoot = host.attachShadow({ mode: \"open\" });\n      host.style.height = `${currentBarHeight}px`;\n      host.style.display = isMinimized ? \"none\" : \"block\";\n      host.style.position = \"fixed\";\n      host.style.top = \"0\";\n      host.style.left = \"0\";\n      host.style.right = \"0\";\n      host.style.zIndex = \"2147483647\";\n      host.style.pointerEvents = \"auto\";\n      return shadowRoot;\n    } catch (error) {\n      console.warn(\"Failed to attach shadow to existing host\", error);\n      return null;\n    }\n  }\n\n  host.style.height = `${currentBarHeight}px`;\n  host.style.display = isMinimized ? \"none\" : \"block\";\n  host.style.position = \"fixed\";\n  host.style.top = \"0\";\n  host.style.left = \"0\";\n  host.style.right = \"0\";\n  host.style.zIndex = \"2147483647\";\n  host.style.pointerEvents = \"auto\";\n  return host.shadowRoot;\n}\n\nfunction ensurePageSpacing() {\n  applyPaddingTop();\n  ensureSpacer();\n  observeBodyMutations();\n  scheduleLayoutCheck();\n}\n\nfunction applyPaddingTop() {\n  const body = document.body;\n  const root = document.documentElement;\n  const indicatorHeight = getIndicatorHeight();\n\n  const bodyComputed = window.getComputedStyle(body);\n  const rootComputed = window.getComputedStyle(root);\n\n  const baseBodyPadding = ensureBasePadding(body, DATA_ORIGINAL_PADDING, bodyComputed.paddingTop);\n  const baseScrollPadding = ensureBasePadding(root, DATA_ORIGINAL_SCROLL_PADDING, rootComputed.scrollPaddingTop);\n\n  const effectiveHeight = isMinimized ? indicatorHeight : currentBarHeight;\n  if (isSheetsPage()) {\n    body.style.paddingTop = `${baseBodyPadding}px`;\n    root.style.scrollPaddingTop = `${baseScrollPadding}px`;\n    applyViewportShim(0);\n    restoreViewportHeight(body, root);\n    return;\n  }\n\n  body.style.paddingTop = `${baseBodyPadding + effectiveHeight}px`;\n  root.style.scrollPaddingTop = `${baseScrollPadding + effectiveHeight}px`;\n\n  applyViewportHeightCompensation(effectiveHeight, isMinimized, body, root, bodyComputed, rootComputed);\n  applyViewportShim(effectiveHeight);\n}\n\nfunction ensureBasePadding(element: HTMLElement, key: string, computedValue: string): number {\n  if (!element.dataset[key]) {\n    element.dataset[key] = parseCssLength(computedValue).toString();\n  }\n  const parsed = Number(element.dataset[key] ?? \"0\");\n  return Number.isNaN(parsed) ? 0 : parsed;\n}\n\nfunction parseCssLength(value: string): number {\n  if (!value) {\n    return 0;\n  }\n  const parsed = parseFloat(value);\n  return Number.isNaN(parsed) ? 0 : parsed;\n}\n\nfunction isOverflowHidden(value: string): boolean {\n  return value === \"hidden\" || value === \"clip\";\n}\n\nfunction applyViewportHeightCompensation(\n  effectiveHeight: number,\n  minimized: boolean,\n  body: HTMLElement,\n  root: HTMLElement,\n  bodyComputed: CSSStyleDeclaration,\n  rootComputed: CSSStyleDeclaration\n): void {\n  if (minimized) {\n    restoreViewportHeight(body, root);\n    return;\n  }\n\n  if (effectiveHeight <= 0) {\n    restoreViewportHeight(body, root);\n    return;\n  }\n\n  const rootOverflowHidden = isOverflowHidden(rootComputed.overflowY) || isOverflowHidden(rootComputed.overflow);\n  const bodyOverflowHidden = isOverflowHidden(bodyComputed.overflowY) || isOverflowHidden(bodyComputed.overflow);\n  if (!rootOverflowHidden && !bodyOverflowHidden) {\n    restoreViewportHeight(body, root);\n    return;\n  }\n\n  rememberOriginalHeight(body, DATA_ORIGINAL_BODY_HEIGHT, DATA_ORIGINAL_BODY_MIN_HEIGHT);\n  rememberOriginalHeight(root, DATA_ORIGINAL_ROOT_HEIGHT, DATA_ORIGINAL_ROOT_MIN_HEIGHT);\n\n  const heightValue = `calc(100vh - ${effectiveHeight}px)`;\n  setHeightWithPriority(body, \"height\", heightValue);\n  setHeightWithPriority(body, \"minHeight\", heightValue);\n  setHeightWithPriority(root, \"height\", heightValue);\n  setHeightWithPriority(root, \"minHeight\", heightValue);\n  body.dataset[DATA_HEIGHT_COMPENSATED] = \"true\";\n  root.dataset[DATA_HEIGHT_COMPENSATED] = \"true\";\n}\n\nfunction rememberOriginalHeight(element: HTMLElement, heightKey: string, minHeightKey: string): void {\n  if (!element.dataset[DATA_HEIGHT_COMPENSATED]) {\n    element.dataset[heightKey] = element.style.height || \"\";\n    element.dataset[minHeightKey] = element.style.minHeight || \"\";\n  }\n}\n\nfunction restoreViewportHeight(body: HTMLElement, root: HTMLElement): void {\n  if (body.dataset[DATA_HEIGHT_COMPENSATED]) {\n    restoreHeightWithPriority(body, \"height\", body.dataset[DATA_ORIGINAL_BODY_HEIGHT]);\n    restoreHeightWithPriority(body, \"minHeight\", body.dataset[DATA_ORIGINAL_BODY_MIN_HEIGHT]);\n    delete body.dataset[DATA_HEIGHT_COMPENSATED];\n    delete body.dataset[DATA_ORIGINAL_BODY_HEIGHT];\n    delete body.dataset[DATA_ORIGINAL_BODY_MIN_HEIGHT];\n  }\n  if (root.dataset[DATA_HEIGHT_COMPENSATED]) {\n    restoreHeightWithPriority(root, \"height\", root.dataset[DATA_ORIGINAL_ROOT_HEIGHT]);\n    restoreHeightWithPriority(root, \"minHeight\", root.dataset[DATA_ORIGINAL_ROOT_MIN_HEIGHT]);\n    delete root.dataset[DATA_HEIGHT_COMPENSATED];\n    delete root.dataset[DATA_ORIGINAL_ROOT_HEIGHT];\n    delete root.dataset[DATA_ORIGINAL_ROOT_MIN_HEIGHT];\n  }\n}\n\nfunction setHeightWithPriority(element: HTMLElement, property: \"height\" | \"minHeight\", value: string): void {\n  element.style.setProperty(property, value, \"important\");\n}\n\nfunction restoreHeightWithPriority(\n  element: HTMLElement,\n  property: \"height\" | \"minHeight\",\n  stored: string | undefined\n): void {\n  if (!stored) {\n    element.style.removeProperty(property);\n  } else {\n    element.style.setProperty(property, stored);\n  }\n}\n\nfunction applyViewportShim(effectiveHeight: number): void {\n  if (effectiveHeight < 0) {\n    effectiveHeight = 0;\n  }\n  dispatchViewportShimEvent(effectiveHeight);\n}\n\nfunction dispatchViewportShimEvent(offset: number): void {\n  try {\n    const event = new CustomEvent(VIEWPORT_SHIM_EVENT, { detail: { offset } });\n    window.dispatchEvent(event);\n  } catch (error) {\n    console.warn(\"Failed to dispatch viewport shim event\", error);\n  }\n}\n\nfunction getTodayTaskCount(context: InteractionContext): number {\n  const section = context.sections.today;\n  if (!section) {\n    return latestIssueBuckets?.today?.length ?? 0;\n  }\n  const badges = section.querySelectorAll<HTMLButtonElement>(\".badge\");\n  let count = 0;\n  badges.forEach((badge) => {\n    const task = context.taskRegistry.get(badge);\n    if (task && isTaskDueToday(task)) {\n      count += 1;\n    }\n  });\n  if (count > 0) {\n    return count;\n  }\n  return latestIssueBuckets?.today?.length ?? 0;\n}\n\nfunction toLocalDateKey(date: Date): string {\n  const normalized = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0, 0);\n  const tzAdjusted = new Date(normalized.getTime() - normalized.getTimezoneOffset() * 60000);\n  return tzAdjusted.toISOString().split(\"T\")[0];\n}\n\nfunction getTodayDateKey(): string {\n  return toLocalDateKey(new Date());\n}\n\nfunction isTaskDueToday(task: TopBarTask): boolean {\n  if (!task.dueDate) {\n    return false;\n  }\n  return task.dueDate === getTodayDateKey();\n}\n\nfunction isCompletionStatusName(name: string): boolean {\n  if (!name) {\n    return false;\n  }\n  const normalized = name.trim();\n  if (!normalized) {\n    return false;\n  }\n  return [\"\u5B8C\u4E86\", \"\u7D42\u4E86\", \"\u30AF\u30ED\u30FC\u30BA\", \"\u51E6\u7406\u6E08\"].some((keyword) => normalized.includes(keyword));\n}\n\nfunction ensureSpacer() {\n  let spacer = document.getElementById(SPACER_ID);\n  if (!spacer) {\n    spacer = document.createElement(\"div\");\n    spacer.id = SPACER_ID;\n    spacer.style.width = \"100%\";\n    spacer.style.pointerEvents = \"none\";\n    spacer.style.background = \"transparent\";\n    spacer.setAttribute(\"aria-hidden\", \"true\");\n\n    if (document.body.firstChild) {\n      document.body.insertBefore(spacer, document.body.firstChild);\n    } else {\n      document.body.appendChild(spacer);\n    }\n  }\n  spacer.style.height = \"0px\";\n}\n\nfunction observeBodyMutations() {\n  const body = document.body;\n  if (!body) {\n    return;\n  }\n  if (body.dataset[DATA_OBSERVER_ACTIVE]) {\n    return;\n  }\n  body.dataset[DATA_OBSERVER_ACTIVE] = \"true\";\n\n  const observer = new MutationObserver(() => {\n    ensureSpacer();\n    ensurePaddingConsistency();\n    scheduleLayoutCheck();\n  });\n\n  observer.observe(body, {\n    childList: true,\n    attributes: true,\n    attributeFilter: [\"style\"],\n    subtree: true\n  });\n\n  window.addEventListener(\"beforeunload\", () => {\n    observer.disconnect();\n  });\n}\n\nfunction ensurePaddingConsistency() {\n  const body = document.body;\n  if (!body) {\n    return;\n  }\n  applyPaddingTop();\n}\n\nfunction scheduleLayoutCheck() {\n  if (layoutCheckScheduled) {\n    return;\n  }\n  layoutCheckScheduled = true;\n  window.requestAnimationFrame(() => {\n    layoutCheckScheduled = false;\n    adjustFixedAndStickyHeaders();\n  });\n}\n\nfunction adjustFixedAndStickyHeaders() {\n  if (isSheetsPage()) {\n    return;\n  }\n  const body = document.body;\n  if (!body) {\n    return;\n  }\n\n  const elements = body.getElementsByTagName(\"*\");\n  const viewportWidth = window.innerWidth;\n\n  const max = Math.min(elements.length, MAX_SCAN_ELEMENTS);\n  for (let index = 0; index < max; index += 1) {\n    const el = elements.item(index);\n    if (!(el instanceof HTMLElement)) {\n      continue;\n    }\n    if (!el.isConnected || el.id === SHADOW_HOST_ID || el.id === SPACER_ID) {\n      continue;\n    }\n\n    const rect = el.getBoundingClientRect();\n    if (rect.bottom <= 0) {\n      continue;\n    }\n    const referenceHeight = isMinimized ? getIndicatorHeight() : currentBarHeight;\n    if (rect.top > referenceHeight * 2 + 80 && !el.dataset[DATA_ORIGINAL_TOP]) {\n      continue;\n    }\n\n    const style = window.getComputedStyle(el);\n    if (style.display === \"none\" || style.visibility === \"hidden\") {\n      continue;\n    }\n    if (style.position !== \"fixed\" && style.position !== \"sticky\") {\n      continue;\n    }\n\n    const topValue = parseCssLength(style.top);\n    if (Number.isNaN(topValue)) {\n      continue;\n    }\n    if (!el.dataset[DATA_ORIGINAL_TOP] && !isMinimized && topValue > referenceHeight * 2 + 20) {\n      continue;\n    }\n\n    if (rect.width < viewportWidth * 0.5 || rect.height < 32) {\n      continue;\n    }\n\n    applyTopOffset(el, topValue);\n  }\n}\n\nfunction applyTopOffset(element: HTMLElement, computedTop: number) {\n  if (!element.dataset[DATA_ORIGINAL_TOP]) {\n    element.dataset[DATA_ORIGINAL_TOP] = computedTop.toString();\n  }\n\n  const baseline = Number(element.dataset[DATA_ORIGINAL_TOP]) || 0;\n  const desiredTop = baseline + (isMinimized ? getIndicatorHeight() : currentBarHeight);\n\n  if (Math.abs(computedTop - desiredTop) > 0.5) {\n    element.style.setProperty(\"top\", `${desiredTop}px`, \"important\");\n  }\n}\n\nfunction renderTopBar(\n  shadowRoot: ShadowRoot,\n  preferences: { showTomorrowSection: boolean; showNoDueSection: boolean }\n): InteractionContext {\n  shadowRoot.innerHTML = \"\";\n\n  const style = document.createElement(\"style\");\n  style.textContent = `\n    :host {\n      all: initial;\n    }\n\n    * {\n      box-sizing: border-box;\n    }\n\n    .bar {\n      font-family: \"Inter\", \"Hiragino Sans\", \"Yu Gothic\", system-ui, sans-serif;\n      font-size: 13px;\n      line-height: 1.4;\n      background: #333333;\n      color: #f8fafc;\n      padding: 0 18px ${BAR_ACCENT_HEIGHT_PX}px;\n      display: flex;\n      gap: 16px;\n      pointer-events: auto;\n      align-items: center;\n      position: relative;\n      transition: padding 0.2s ease, background 0.2s ease, box-shadow 0.2s ease, height 0.2s ease;\n      box-shadow: inset 0 -5px 0 0 #2c9a7a;\n      width: 100%;\n    }\n\n    .bar[data-minimized=\"true\"] {\n      height: ${MINIMIZED_HEIGHT}px;\n      padding: 0;\n      background: #2c9a7a;\n      box-shadow: none;\n      gap: 0;\n      cursor: pointer;\n    }\n\n    .bar[data-minimized=\"true\"] .sections-container,\n    .bar[data-minimized=\"true\"] .actions {\n      display: none;\n    }\n\n    .sections-container {\n      display: flex;\n      flex: 1 1 auto;\n      gap: 24px;\n      align-items: flex-start;\n      min-width: 0;\n      overflow-x: auto;\n      padding-right: 4px;\n      scrollbar-width: none;\n    }\n\n    .sections-container::-webkit-scrollbar {\n      display: none;\n    }\n\n    .section {\n      display: flex;\n      flex-direction: column;\n      flex: 0 0 auto;\n      min-width: max-content;\n    }\n\n    .section__label {\n      font-size: 10px;\n      text-transform: uppercase;\n      letter-spacing: 0.12em;\n      color: #cbd5f5;\n      margin: ${SECTION_LABEL_MARGIN_TOP}px 0 ${SECTION_LABEL_MARGIN_BOTTOM}px;\n    }\n\n    .badge-row {\n      display: flex;\n      gap: 8px;\n      overflow-x: auto;\n      margin: ${BADGE_ROW_MARGIN_TOP}px 0 ${BADGE_ROW_MARGIN_BOTTOM}px;\n      scrollbar-width: none;\n    }\n\n    .badge-row::-webkit-scrollbar {\n      display: none;\n    }\n\n    .badge {\n      display: inline-flex;\n      align-items: center;\n      justify-content: flex-start;\n      border-radius: ${BADGE_BORDER_RADIUS_PX}px;\n      border: none;\n      padding: 0 10px;\n      height: ${BADGE_HEIGHT_PX}px;\n      min-width: 72px;\n      background: ${DEFAULT_STATUS_COLOR};\n      color: #ffffff;\n      font-weight: 600;\n      font-size: ${BADGE_FONT_SIZE_PX}px;\n      letter-spacing: 0.02em;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      cursor: pointer;\n      transition: transform 0.15s ease, filter 0.2s ease, height 0.2s ease, font-size 0.2s ease, padding 0.2s ease, border-radius 0.2s ease;\n      box-shadow: none;\n    }\n\n    .badge--focused {\n      height: ${FOCUSED_BADGE_HEIGHT_PX}px;\n      border-radius: ${FOCUSED_BADGE_RADIUS_PX}px;\n      font-size: ${FOCUSED_BADGE_FONT_SIZE_PX}px;\n      padding: 0 12px;\n    }\n\n    .badge:hover {\n      filter: brightness(1.05);\n      transform: translateY(-1px);\n    }\n\n    .badge[data-status=\"\u672A\u5BFE\u5FDC\"] {\n      background: ${STATUS_COLOR_MAP[\"\u672A\u5BFE\u5FDC\"]};\n    }\n\n    .badge[data-status=\"\u51E6\u7406\u4E2D\"] {\n      background: ${STATUS_COLOR_MAP[\"\u51E6\u7406\u4E2D\"]};\n    }\n\n    .badge[data-status=\"\u51E6\u7406\u6E08\u307F\"] {\n      background: ${STATUS_COLOR_MAP[\"\u51E6\u7406\u6E08\u307F\"]};\n    }\n\n    .badge:focus-visible {\n      outline: 2px solid #2563eb;\n      outline-offset: 2px;\n    }\n\n    .tooltip {\n      position: fixed;\n      z-index: 10;\n      min-width: 220px;\n      max-width: 320px;\n      background: #1f2933;\n      color: #f8fafc;\n      border-radius: 12px;\n      padding: 12px 14px 18px;\n      box-shadow: 0 12px 32px rgba(15, 23, 42, 0.4);\n      font-size: 12px;\n      line-height: 1.5;\n      display: none;\n    }\n\n    .tooltip::after {\n      content: \"\";\n      position: absolute;\n      top: -8px;\n      left: var(--tooltip-arrow-left, 32px);\n      width: 14px;\n      height: 14px;\n      background: #1f2933;\n      transform: rotate(45deg);\n      box-shadow: -2px -2px 4px rgba(15, 23, 42, 0.25);\n    }\n\n    .tooltip__title {\n      font-size: 13px;\n      font-weight: 600;\n      margin: 0 0 6px;\n      color: #e2e8f0;\n    }\n\n    .tooltip__meta {\n      display: flex;\n      gap: 8px;\n      flex-wrap: wrap;\n      margin-bottom: 8px;\n      font-size: 11px;\n      letter-spacing: 0.05em;\n      text-transform: uppercase;\n      color: #94a3b8;\n    }\n\n    .tooltip__body {\n      margin: 0;\n      white-space: pre-wrap;\n      word-break: break-word;\n      color: #f8fafc;\n    }\n\n    .status-menu {\n      position: fixed;\n      z-index: 11;\n      background: #ffffff;\n      color: #111827;\n      border-radius: 12px;\n      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.16);\n      padding: 8px;\n      min-width: 180px;\n      display: none;\n      font-size: 13px;\n    }\n\n    .status-menu__item {\n      border: none;\n      background: transparent;\n      width: 100%;\n      text-align: left;\n      padding: 8px 10px;\n      border-radius: 8px;\n      cursor: pointer;\n      font: inherit;\n      color: inherit;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .status-menu__item:hover {\n      background: rgba(148, 163, 184, 0.16);\n    }\n\n    .status-menu__swatch {\n      width: 12px;\n      height: 12px;\n      border-radius: 999px;\n      border: 1px solid rgba(15, 23, 42, 0.1);\n      margin-left: 12px;\n    }\n\n    .status-menu__item.is-active {\n      background: #edf5f1;\n      color: #2c997a;\n      font-weight: 600;\n    }\n\n    .status-menu__action {\n      font-weight: 600;\n      color: #2c997a;\n      justify-content: center;\n    }\n\n    .status-menu__action:hover {\n      background: rgba(44, 153, 122, 0.18);\n      color: #2c997a;\n    }\n\n    .actions {\n      display: flex;\n      align-items: center;\n      justify-content: flex-end;\n      gap: 4px;\n      margin-left: auto;\n      padding: 0;\n      margin: 0;\n      min-height: 26px;\n      align-self: center;\n    }\n\n    .actions__status {\n      display: inline-flex;\n      align-items: center;\n      height: 26px;\n      font-size: 11px;\n      color: #e2e8f0;\n      margin-right: 8px;\n      letter-spacing: 0.04em;\n    }\n\n    .actions__level {\n      margin-left: 6px;\n      margin-right: 0;\n      color: #34d399;\n      font-size: 11px;\n      font-weight: 700;\n      letter-spacing: 0.05em;\n      display: inline-flex;\n      flex-direction: column;\n      align-items: flex-end;\n      text-align: right;\n      line-height: 1.3;\n    }\n\n    .actions__level-top {\n      margin-top: 0;\n      padding-top: 0;\n      margin-bottom: 2px;\n    }\n\n    .actions__level-bottom {\n      margin-top: 2px;\n      margin-bottom: 0;\n      padding-bottom: 0;\n    }\n\n    .actions__icon {\n      border: 1px solid #e2e8f0;\n      background: transparent;\n      color: #e2e8f0;\n      width: 26px;\n      height: 26px;\n      border-radius: 50%;\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease, border-color 0.2s ease;\n      font-size: 14px;\n      line-height: 1;\n    }\n\n    .actions__icon:hover {\n      background: rgba(226, 232, 240, 0.18);\n      color: #ffffff;\n      border-color: #a3e635;\n    }\n\n    .actions__icon:focus-visible {\n      outline: 2px solid #2563eb;\n      outline-offset: 2px;\n    }\n\n    .actions__icon[data-loading=\"true\"] {\n      cursor: progress;\n      opacity: 0.65;\n      pointer-events: none;\n    }\n\n    .actions__icon--refresh,\n    .actions__icon--minimize {\n      font-size: 21px;\n    }\n\n    .actions__icon--panel {\n      font-size: 0;\n      position: relative;\n    }\n\n    .actions__icon-hamburger {\n      display: inline-flex;\n      flex-direction: column;\n      gap: 3px;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .actions__icon-hamburger-line {\n      width: 12px;\n      height: 2px;\n      border-radius: 2px;\n      background: currentColor;\n      transition: background 0.2s ease;\n    }\n\n    .actions__status[data-error=\"true\"] {\n      color: #dc2626;\n    }\n\n    .section-message {\n      font-size: 11px;\n      color: #e2e8f0;\n      padding: 4px 0;\n    }\n\n    .section-message.section-message--error {\n      color: #dc2626;\n    }\n\n    .celebration {\n      position: fixed;\n      inset: 0;\n      display: none;\n      align-items: center;\n      justify-content: center;\n      background: rgba(15, 23, 42, 0.55);\n      z-index: 2147483647;\n      pointer-events: none;\n    }\n\n    .celebration[data-open=\"true\"] {\n      display: flex;\n      pointer-events: auto;\n    }\n\n    .celebration__card {\n      background: #ffffff;\n      color: #0f172a;\n      border-radius: 18px;\n      padding: 36px 48px;\n      max-width: 540px;\n      width: calc(100% - 48px);\n      text-align: center;\n      box-shadow: 0 20px 50px rgba(15, 23, 42, 0.35);\n      animation: popIn 360ms ease forwards;\n      position: relative;\n      z-index: 3;\n      overflow: hidden;\n    }\n\n    .celebration__title {\n      font-size: 24px;\n      font-weight: 800;\n      letter-spacing: 0.04em;\n      margin-bottom: 12px;\n      color: #0f172a;\n    }\n\n    .celebration__message {\n      font-size: 17px;\n      color: #334155;\n      line-height: 1.6;\n      margin-bottom: 24px;\n      white-space: pre-line;\n    }\n\n    .celebration__cake {\n      font-size: 132px;\n      margin-bottom: 16px;\n      display: inline-block;\n      animation: bounce 900ms ease-in-out infinite;\n    }\n\n    .celebration__close {\n      border: none;\n      background: #22c55e;\n      color: #ffffff;\n      font-weight: 700;\n      letter-spacing: 0.05em;\n      padding: 10px 28px;\n      border-radius: 999px;\n      cursor: pointer;\n      box-shadow: 0 8px 20px rgba(34, 197, 94, 0.45);\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n    }\n\n    .celebration__close:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 12px 24px rgba(34, 197, 94, 0.5);\n    }\n\n    .celebration__confetti,\n    .celebration__sparkles {\n      position: absolute;\n      inset: 0;\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n      pointer-events: none;\n    }\n\n    .celebration__confetti {\n      z-index: 1;\n    }\n\n    .celebration__sparkles {\n      z-index: 2;\n    }\n\n    .celebration__confetti-piece {\n      position: absolute;\n      width: 10px;\n      height: 18px;\n      border-radius: 2px;\n      opacity: 0;\n      animation: confettiFall 1.4s ease-out infinite;\n    }\n\n    .celebration__sparkle {\n      position: absolute;\n      width: 16px;\n      height: 16px;\n      background: radial-gradient(circle, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0) 72%);\n      filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.85));\n      opacity: 0;\n      animation: sparkleTwinkle 1.8s ease-in-out infinite;\n    }\n\n    @keyframes popIn {\n      from {\n        transform: scale(0.88);\n        opacity: 0;\n      }\n      to {\n        transform: scale(1);\n        opacity: 1;\n      }\n    }\n\n    @keyframes bounce {\n      0%, 100% {\n        transform: translateY(0);\n      }\n      50% {\n        transform: translateY(-15px);\n      }\n    }\n\n    @keyframes confettiFall {\n      0% {\n        transform: translate3d(var(--confetti-x, 0), -140px, 0) rotate(0deg);\n        opacity: 0;\n      }\n      20% {\n        opacity: 1;\n      }\n      100% {\n        transform: translate3d(calc(var(--confetti-x, 0) * 1.3), 240px, 0) rotate(310deg);\n        opacity: 0;\n      }\n    }\n\n    @keyframes sparkleTwinkle {\n      0% {\n        transform: scale(0.4) translateY(0);\n        opacity: 0;\n      }\n      30% {\n        opacity: 1;\n      }\n      100% {\n        transform: scale(1.6) translateY(48px);\n        opacity: 0;\n      }\n    }\n\n    .celebration__cracker {\n      position: absolute;\n      bottom: 16px;\n      width: 120px;\n      height: 160px;\n      display: flex;\n      align-items: flex-end;\n      justify-content: center;\n      pointer-events: none;\n      z-index: 4;\n      transform-origin: center bottom;\n      animation: crackerShake 0.6s ease-in-out infinite;\n      --cracker-angle: 0deg;\n    }\n\n    .celebration__cracker-body {\n      font-size: 192px;\n      filter: drop-shadow(0 6px 12px rgba(15, 23, 42, 0.25));\n    }\n\n    .celebration__cracker--left {\n      left: 174px;\n      --cracker-angle: -18deg;\n    }\n\n    .celebration__cracker--right {\n      right: -26px;\n      bottom: 116px;\n      --cracker-angle: -75deg;\n    }\n\n    .celebration__cracker-piece {\n      position: absolute;\n      bottom: 32px;\n      width: 8px;\n      height: 14px;\n      border-radius: 3px;\n      opacity: 0;\n      animation: crackerBurst 0.85s ease-out forwards;\n    }\n\n    @keyframes crackerShake {\n      0%, 100% {\n        transform: rotate(var(--cracker-angle, 0deg)) translateY(0);\n      }\n      50% {\n        transform: rotate(calc(var(--cracker-angle, 0deg) + 6deg)) translateY(-4px);\n      }\n    }\n\n    @keyframes crackerBurst {\n      0% {\n        transform: translate3d(0, 0, 0) rotate(0deg);\n        opacity: 0;\n      }\n      25% {\n        opacity: 1;\n      }\n      100% {\n        transform: translate3d(var(--burst-x, 0), -140px, 0) rotate(300deg);\n        opacity: 0;\n      }\n    }\n\n  `;\n\n  const bar = document.createElement(\"div\");\n  bar.className = \"bar\";\n\n  const tooltip = createTooltipElement();\n  const statusMenu = createStatusMenuElement();\n  activeStatusMenuRef = statusMenu;\n  const taskRegistry = new WeakMap<HTMLElement, TopBarTask>();\n  const sections: Record<SectionKey, HTMLDivElement> = Object.create(null);\n  const sectionContainers: Record<SectionKey, HTMLElement> = Object.create(null);\n  const statusMap = new Map<number, BacklogStatusLite[]>();\n\n  const sectionsContainer = document.createElement(\"div\");\n  sectionsContainer.className = \"sections-container\";\n\n  const celebration = createCelebrationPopup();\n  const actions = createActions();\n  const refreshButton = actions.refreshButton;\n  const togglePanelButton = actions.togglePanelButton;\n  const minimizeButton = actions.minimizeButton;\n  const levelBadge = createLevelIndicator();\n\n  const context: InteractionContext = {\n    tooltip,\n    statusMenu,\n    taskRegistry,\n    shadowRoot,\n    sections,\n    sectionContainers,\n    sectionsContainer,\n    statuses: statusMap,\n    bar,\n    preferences: {\n      showTomorrowSection: preferences.showTomorrowSection,\n      showNoDueSection: preferences.showNoDueSection\n    },\n    celebration,\n    levelBadge\n  };\n  currentContextRef = context;\n  updateLevelBadge(context);\n\n  const pastSection = createSection(\"\u671F\u9650\u65E5\uFF1A\u904E\u53BB\", \"past\", context);\n  const todaySection = createSection(\"\u671F\u9650\u65E5\uFF1A\u4ECA\u65E5\", \"today\", context);\n  const weekSection = createSection(\"\u671F\u9650\u65E5\uFF1A\u4ECA\u9031\", \"week\", context);\n  const noDueSection = createSection(\"\u671F\u9650\u65E5\uFF1A\u7A7A\u6B04\", \"noDue\", context);\n\n  SECTION_SEQUENCE.forEach((key) => {\n    if (key === \"week\" && !context.preferences.showTomorrowSection) {\n      return;\n    }\n    if (key === \"noDue\" && !context.preferences.showNoDueSection) {\n      return;\n    }\n    const container = context.sectionContainers[key];\n    if (container) {\n      sectionsContainer.append(container);\n    }\n  });\n  actions.container.append(levelBadge);\n  bar.append(sectionsContainer, actions.container);\n  shadowRoot.append(style, bar, tooltip, statusMenu, celebration.overlay);\n\n  context.bar.dataset.minimized = isMinimized ? \"true\" : \"false\";\n  updateHostHeight(currentBarHeight, isMinimized);\n  scheduleBarMeasurement(context);\n\n  enableWheelScroll(sectionsContainer);\n  enableWheelScroll(pastSection.list);\n  enableWheelScroll(todaySection.list);\n  enableWheelScroll(weekSection.list);\n  enableWheelScroll(noDueSection.list);\n\n  refreshButton.addEventListener(\"click\", () => {\n    if (refreshButton.dataset.loading === \"true\") {\n      return;\n    }\n    refreshButton.dataset.loading = \"true\";\n    refreshButton.disabled = true;\n    const result = refreshIssues(context, { showLoading: true });\n    void result.finally(() => {\n      delete refreshButton.dataset.loading;\n      refreshButton.disabled = false;\n    });\n  });\n\n  togglePanelButton.addEventListener(\"click\", async () => {\n    if (togglePanelButton.dataset.loading === \"true\") {\n      return;\n    }\n    togglePanelButton.dataset.loading = \"true\";\n    togglePanelButton.disabled = true;\n    try {\n      await toggleSidePanel();\n    } catch (error) {\n      const message = error instanceof Error ? error.message : String(error);\n      console.warn(\"Failed to toggle side panel:\", message);\n  } finally {\n    delete togglePanelButton.dataset.loading;\n    togglePanelButton.disabled = false;\n  }\n  });\n\n  minimizeButton.addEventListener(\"click\", (event) => {\n    event.stopPropagation();\n    setBarMinimized(context, true);\n  });\n\n  bar.addEventListener(\"click\", () => {\n    if (isMinimized) {\n      setBarMinimized(context, false);\n    }\n  });\n\n  shadowRoot.addEventListener(\"click\", (event) => {\n    const menu = activeStatusMenuRef;\n    if (!menu) {\n      return;\n    }\n    if (menu.contains(event.target as Node)) {\n      return;\n    }\n    const target = event.target as HTMLElement;\n    if (target?.classList.contains(\"badge\")) {\n      return;\n    }\n    hideStatusMenu(menu);\n  });\n\n  if (!documentClickHandlerAttached) {\n    document.addEventListener(\n      \"click\",\n      (event) => {\n        const path = event.composedPath();\n        const menu = activeStatusMenuRef;\n        if (\n          menu &&\n          (path.includes(menu) ||\n            path.some((node) => node instanceof HTMLElement && node.classList?.contains(\"badge\"))\n          )\n        ) {\n          return;\n        }\n        if (menu) {\n          hideStatusMenu(menu);\n        }\n      },\n      true\n    );\n    documentClickHandlerAttached = true;\n  }\n\n  return context;\n}\n\ntype SectionElements = {\n  container: HTMLElement;\n  list: HTMLDivElement;\n};\n\nfunction createSection(label: string, key: SectionKey, context: InteractionContext): SectionElements {\n  const container = document.createElement(\"section\");\n  container.className = \"section\";\n\n  const heading = document.createElement(\"div\");\n  heading.className = \"section__label\";\n  heading.textContent = label;\n\n  const list = document.createElement(\"div\");\n  list.className = \"badge-row\";\n\n  context.sections[key] = list;\n  context.sectionContainers[key] = container;\n\n  container.append(heading, list);\n  return { container, list };\n}\n\ntype ActionsElements = {\n  container: HTMLDivElement;\n  refreshButton: HTMLButtonElement;\n  togglePanelButton: HTMLButtonElement;\n  minimizeButton: HTMLButtonElement;\n};\n\nfunction createActions(): ActionsElements {\n  const container = document.createElement(\"div\");\n  container.className = \"actions\";\n\n  const refreshButton = document.createElement(\"button\");\n  refreshButton.className = \"actions__icon actions__icon--refresh\";\n  refreshButton.type = \"button\";\n  refreshButton.title = \"\u8AB2\u984C\u3092\u518D\u53D6\u5F97\";\n  refreshButton.setAttribute(\"aria-label\", \"\u8AB2\u984C\u3092\u518D\u53D6\u5F97\");\n  refreshButton.textContent = \"\u21BB\";\n\n  const togglePanelButton = document.createElement(\"button\");\n  togglePanelButton.className = \"actions__icon actions__icon--panel\";\n  togglePanelButton.type = \"button\";\n  togglePanelButton.title = \"\u30B5\u30A4\u30C9\u30D1\u30CD\u30EB\u3092\u8868\u793A\";\n  togglePanelButton.setAttribute(\"aria-label\", \"\u30B5\u30A4\u30C9\u30D1\u30CD\u30EB\u3092\u8868\u793A\");\n  const togglePanelIcon = document.createElement(\"span\");\n  togglePanelIcon.className = \"actions__icon-hamburger\";\n  togglePanelIcon.setAttribute(\"aria-hidden\", \"true\");\n  for (let i = 0; i < 3; i += 1) {\n    const line = document.createElement(\"span\");\n    line.className = \"actions__icon-hamburger-line\";\n    togglePanelIcon.append(line);\n  }\n  togglePanelButton.append(togglePanelIcon);\n\n  const minimizeButton = document.createElement(\"button\");\n  minimizeButton.className = \"actions__icon actions__icon--minimize\";\n  minimizeButton.type = \"button\";\n  minimizeButton.title = \"\u30D0\u30FC\u3092\u6700\u5C0F\u5316\";\n  minimizeButton.setAttribute(\"aria-label\", \"\u30D0\u30FC\u3092\u6700\u5C0F\u5316\");\n  minimizeButton.textContent = \"\u00D7\";\n\n  container.append(refreshButton, togglePanelButton, minimizeButton);\n  return { container, refreshButton, togglePanelButton, minimizeButton };\n}\n\nfunction createLevelIndicator(): HTMLDivElement {\n  const badge = document.createElement(\"div\");\n  badge.className = \"actions__level\";\n  badge.innerHTML = `<span class=\"actions__level-top\">Backlog</span><span class=\"actions__level-bottom\">Lv.${currentLevel}</span>`;\n  return badge;\n}\n\nfunction createTooltipElement(): HTMLDivElement {\n  const tooltip = document.createElement(\"div\");\n  tooltip.className = \"tooltip\";\n  tooltip.setAttribute(\"role\", \"tooltip\");\n\n  const title = document.createElement(\"h3\");\n  title.className = \"tooltip__title\";\n  const meta = document.createElement(\"div\");\n  meta.className = \"tooltip__meta\";\n  const body = document.createElement(\"p\");\n  body.className = \"tooltip__body\";\n\n  tooltip.append(title, meta, body);\n  return tooltip;\n}\n\nlet menuCurrentContext: InteractionContext | null = null;\n\nfunction createCelebrationPopup(): CelebrationElements {\n  const overlay = document.createElement(\"div\");\n  overlay.className = \"celebration\";\n  overlay.setAttribute(\"role\", \"dialog\");\n  overlay.setAttribute(\"aria-live\", \"assertive\");\n\n  const confettiLayer = document.createElement(\"div\");\n  confettiLayer.className = \"celebration__confetti\";\n\n  const sparklesLayer = document.createElement(\"div\");\n  sparklesLayer.className = \"celebration__sparkles\";\n\n  const card = document.createElement(\"div\");\n  card.className = \"celebration__card\";\n\n  const cake = document.createElement(\"div\");\n  cake.className = \"celebration__cake\";\n  cake.textContent = CAKE_EMOJI;\n\n  const title = document.createElement(\"h2\");\n  title.className = \"celebration__title\";\n  title.textContent = \"Congratulations!!\";\n\n  const message = document.createElement(\"p\");\n  message.className = \"celebration__message\";\n  message.textContent = `\u672C\u65E5\u306E\u30BF\u30B9\u30AF\u3092\u5168\u3066\u51E6\u7406\u3057\u3001Lv.${currentLevel}\u306B\u4E0A\u304C\u308A\u307E\u3057\u305F\uFF01\\n\u3053\u306E\u8ABF\u5B50\u3067\u304C\u3093\u3070\u308A\u307E\u3057\u3087\u3046\uFF01\uFF01`;\n\n  const close = document.createElement(\"button\");\n  close.type = \"button\";\n  close.className = \"celebration__close\";\n  close.textContent = \"\u9589\u3058\u308B\";\n\n  close.addEventListener(\"click\", () => {\n    hideCelebrationPopup(currentContextRef ?? null);\n  });\n\n  overlay.addEventListener(\"click\", (event) => {\n    if (event.target === overlay) {\n      hideCelebrationPopup(currentContextRef ?? null);\n    }\n  });\n\n  const randomizeConfetti = (piece: HTMLSpanElement, index: number) => {\n    const left = Math.random() * 100;\n    const duration = 1.2 + Math.random() * 0.6;\n    const delay = Math.random() * 0.6;\n    const color = CONFETTI_COLORS[index % CONFETTI_COLORS.length];\n    piece.style.left = `${left}%`;\n    piece.style.setProperty(\"--confetti-x\", `${left - 50}px`);\n    piece.style.backgroundColor = color;\n    piece.style.animationDuration = `${duration}s`;\n    piece.style.animationDelay = `${delay}s`;\n  };\n\n  const confettiPiecesList: HTMLSpanElement[] = [];\n  for (let index = 0; index < 28; index += 1) {\n    const piece = document.createElement(\"span\");\n    piece.className = \"celebration__confetti-piece\";\n    confettiLayer.append(piece);\n    confettiPiecesList.push(piece);\n    randomizeConfetti(piece, index);\n    piece.addEventListener(\"animationiteration\", () => {\n      randomizeConfetti(piece, index);\n    });\n  }\n\n  const sparkles: HTMLSpanElement[] = [];\n  const randomizeSparkle = (sparkle: HTMLSpanElement, index: number) => {\n    const left = Math.random() * 100;\n    const top = Math.random() * 60;\n    const duration = 1.6 + Math.random() * 1.1;\n    const delay = (index % 2 === 0 ? 0 : 0.4) + Math.random() * 0.8;\n    sparkle.style.left = `${left}%`;\n    sparkle.style.top = `${top}%`;\n    sparkle.style.animationDuration = `${duration}s`;\n    sparkle.style.animationDelay = `${delay}s`;\n  };\n\n  for (let index = 0; index < 28; index += 1) {\n    const sparkle = document.createElement(\"span\");\n    sparkle.className = \"celebration__sparkle\";\n    sparklesLayer.append(sparkle);\n    randomizeSparkle(sparkle, index);\n    sparkle.addEventListener(\"animationiteration\", () => {\n      randomizeSparkle(sparkle, index);\n    });\n    sparkles.push(sparkle);\n  }\n\n  const crackerLeft = document.createElement(\"div\");\n  crackerLeft.className = \"celebration__cracker celebration__cracker--left\";\n  const crackerRight = document.createElement(\"div\");\n  crackerRight.className = \"celebration__cracker celebration__cracker--right\";\n\n  const crackerBodyLeft = document.createElement(\"div\");\n  crackerBodyLeft.className = \"celebration__cracker-body\";\n  crackerBodyLeft.textContent = \"\uD83C\uDF89\";\n  const crackerBodyRight = document.createElement(\"div\");\n  crackerBodyRight.className = \"celebration__cracker-body\";\n  crackerBodyRight.textContent = \"\uD83C\uDF89\";\n\n  const crackerPiecesLeft: HTMLSpanElement[] = [];\n  const crackerPiecesRight: HTMLSpanElement[] = [];\n\n  for (let index = 0; index < 12; index += 1) {\n    const piece = document.createElement(\"span\");\n    piece.className = \"celebration__cracker-piece\";\n    piece.style.backgroundColor = CRACKER_CONFETTI_COLORS[index % CRACKER_CONFETTI_COLORS.length];\n    piece.style.left = `${24 + Math.random() * 40}px`;\n    piece.style.setProperty(\"--burst-x\", `${24 + Math.random() * 60}px`);\n    crackerPiecesLeft.push(piece);\n    crackerLeft.append(piece);\n  }\n\n  for (let index = 0; index < 12; index += 1) {\n    const piece = document.createElement(\"span\");\n    piece.className = \"celebration__cracker-piece\";\n    piece.style.backgroundColor = CRACKER_CONFETTI_COLORS[index % CRACKER_CONFETTI_COLORS.length];\n    piece.style.right = `${24 + Math.random() * 40}px`;\n    piece.style.setProperty(\"--burst-x\", `${-24 - Math.random() * 60}px`);\n    crackerPiecesRight.push(piece);\n    crackerRight.append(piece);\n  }\n\n  crackerLeft.append(crackerBodyLeft);\n  crackerRight.append(crackerBodyRight);\n\n  card.append(cake, title, message, close);\n  overlay.append(confettiLayer, sparklesLayer, card, crackerLeft, crackerRight);\n\n  return {\n    overlay,\n    card,\n    title,\n    message,\n    close,\n    confettiLayer,\n    sparklesLayer,\n    confettiPieces: confettiPiecesList,\n    sparkles,\n    crackerLeft,\n    crackerRight,\n    crackerPiecesLeft,\n    crackerPiecesRight\n  };\n}\n\nlet currentContextRef: InteractionContext | null = null;\n\nfunction createStatusMenuElement(): HTMLDivElement {\n  const menu = document.createElement(\"div\");\n  menu.className = \"status-menu\";\n\n  menu.addEventListener(\"click\", (event) => {\n    const button = (event.target as HTMLElement).closest(\"button\") as HTMLButtonElement | null;\n    if (!button || button.disabled) {\n      return;\n    }\n    const action = button.dataset.action;\n    if (action === \"status\") {\n      const nextStatus = button.dataset.status ?? \"\";\n      const statusIdValue = Number(button.dataset.statusId ?? \"\");\n      if (!nextStatus || Number.isNaN(statusIdValue) || statusIdValue <= 0) {\n        return;\n      }\n      if (!menuCurrentBadge || !menuCurrentTask || !menuCurrentContext) {\n        return;\n      }\n\n      const todayCountBeforeChange = getTodayTaskCount(menuCurrentContext);\n      if (\n        todayCountBeforeChange === 1 &&\n        isTaskDueToday(menuCurrentTask) &&\n        isCompletionStatusName(nextStatus)\n      ) {\n        celebrationArmed = true;\n      }\n\n      const previousStatus = menuCurrentTask.status;\n      const previousStatusId = menuCurrentTask.statusId ?? null;\n\n      menuCurrentTask.status = nextStatus;\n      menuCurrentTask.statusId = statusIdValue;\n      updateBadgeAppearance(menuCurrentBadge, menuCurrentTask, focusedTaskId === menuCurrentTask.id ? 40 : undefined);\n      if (menuCurrentContext) {\n        applyFocusModeAppearance(menuCurrentContext);\n      }\n      hideStatusMenu(menu);\n\n      void applyStatusChange(menuCurrentContext, menuCurrentTask, statusIdValue, nextStatus).catch((error) => {\n        console.warn(\"Failed to update issue status\", error);\n        menuCurrentTask.status = previousStatus;\n        menuCurrentTask.statusId = previousStatusId;\n        updateBadgeAppearance(menuCurrentBadge as HTMLButtonElement, menuCurrentTask, focusedTaskId === menuCurrentTask.id ? 40 : undefined);\n        if (menuCurrentContext) {\n          applyFocusModeAppearance(menuCurrentContext);\n        }\n      });\n    } else if (action === \"due-today\" || action === \"due-tomorrow\") {\n      if (!menuCurrentTask || !menuCurrentContext) {\n        return;\n      }\n      const desiredDate = new Date();\n      if (action === \"due-tomorrow\") {\n        desiredDate.setDate(desiredDate.getDate() + 1);\n      }\n      desiredDate.setHours(0, 0, 0, 0);\n      if (action === \"due-tomorrow\") {\n        const todayCountBeforeChange = getTodayTaskCount(menuCurrentContext);\n        if (todayCountBeforeChange === 1 && isTaskDueToday(menuCurrentTask)) {\n          celebrationArmed = true;\n        }\n      }\n      void applyDueDateChange(menuCurrentContext, menuCurrentTask, desiredDate).catch((error) => {\n        console.warn(\"Failed to update due date\", error);\n      });\n      hideStatusMenu(menu);\n    } else if (action === \"focus-task\") {\n      if (!menuCurrentTask || !menuCurrentContext) {\n        return;\n      }\n      const nextId = focusedTaskId === menuCurrentTask.id ? null : menuCurrentTask.id;\n      setFocusedTask(menuCurrentContext, nextId);\n      hideStatusMenu(menu);\n    }\n  });\n\n  return menu;\n}\n\nfunction closeActiveStatusMenu(immediate = false) {\n  if (activeStatusMenuRef) {\n    hideStatusMenu(activeStatusMenuRef, immediate);\n  }\n}\n\nfunction getProjectStatuses(context: InteractionContext, projectId: number): BacklogStatusLite[] {\n  if (!Number.isFinite(projectId) || projectId <= 0) {\n    console.warn(\"Invalid project id for statuses\", projectId);\n    return [];\n  }\n  const list = context.statuses.get(projectId) ?? [];\n  return list.slice().sort((a, b) => a.displayOrder - b.displayOrder || a.id - b.id);\n}\n\nfunction renderStatusMenuOptions(\n  context: InteractionContext,\n  menu: HTMLDivElement,\n  task: TopBarTask\n) {\n  const statuses = getProjectStatuses(context, task.projectId);\n  menu.innerHTML = \"\";\n\n  if (!statuses.length) {\n    const message = document.createElement(\"div\");\n    message.textContent = `\u30B9\u30C6\u30FC\u30BF\u30B9\u60C5\u5831\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\uFF08projectId=${task.projectId}\uFF09`;\n    message.style.padding = \"8px 10px\";\n    message.style.fontSize = \"12px\";\n    message.style.color = \"#64748b\";\n    menu.append(message);\n    menu.dataset.hasOptions = \"false\";\n    console.warn(\"No statuses cached for project\", task.projectId, context.statuses);\n    return false;\n  }\n\n  statuses.forEach((status) => {\n    const item = document.createElement(\"button\");\n    item.type = \"button\";\n    item.className = \"status-menu__item\";\n    item.dataset.action = \"status\";\n    item.dataset.status = status.name;\n    item.dataset.statusId = `${status.id}`;\n    item.textContent = status.name;\n\n    const swatch = document.createElement(\"span\");\n    swatch.className = \"status-menu__swatch\";\n    swatch.style.background = getStatusColor(status.name);\n    item.append(swatch);\n\n    menu.append(item);\n  });\n\n  menu.dataset.hasOptions = \"true\";\n\n  const divider = document.createElement(\"hr\");\n  divider.style.margin = \"8px 0\";\n  divider.style.border = \"none\";\n  divider.style.borderTop = \"1px solid rgba(148, 163, 184, 0.25)\";\n  menu.append(divider);\n\n  const dueTodayButton = document.createElement(\"button\");\n  dueTodayButton.type = \"button\";\n  dueTodayButton.className = \"status-menu__item status-menu__action\";\n  dueTodayButton.dataset.action = \"due-today\";\n  dueTodayButton.innerHTML = \"\u671F\u9650\u65E5\u3092<strong>\u4ECA\u65E5</strong>\u306B\u5909\u66F4\";\n  menu.append(dueTodayButton);\n\n  const dueTomorrowButton = document.createElement(\"button\");\n  dueTomorrowButton.type = \"button\";\n  dueTomorrowButton.className = \"status-menu__item status-menu__action\";\n  dueTomorrowButton.dataset.action = \"due-tomorrow\";\n  dueTomorrowButton.innerHTML = \"\u671F\u9650\u65E5\u3092<strong>\u660E\u65E5</strong>\u306B\u5909\u66F4\";\n  menu.append(dueTomorrowButton);\n\n  const focusDivider = document.createElement(\"hr\");\n  focusDivider.style.margin = \"8px 0\";\n  focusDivider.style.border = \"none\";\n  focusDivider.style.borderTop = \"1px solid rgba(148, 163, 184, 0.25)\";\n  menu.append(focusDivider);\n\n  const focusButton = document.createElement(\"button\");\n  focusButton.type = \"button\";\n  focusButton.className = \"status-menu__item status-menu__action\";\n  focusButton.dataset.action = \"focus-task\";\n  const isFocused = focusedTaskId === task.id;\n  focusButton.textContent = isFocused ? \"\u96C6\u4E2D\u30E2\u30FC\u30C9\u3092\u89E3\u9664\" : \"\u3053\u306E\u30BF\u30B9\u30AF\u306B\u96C6\u4E2D\uFF01\";\n  focusButton.dataset.focusActive = isFocused ? \"true\" : \"false\";\n  menu.append(focusButton);\n\n  return true;\n}\n\nasync function ensureStatusMenuOptions(\n  context: InteractionContext,\n  menu: HTMLDivElement,\n  task: TopBarTask\n): Promise<boolean> {\n  renderStatusMenuOptions(context, menu, task);\n  if (menu.dataset.hasOptions === \"true\") {\n    return true;\n  }\n\n  try {\n    const response = await sendMessageWithRetry({\n      type: \"backlog:project:statuses\",\n      projectId: task.projectId\n    }, 2);\n    const statuses = response?.data?.statuses as BacklogStatusLite[] | undefined;\n    if (Array.isArray(statuses) && statuses.length) {\n      context.statuses.set(task.projectId, statuses);\n      renderStatusMenuOptions(context, menu, task);\n      return menu.dataset.hasOptions === \"true\";\n    }\n  } catch (error) {\n    console.warn(\"Failed to load project statuses\", error);\n  }\n  renderStatusMenuOptions(context, menu, task);\n  return menu.dataset.hasOptions === \"true\";\n}\n\nasync function applyStatusChange(\n  context: InteractionContext,\n  task: TopBarTask,\n  statusId: number,\n  statusName: string\n): Promise<void> {\n  try {\n    const response = await sendMessageWithRetry({\n      type: \"backlog:issue:updateStatus\",\n      issueId: task.id,\n      statusId\n    }, 2);\n    if (response?.error) {\n      throw new Error(response.error);\n    }\n    updateCachedIssueStatus(task.id, statusName, statusId);\n    void refreshIssues(context);\n  } catch (error) {\n    celebrationArmed = false;\n    throw error instanceof Error ? error : new Error(String(error));\n  }\n}\n\nfunction updateCachedIssueStatus(issueId: number, statusName: string, statusId: number): void {\n  const buckets = latestIssueBuckets;\n  if (!buckets) {\n    return;\n  }\n  SECTION_SEQUENCE.forEach((key) => {\n    const list = getBucketForKey(buckets, key);\n    const target = list.find((item) => item.id === issueId);\n    if (target) {\n      target.status = statusName;\n      target.statusId = statusId;\n    }\n  });\n}\n\nasync function applyDueDateChange(context: InteractionContext, task: TopBarTask, desiredDate: Date): Promise<void> {\n  const projectId = task.projectId;\n  if (!Number.isFinite(projectId) || projectId <= 0) {\n    console.warn(\"Cannot update due date without valid projectId\", projectId);\n    return;\n  }\n  const normalized = new Date(\n    desiredDate.getFullYear(),\n    desiredDate.getMonth(),\n    desiredDate.getDate(),\n    0,\n    0,\n    0,\n    0\n  );\n  const timezoneSafeDate = new Date(normalized.getTime() - normalized.getTimezoneOffset() * 60000);\n  const isoDate = timezoneSafeDate.toISOString().split(\"T\")[0];\n\n  try {\n    const response = await sendMessageWithRetry({\n      type: \"backlog:issue:updateDueDate\",\n      issueId: task.id,\n      dueDate: isoDate\n    }, 2);\n    if (response?.error) {\n      throw new Error(response.error);\n    }\n    task.dueDate = isoDate;\n    updateCachedIssueDueDate(task.id, isoDate);\n    void refreshIssues(context);\n  } catch (error) {\n    console.warn(\"Failed to update due date\", error);\n    celebrationArmed = false;\n  }\n}\n\nfunction updateCachedIssueDueDate(issueId: number, dueDate: string): void {\n  const buckets = latestIssueBuckets;\n  if (!buckets) {\n    return;\n  }\n  SECTION_SEQUENCE.forEach((key) => {\n    const list = getBucketForKey(buckets, key);\n    const target = list.find((item) => item.id === issueId);\n    if (target) {\n      target.dueDate = dueDate;\n    }\n  });\n}\n\nfunction setSectionMessage(list: HTMLDivElement, message: string, variant: \"default\" | \"error\" = \"default\") {\n  list.innerHTML = \"\";\n  const span = document.createElement(\"span\");\n  span.className = \"section-message\";\n  if (variant === \"error\") {\n    span.classList.add(\"section-message--error\");\n  }\n  span.textContent = message;\n  list.append(span);\n}\n\nfunction setSectionsMessage(context: InteractionContext, message: string, variant: \"default\" | \"error\" = \"default\") {\n  SECTION_SEQUENCE.forEach((key) => {\n    const list = context.sections[key];\n    if (list) {\n      setSectionMessage(list, message, variant);\n    }\n  });\n  hideCelebrationPopup(context);\n  scheduleBarMeasurement(context);\n}\n\nfunction scheduleBarMeasurement(context: InteractionContext) {\n  if (isMinimized) {\n    return;\n  }\n  if (pendingBarMeasurementFrame) {\n    return;\n  }\n  pendingBarMeasurementFrame = window.requestAnimationFrame(() => {\n    pendingBarMeasurementFrame = 0;\n    if (isMinimized) {\n      return;\n    }\n    const rect = context.bar.getBoundingClientRect();\n    const measuredHeight = Math.round(rect.height);\n    if (!Number.isFinite(measuredHeight) || measuredHeight <= 0) {\n      return;\n    }\n    expandedBarHeight = measuredHeight;\n    currentBarHeight = measuredHeight;\n    updateHostHeight(measuredHeight, false);\n    applyPaddingTop();\n    scheduleLayoutCheck();\n  });\n}\n\nfunction renderIssueBuckets(context: InteractionContext, buckets: BacklogIssueBuckets) {\n  ensureFocusedTaskVisible(buckets);\n  if (Array.isArray(buckets.statuses)) {\n    context.statuses.clear();\n    buckets.statuses.forEach((bundle) => {\n      context.statuses.set(bundle.projectId, bundle.statuses.slice());\n    });\n  }\n  renderSectionTasks(context, \"past\", buckets.past);\n  renderSectionTasks(context, \"today\", buckets.today);\n  if (context.preferences.showTomorrowSection) {\n    renderSectionTasks(context, \"week\", buckets.thisWeek);\n  } else {\n    context.sections.week.innerHTML = \"\";\n  }\n  if (context.preferences.showNoDueSection) {\n    renderSectionTasks(context, \"noDue\", buckets.noDue);\n  } else {\n    context.sections.noDue.innerHTML = \"\";\n  }\n  applyFocusModeAppearance(context);\n  handleTodayCompletionCelebration(context, buckets.today.length);\n  scheduleBarMeasurement(context);\n}\n\nfunction updateSectionVisibility(\n  context: InteractionContext,\n  key: SectionKey,\n  shouldShow: boolean,\n  buckets: BacklogIssueBuckets | null = null\n): void {\n  const container = context.sectionContainers[key];\n  const parent = context.sectionsContainer;\n  const list = context.sections[key];\n  if (!container || !parent || !list) {\n    return;\n  }\n\n  const isAttached = parent.contains(container);\n\n  if (shouldShow) {\n    if (!isAttached) {\n      let inserted = false;\n      const currentIndex = SECTION_SEQUENCE.indexOf(key);\n      for (let idx = currentIndex + 1; idx < SECTION_SEQUENCE.length; idx += 1) {\n        const nextKey = SECTION_SEQUENCE[idx];\n        const nextContainer = context.sectionContainers[nextKey];\n        if (nextContainer && parent.contains(nextContainer)) {\n          parent.insertBefore(container, nextContainer);\n          inserted = true;\n          break;\n        }\n      }\n      if (!inserted) {\n        parent.append(container);\n      }\n\n      const source = buckets ?? latestIssueBuckets;\n      if (source) {\n        renderSectionTasks(context, key, source[key]);\n      } else {\n        list.innerHTML = \"\";\n        setSectionMessage(list, \"\u306A\u3057\");\n      }\n      scheduleBarMeasurement(context);\n    }\n  } else if (isAttached) {\n    parent.removeChild(container);\n    scheduleBarMeasurement(context);\n  }\n  applyFocusModeAppearance(context);\n}\n\nfunction renderSectionTasks(context: InteractionContext, key: SectionKey, tasks: TopBarTask[]) {\n  const list = context.sections[key];\n  if (!list) {\n    return;\n  }\n\n  closeActiveStatusMenu(true);\n  hideTooltip(context.tooltip, 0);\n\n  list.innerHTML = \"\";\n\n  if (!tasks.length) {\n    setSectionMessage(list, \"\u306A\u3057\");\n    return;\n  }\n\n  tasks.forEach((task) => {\n    const badge = createBadgeElement(task, context);\n    list.append(badge);\n  });\n}\n\nfunction setBarMinimized(context: InteractionContext, minimized: boolean) {\n  if (isMinimized === minimized) {\n    return;\n  }\n  isMinimized = minimized;\n  context.bar.dataset.minimized = minimized ? \"true\" : \"false\";\n  if (minimized) {\n    if (currentBarHeight > 0) {\n      expandedBarHeight = currentBarHeight;\n    }\n    currentBarHeight = 0;\n    updateHostHeight(0, true);\n  } else {\n    currentBarHeight = expandedBarHeight;\n    updateHostHeight(currentBarHeight, false);\n  }\n  applyPaddingTop();\n  scheduleLayoutCheck();\n  void saveMinimizedState(minimized);\n  if (minimized) {\n    closeActiveStatusMenu(true);\n    hideTooltip(context.tooltip, 0);\n    showMinimizedIndicator(context, true);\n  } else {\n    showMinimizedIndicator(context, false);\n    scheduleBarMeasurement(context);\n  }\n}\n\nfunction updateHostHeight(height: number, minimized = false) {\n  const host = document.getElementById(SHADOW_HOST_ID);\n  if (host) {\n    host.style.display = minimized ? \"none\" : \"block\";\n    host.style.height = minimized ? \"0px\" : `${height}px`;\n  }\n}\n\nfunction showMinimizedIndicator(context: InteractionContext, visible: boolean) {\n  const host = document.getElementById(SHADOW_HOST_ID);\n  if (!visible) {\n    if (host) {\n      host.style.display = \"block\";\n    }\n  }\n\n  if (!visible) {\n    if (minimizedIndicator) {\n      minimizedIndicator.style.display = \"none\";\n    }\n    minimizedIndicatorContext = null;\n    applyPaddingTop();\n    return;\n  }\n\n  minimizedIndicatorContext = context;\n  if (!minimizedIndicator) {\n    minimizedIndicator = document.createElement(\"div\");\n    minimizedIndicator.style.position = \"fixed\";\n    minimizedIndicator.style.top = \"0\";\n    minimizedIndicator.style.left = \"0\";\n    minimizedIndicator.style.right = \"0\";\n    minimizedIndicator.style.height = `${MINIMIZED_HEIGHT}px`;\n    minimizedIndicator.style.background = \"#2c9a7a\";\n    minimizedIndicator.style.zIndex = \"2147483646\";\n    minimizedIndicator.style.cursor = \"pointer\";\n    minimizedIndicator.style.boxShadow = \"0 0 12px rgba(44, 154, 122, 0.45)\";\n    minimizedIndicator.style.transition = \"opacity 0.15s ease\";\n    minimizedIndicator.title = \"\u30D0\u30FC\u3092\u5C55\u958B\";\n    minimizedIndicator.setAttribute(\"role\", \"button\");\n    minimizedIndicator.setAttribute(\"aria-label\", \"\u30D0\u30FC\u3092\u5C55\u958B\");\n    minimizedIndicator.addEventListener(\"click\", () => {\n      if (minimizedIndicatorContext) {\n        setBarMinimized(minimizedIndicatorContext, false);\n      }\n    });\n    document.body.append(minimizedIndicator);\n  }\n\n  minimizedIndicator.style.display = \"block\";\n  minimizedIndicator.style.opacity = \"1\";\n  applyPaddingTop();\n}\n\nfunction createBadgeElement(task: TopBarTask, context: InteractionContext): HTMLButtonElement {\n  const badge = document.createElement(\"button\");\n  badge.type = \"button\";\n  badge.className = \"badge\";\n  badge.dataset.issueKey = task.issueKey;\n  badge.dataset.status = task.status;\n  context.taskRegistry.set(badge, task);\n  updateBadgeAppearance(badge, task);\n\n  badge.addEventListener(\"mouseenter\", () => {\n    scheduleTooltipForBadge(badge, task, context.tooltip);\n  });\n\n  badge.addEventListener(\"mouseleave\", () => {\n    hideTooltip(context.tooltip, 120);\n  });\n\n  badge.addEventListener(\"click\", (event) => {\n    event.stopPropagation();\n    void toggleStatusMenuForBadge(badge, task, context);\n  });\n\n  badge.addEventListener(\"auxclick\", (event) => {\n    if (event.button === 1) {\n      window.open(task.url, \"_blank\", \"noopener\");\n    }\n  });\n\n  badge.addEventListener(\"keydown\", (event) => {\n    if (event.key === \"Enter\" && event.metaKey) {\n      window.open(task.url, \"_blank\", \"noopener\");\n    }\n  });\n\n  return badge;\n}\n\nasync function refreshIssues(context: InteractionContext, options: { showLoading?: boolean } = {}) {\n  if (options.showLoading) {\n    setSectionsMessage(context, \"\u8AB2\u984C\u3092\u540C\u671F\u4E2D\u2026\");\n  }\n\n  try {\n    const response = await sendMessageWithRetry({ type: \"backlog:issues:list\", force: options.showLoading }, 2);\n    const payload: BacklogIssueBuckets | undefined = response?.data ?? response;\n    if (!payload) {\n      throw new Error(\"Backlog API \u304B\u3089\u306E\u5FDC\u7B54\u304C\u4E0D\u6B63\u3067\u3059\");\n    }\n\n    latestIssueBuckets = payload;\n    renderIssueBuckets(context, payload);\n\n    if (payload.errorCode) {\n      const fallbackNote = payload.stale ? \"\uFF08\u524D\u56DE\u306E\u30AD\u30E3\u30C3\u30B7\u30E5\u3092\u8868\u793A\u4E2D\uFF09\" : \"\";\n      const messageText = resolveErrorMessage(payload.errorCode, payload.errorMessage);\n      if (!payload.past.length && !payload.today.length && !payload.thisWeek.length && !payload.noDue.length) {\n        setSectionsMessage(context, messageText, payload.errorCode === \"missing-config\" ? \"error\" : \"default\");\n      }\n    } else {\n      // no-op: status label removed\n    }\n  } catch (error) {\n    const message = error instanceof Error ? error.message : String(error);\n    if (message.includes(\"Extension context invalidated\")) {\n      window.setTimeout(() => {\n        void refreshIssues(context, options);\n      }, 400);\n      return;\n    }\n    if (latestIssueBuckets) {\n      renderIssueBuckets(context, latestIssueBuckets);\n    } else {\n      setSectionsMessage(context, \"\u8AB2\u984C\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F\", \"error\");\n    }\n    console.warn(\"Failed to refresh issues:\", message);\n  }\n}\n\nfunction formatLastUpdated(timestamp: string, stale?: boolean): string {\n  const date = new Date(timestamp);\n  if (Number.isNaN(date.getTime())) {\n    return stale ? \"\u524D\u56DE\u306E\u30C7\u30FC\u30BF\u3092\u8868\u793A\" : \"\u540C\u671F\u672A\u5B9F\u65BD\";\n  }\n  const hours = `${date.getHours()}`.padStart(2, \"0\");\n  const minutes = `${date.getMinutes()}`.padStart(2, \"0\");\n  return stale ? `\u524D\u56DE\u540C\u671F ${hours}:${minutes}` : `\u6700\u7D42\u66F4\u65B0 ${hours}:${minutes}`;\n}\n\nfunction resolveErrorMessage(code: BacklogIssueBuckets[\"errorCode\"], fallback?: string): string {\n  if (fallback) {\n    return fallback;\n  }\n  switch (code) {\n    case \"missing-config\":\n      return \"Backlog API \u30AD\u30FC\u3092\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\";\n    case \"permission-denied\":\n      return \"\u30C9\u30E1\u30A4\u30F3\u3078\u306E\u30A2\u30AF\u30BB\u30B9\u8A31\u53EF\u304C\u5FC5\u8981\u3067\u3059\";\n    case \"request-denied\":\n      return \"API \u8A8D\u8A3C\u306B\u5931\u6557\u3057\u307E\u3057\u305F\";\n    case \"network-error\":\n    default:\n      return \"\u8AB2\u984C\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F\";\n  }\n}\n\nfunction hideStatusMenu(menu: HTMLDivElement, immediate = false) {\n  if (menuHideTimer) {\n    window.clearTimeout(menuHideTimer);\n  }\n  const close = () => {\n    menu.style.display = \"none\";\n    menu.style.removeProperty(\"top\");\n    menu.style.removeProperty(\"left\");\n    menu.dataset.openFor = \"\";\n    menuCurrentBadge = null;\n    menuCurrentTask = null;\n  };\n\n  if (immediate) {\n    close();\n    return;\n  }\n\n  menuHideTimer = window.setTimeout(close, 120);\n}\n\nfunction updateBadgeAppearance(badge: HTMLButtonElement, task: TopBarTask, overrideLength?: number) {\n  const maxLength = overrideLength && overrideLength > 0 ? overrideLength : 15;\n  const truncated = truncateSummary(task.summary, maxLength);\n  badge.textContent = truncated;\n  badge.dataset.status = task.status;\n  const color = getStatusColor(task.status);\n  badge.style.backgroundColor = color;\n  badge.style.color = \"#ffffff\";\n  badge.dataset.baseColor = color;\n  badge.dataset.baseTextColor = \"#ffffff\";\n  badge.setAttribute(\"aria-label\", `${task.summary}\uFF08\u30B9\u30C6\u30FC\u30BF\u30B9: ${task.status}\uFF09`);\n}\n\nfunction getStatusColor(status: string): string {\n  return STATUS_COLOR_MAP[status] ?? DEFAULT_STATUS_COLOR;\n}\n\nfunction truncateSummary(summary: string, maxLength: number): string {\n  const chars = Array.from(summary);\n  if (chars.length <= maxLength) {\n    return summary;\n  }\n  return chars.slice(0, maxLength).join(\"\");\n}\n\nfunction getBucketForKey(buckets: BacklogIssueBuckets, key: SectionKey): BacklogIssueLite[] {\n  switch (key) {\n    case \"past\":\n      return buckets.past;\n    case \"today\":\n      return buckets.today;\n    case \"week\":\n      return buckets.thisWeek ?? [];\n    case \"noDue\":\n      return buckets.noDue;\n    default:\n      return [];\n  }\n}\n\nfunction applyFocusModeAppearance(context: InteractionContext): void {\n  const badgeEntries: Array<{\n    badge: HTMLButtonElement;\n    task: TopBarTask;\n    baseColor: string;\n    baseTextColor: string;\n  }> = [];\n\n  SECTION_SEQUENCE.forEach((key) => {\n    const list = context.sections[key];\n    if (!list) {\n      return;\n    }\n    const badges = list.querySelectorAll<HTMLButtonElement>(\".badge\");\n    badges.forEach((badge) => {\n      const task = context.taskRegistry.get(badge);\n      if (!task) {\n        return;\n      }\n      const baseColor = badge.dataset.baseColor ?? getStatusColor(task.status);\n      const baseTextColor = badge.dataset.baseTextColor ?? \"#ffffff\";\n      badgeEntries.push({ badge, task, baseColor, baseTextColor });\n    });\n  });\n\n  const focusActive = focusedTaskId !== null;\n  const activeTaskId = focusedTaskId ?? -1;\n\n  badgeEntries.forEach(({ badge, task, baseColor, baseTextColor }) => {\n    const isFocused = focusActive && task.id === activeTaskId;\n    badge.classList.toggle(\"badge--focused\", isFocused);\n    if (isFocused) {\n      updateBadgeAppearance(badge, task, 40);\n    } else {\n      updateBadgeAppearance(badge, task);\n    }\n    if (focusActive && !isFocused) {\n      badge.style.backgroundColor = FOCUS_DIM_BACKGROUND;\n      badge.style.color = FOCUS_DIM_TEXT_COLOR;\n      badge.style.opacity = \"0.65\";\n      badge.dataset.dimmed = \"true\";\n    } else {\n      badge.style.backgroundColor = baseColor;\n      badge.style.color = baseTextColor;\n      badge.style.opacity = \"1\";\n      delete badge.dataset.dimmed;\n    }\n  });\n}\n\nfunction ensureFocusedTaskVisible(buckets: BacklogIssueBuckets | null | undefined): void {\n  if (focusedTaskId === null || !buckets) {\n    return;\n  }\n  const exists = SECTION_SEQUENCE.some((key) => getBucketForKey(buckets, key).some((task) => task.id === focusedTaskId));\n  if (!exists) {\n    setFocusedTask(null, null);\n  }\n}\n\nfunction updateLevelBadge(context: InteractionContext | null): void {\n  if (!context) {\n    return;\n  }\n  context.levelBadge.innerHTML = `<span class=\"actions__level-top\">Backlog</span><span class=\"actions__level-bottom\">Lv.${currentLevel}</span>`;\n}\n\nfunction primeCelebrationEffects(elements: CelebrationElements): void {\n  elements.confettiPieces.forEach((piece, index) => {\n    const left = Math.random() * 100;\n    const delay = Math.random() * 0.6;\n    const duration = 1.2 + Math.random() * 0.7;\n    const color = CONFETTI_COLORS[index % CONFETTI_COLORS.length];\n    piece.style.animation = \"none\";\n    piece.offsetHeight;\n    piece.style.left = `${left}%`;\n    piece.style.setProperty(\"--confetti-x\", `${left - 50}px`);\n    piece.style.backgroundColor = color;\n    piece.style.animation = `confettiFall ${duration}s ease-out infinite`;\n    piece.style.animationDelay = `${delay}s`;\n  });\n\n  elements.sparkles.forEach((sparkle) => {\n    const left = Math.random() * 100;\n    const top = Math.random() * 60;\n    const delay = Math.random() * 0.8;\n    const duration = 1.6 + Math.random() * 1.1;\n    sparkle.style.animation = \"none\";\n    sparkle.offsetHeight;\n    sparkle.style.left = `${left}%`;\n    sparkle.style.top = `${top}%`;\n    sparkle.style.animation = `sparkleTwinkle ${duration}s ease-in-out infinite`;\n    sparkle.style.animationDelay = `${delay}s`;\n  });\n\n  elements.crackerPiecesLeft.forEach((piece) => {\n    const offsetX = 24 + Math.random() * 60;\n    piece.style.animation = \"none\";\n    piece.offsetHeight;\n    piece.style.left = `${offsetX}px`;\n    piece.style.setProperty(\"--burst-x\", `${offsetX}px`);\n    piece.style.animation = \"crackerBurst 0.85s ease-out forwards\";\n    piece.style.animationDelay = `${Math.random() * 0.25}s`;\n    piece.style.backgroundColor = CRACKER_CONFETTI_COLORS[Math.floor(Math.random() * CRACKER_CONFETTI_COLORS.length)];\n  });\n\n  elements.crackerPiecesRight.forEach((piece) => {\n    const offsetX = 24 + Math.random() * 60;\n    piece.style.animation = \"none\";\n    piece.offsetHeight;\n    piece.style.right = `${offsetX}px`;\n    piece.style.setProperty(\"--burst-x\", `${-offsetX}px`);\n    piece.style.animation = \"crackerBurst 0.85s ease-out forwards\";\n    piece.style.animationDelay = `${Math.random() * 0.25}s`;\n    piece.style.backgroundColor = CRACKER_CONFETTI_COLORS[Math.floor(Math.random() * CRACKER_CONFETTI_COLORS.length)];\n  });\n}\n\nfunction showCelebrationPopup(context: InteractionContext | null): void {\n  if (!context) {\n    return;\n  }\n  if (celebrationHideTimer) {\n    window.clearTimeout(celebrationHideTimer);\n  }\n  currentLevel += 1;\n  context.celebration.message.textContent = `\u672C\u65E5\u306E\u30BF\u30B9\u30AF\u3092\u5168\u3066\u51E6\u7406\u3057\u3001Lv.${currentLevel}\u306B\u4E0A\u304C\u308A\u307E\u3057\u305F\uFF01\\n\u3053\u306E\u8ABF\u5B50\u3067\u304C\u3093\u3070\u308A\u307E\u3057\u3087\u3046\uFF01\uFF01`;\n  updateLevelBadge(context);\n  void saveCurrentLevel(currentLevel);\n  primeCelebrationEffects(context.celebration);\n  context.celebration.overlay.dataset.open = \"true\";\n  celebrationHideTimer = window.setTimeout(() => {\n    hideCelebrationPopup(context);\n  }, 30000);\n}\n\nfunction hideCelebrationPopup(context: InteractionContext | null): void {\n  if (!context) {\n    return;\n  }\n  if (celebrationHideTimer) {\n    window.clearTimeout(celebrationHideTimer);\n    celebrationHideTimer = undefined;\n  }\n  delete context.celebration.overlay.dataset.open;\n}\n\nfunction handleTodayCompletionCelebration(context: InteractionContext, todayCount: number): void {\n  if (todayCount === 0 && celebrationArmed) {\n    showCelebrationPopup(context);\n    celebrationArmed = false;\n  } else if (todayCount > 0) {\n    hideCelebrationPopup(context);\n  }\n}\n\nfunction scheduleTooltipForBadge(badge: HTMLButtonElement, task: TopBarTask, tooltip: HTMLDivElement) {\n  if (tooltipShowTimer) {\n    window.clearTimeout(tooltipShowTimer);\n  }\n  tooltipShowTimer = window.setTimeout(() => {\n    tooltipShowTimer = undefined;\n    showTooltipForBadge(badge, task, tooltip);\n  }, 500);\n}\n\nfunction showTooltipForBadge(badge: HTMLButtonElement, task: TopBarTask, tooltip: HTMLDivElement) {\n  if (tooltipHideTimer) {\n    window.clearTimeout(tooltipHideTimer);\n    tooltipHideTimer = undefined;\n  }\n\n  const title = tooltip.querySelector(\".tooltip__title\") as HTMLHeadingElement;\n  const meta = tooltip.querySelector(\".tooltip__meta\") as HTMLDivElement;\n  const body = tooltip.querySelector(\".tooltip__body\") as HTMLParagraphElement;\n\n  title.textContent = task.summary;\n\n  const projectLabel = task.projectName || \"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u672A\u8A2D\u5B9A\";\n  const categoryLabel = task.categoryName || \"\u30AB\u30C6\u30B4\u30EA\u672A\u8A2D\u5B9A\";\n  meta.innerHTML = \"\";\n  [projectLabel, categoryLabel].forEach((text) => {\n    const span = document.createElement(\"span\");\n    span.textContent = text;\n    meta.append(span);\n  });\n\n  body.textContent = task.description?.trim() ? task.description : \"\u672C\u6587\u306A\u3057\";\n\n  tooltip.style.display = \"block\";\n  tooltip.style.visibility = \"hidden\";\n\n  positionFloatingElement(badge, tooltip, 12, true);\n\n  tooltip.style.visibility = \"visible\";\n}\n\nfunction hideTooltip(tooltip: HTMLDivElement, delay = 100) {\n  if (tooltipShowTimer) {\n    window.clearTimeout(tooltipShowTimer);\n    tooltipShowTimer = undefined;\n  }\n  if (tooltipHideTimer) {\n    window.clearTimeout(tooltipHideTimer);\n  }\n  tooltipHideTimer = window.setTimeout(() => {\n    tooltip.style.display = \"none\";\n    tooltip.style.removeProperty(\"top\");\n    tooltip.style.removeProperty(\"left\");\n    tooltip.style.removeProperty(\"--tooltip-arrow-left\");\n  }, delay);\n}\n\nasync function toggleStatusMenuForBadge(badge: HTMLButtonElement, task: TopBarTask, context: InteractionContext) {\n  hideTooltip(context.tooltip, 0);\n  const { statusMenu } = context;\n  if (statusMenu.dataset.openFor === task.issueKey) {\n    hideStatusMenu(statusMenu, true);\n    return;\n  }\n  await showStatusMenuForBadge(badge, task, context);\n}\n\nasync function showStatusMenuForBadge(badge: HTMLButtonElement, task: TopBarTask, context: InteractionContext) {\n  if (menuHideTimer) {\n    window.clearTimeout(menuHideTimer);\n    menuHideTimer = undefined;\n  }\n\n  const { statusMenu } = context;\n  const hasOptions = await ensureStatusMenuOptions(context, statusMenu, task);\n  statusMenu.style.display = \"block\";\n  statusMenu.style.visibility = \"hidden\";\n\n  menuCurrentBadge = badge;\n  menuCurrentTask = task;\n  menuCurrentContext = context;\n  statusMenu.dataset.openFor = task.issueKey;\n  if (hasOptions) {\n    updateStatusMenuSelection(statusMenu, task.status);\n  }\n\n  positionFloatingElement(badge, statusMenu, 8, true);\n\n  statusMenu.style.visibility = \"visible\";\n}\n\nfunction updateStatusMenuSelection(menu: HTMLDivElement, currentStatus: string) {\n  menu.querySelectorAll<HTMLButtonElement>(\".status-menu__item\").forEach((item) => {\n    if (item.dataset.status === currentStatus) {\n      item.classList.add(\"is-active\");\n    } else {\n      item.classList.remove(\"is-active\");\n    }\n  });\n}\n\nfunction positionFloatingElement(\n  badge: HTMLButtonElement,\n  floating: HTMLElement,\n  gap: number,\n  constrainToViewport = false\n) {\n  const rect = badge.getBoundingClientRect();\n  const floatingRect = floating.getBoundingClientRect();\n\n  let left = rect.left + rect.width / 2 - floatingRect.width / 2;\n  const minMargin = 12;\n  const maxLeft = window.innerWidth - floatingRect.width - minMargin;\n  if (constrainToViewport) {\n    left = Math.max(minMargin, Math.min(maxLeft, left));\n  }\n\n  let top = rect.bottom + gap;\n  if (constrainToViewport) {\n    const maxTop = window.innerHeight - floatingRect.height - minMargin;\n    top = Math.min(top, maxTop);\n  }\n\n  floating.style.left = `${left}px`;\n  floating.style.top = `${top}px`;\n\n  if (floating.classList.contains(\"tooltip\")) {\n    const arrowCenter = rect.left + rect.width / 2;\n    const arrowOffset = arrowCenter - left - 7; // 7 = arrow half width\n    floating.style.setProperty(\n      \"--tooltip-arrow-left\",\n      `${Math.max(12, Math.min(floatingRect.width - 12, arrowOffset))}px`\n    );\n  }\n}\n\nfunction addDays(date: Date, amount: number): Date {\n  const result = new Date(date);\n  result.setDate(result.getDate() + amount);\n  return result;\n}\n\nfunction formatDueDate(due: string | null): string {\n  if (!due) {\n    return \"\u672A\u8A2D\u5B9A\";\n  }\n  const segments = due.split(\"-\");\n  if (segments.length !== 3) {\n    return \"\u672A\u8A2D\u5B9A\";\n  }\n  const [_year, month, day] = segments;\n  if (!month || !day) {\n    return \"\u672A\u8A2D\u5B9A\";\n  }\n  return `${month.padStart(2, \"0\")}/${day.padStart(2, \"0\")}`;\n}\n\nfunction enableWheelScroll(element: Element | null) {\n  if (!element) {\n    return;\n  }\n  element.addEventListener(\n    \"wheel\",\n    (event) => {\n      if (event.deltaY === 0) {\n        return;\n      }\n      event.preventDefault();\n      (event.currentTarget as HTMLElement).scrollLeft += event.deltaY;\n    },\n    { passive: false }\n  );\n}\n\nfunction toggleSidePanel(): Promise<void> {\n  return sendMessageWithRetry<{ ok?: boolean; error?: string }>({ type: \"sidepanel:toggle\" }, 2)\n    .then((response) => {\n      if (!response?.ok) {\n        throw new Error(response?.error ?? \"\u30B5\u30A4\u30C9\u30D1\u30CD\u30EB\u3092\u958B\u3051\u307E\u305B\u3093\u3067\u3057\u305F\");\n      }\n    });\n}\n\nasync function initTopBar(): Promise<void> {\n  const storedMinimized = await loadMinimizedState();\n  const storedFocusedTask = await loadFocusedTaskId();\n  const storedLevel = await loadStoredLevel();\n  currentLevel = storedLevel;\n  setFocusedTask(null, storedFocusedTask, { persist: false });\n  // \u5E38\u306B\u5C55\u958B\u72B6\u614B\u304B\u3089\u958B\u59CB\u3059\u308B\uFF08\u6700\u5C0F\u5316\u72B6\u614B\u304C\u6B8B\u3063\u3066\u3044\u308B\u3068\u30DB\u30B9\u30C8\u9AD8\u30550px\u306E\u307E\u307E\u306B\u306A\u308B\u3053\u3068\u304C\u3042\u308B\u305F\u3081\uFF09\n  if (storedMinimized) {\n    void saveMinimizedState(false);\n  }\n  isMinimized = false;\n  currentBarHeight = expandedBarHeight;\n  const shadowRoot = ensureShadowHost();\n  if (!shadowRoot) {\n    return;\n  }\n  const authConfig = await getBacklogAuthConfig().catch(() => null);\n  const context = renderTopBar(shadowRoot, {\n    showTomorrowSection: authConfig?.showTomorrowSection !== false,\n    showNoDueSection: authConfig?.showNoDueSection !== false\n  });\n  setFocusedTask(context, focusedTaskId, { persist: false });\n  ensurePageSpacing();\n\n  if (isMinimized) {\n    showMinimizedIndicator(context, true);\n  }\n\n  void refreshIssues(context, { showLoading: true });\n\n  if (issuesRefreshTimer) {\n    window.clearInterval(issuesRefreshTimer);\n  }\n  issuesRefreshTimer = window.setInterval(() => {\n    void refreshIssues(context);\n  }, ISSUES_REFRESH_INTERVAL_MS);\n\n  document.addEventListener(\n    \"keydown\",\n    (event) => {\n      if (event.key === \"Escape\") {\n        closeModal();\n      }\n    },\n    { capture: true }\n  );\n\n  window.addEventListener(\"resize\", scheduleLayoutCheck, { passive: true });\n  document.addEventListener(\"visibilitychange\", () => {\n    if (document.visibilityState === \"visible\") {\n      scheduleLayoutCheck();\n      void refreshIssues(context);\n    }\n  });\n\n  chrome.storage.onChanged.addListener((changes, area) => {\n    if (area !== \"local\") {\n      return;\n    }\n\n    if (BACKLOG_AUTH_KEY in changes) {\n      const updated = changes[BACKLOG_AUTH_KEY]?.newValue as BacklogAuthConfig | undefined;\n      const nextShowTomorrow = updated?.showTomorrowSection !== false;\n      const nextShowNoDue = updated?.showNoDueSection !== false;\n      if (context.preferences.showTomorrowSection !== nextShowTomorrow) {\n        context.preferences.showTomorrowSection = nextShowTomorrow;\n        updateSectionVisibility(context, \"week\", nextShowTomorrow, latestIssueBuckets);\n      }\n      if (context.preferences.showNoDueSection !== nextShowNoDue) {\n        context.preferences.showNoDueSection = nextShowNoDue;\n        updateSectionVisibility(context, \"noDue\", nextShowNoDue, latestIssueBuckets);\n      }\n    }\n\n    if (STORAGE_FOCUSED_TASK_KEY in changes) {\n      const nextFocus = parseFocusedTaskId(changes[STORAGE_FOCUSED_TASK_KEY]?.newValue ?? null);\n      setFocusedTask(context, nextFocus, { persist: false });\n    }\n\n    if (STORAGE_LEVEL_KEY in changes) {\n      const nextLevelRaw = changes[STORAGE_LEVEL_KEY]?.newValue;\n      const parsed = typeof nextLevelRaw === \"number\" && Number.isFinite(nextLevelRaw) && nextLevelRaw >= 0 ? Math.floor(nextLevelRaw) : 0;\n      currentLevel = parsed;\n      updateLevelBadge(context);\n      context.celebration.message.textContent = `\u672C\u65E5\u306E\u30BF\u30B9\u30AF\u3092\u5168\u3066\u51E6\u7406\u3057\u3001Lv.${currentLevel}\u306B\u4E0A\u304C\u308A\u307E\u3057\u305F\uFF01\n\u3053\u306E\u8ABF\u5B50\u3067\u304C\u3093\u3070\u308A\u307E\u3057\u3087\u3046\uFF01\uFF01`;\n    }\n\n    if (BACKLOG_ISSUES_REVISION_KEY in changes) {\n      void refreshIssues(context);\n    }\n\n    if (STORAGE_MINIMIZED_KEY in changes) {\n      const nextValue = Boolean(changes[STORAGE_MINIMIZED_KEY]?.newValue);\n      if (!minimizedIndicatorContext) {\n        minimizedIndicatorContext = context;\n      }\n      setBarMinimized(minimizedIndicatorContext ?? context, nextValue);\n    }\n  });\n\n  scheduleLayoutCheck();\n}\n\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    void initTopBar();\n  }, { once: true });\n} else {\n  void initTopBar();\n}\n"],
  "mappings": "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;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA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",
  "names": []
}
