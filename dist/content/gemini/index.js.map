{
  "version": 3,
  "sources": ["../../../src/content/gemini/index.ts"],
  "sourcesContent": ["function extractLatestGeminiJson(): { json: unknown; raw: string } | null {\n  const codeBlocks = Array.from(\n    document.querySelectorAll<HTMLElement>(\"code[data-test-id='code-content'], pre code\")\n  );\n\n  for (let index = codeBlocks.length - 1; index >= 0; index -= 1) {\n    const block = codeBlocks[index];\n    const text = block.textContent?.trim();\n    if (!text) {\n      continue;\n    }\n    const parsed = tryParseJson(text);\n    if (parsed) {\n      return parsed;\n    }\n  }\n\n  return null;\n}\n\nfunction tryParseJson(raw: string): { json: unknown; raw: string } | null {\n  const normalized = raw.replace(/\\u00a0/g, \" \").trim();\n  if (!normalized.startsWith(\"{\") || !normalized.endsWith(\"}\")) {\n    return null;\n  }\n  try {\n    const json = JSON.parse(normalized);\n    return { json, raw: normalized };\n  } catch {\n    return null;\n  }\n}\n\nchrome.runtime.onMessage.addListener((message, _sender, sendResponse) => {\n  if (message?.type === \"gemini:extract-json\") {\n    const latest = extractLatestGeminiJson();\n    if (latest) {\n      sendResponse({ ok: true, data: latest.json, raw: latest.raw });\n    } else {\n      sendResponse({ ok: false, error: \"Gemini \u306E\u56DE\u7B54\u304B\u3089 JSON \u3092\u691C\u51FA\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\" });\n    }\n    return true;\n  }\n  return undefined;\n});\n"],
  "mappings": ";AAAA,SAAS,0BAAiE;AACxE,QAAM,aAAa,MAAM;AAAA,IACvB,SAAS,iBAA8B,6CAA6C;AAAA,EACtF;AAEA,WAAS,QAAQ,WAAW,SAAS,GAAG,SAAS,GAAG,SAAS,GAAG;AAC9D,UAAM,QAAQ,WAAW,KAAK;AAC9B,UAAM,OAAO,MAAM,aAAa,KAAK;AACrC,QAAI,CAAC,MAAM;AACT;AAAA,IACF;AACA,UAAM,SAAS,aAAa,IAAI;AAChC,QAAI,QAAQ;AACV,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,aAAa,KAAoD;AACxE,QAAM,aAAa,IAAI,QAAQ,WAAW,GAAG,EAAE,KAAK;AACpD,MAAI,CAAC,WAAW,WAAW,GAAG,KAAK,CAAC,WAAW,SAAS,GAAG,GAAG;AAC5D,WAAO;AAAA,EACT;AACA,MAAI;AACF,UAAM,OAAO,KAAK,MAAM,UAAU;AAClC,WAAO,EAAE,MAAM,KAAK,WAAW;AAAA,EACjC,QAAQ;AACN,WAAO;AAAA,EACT;AACF;AAEA,OAAO,QAAQ,UAAU,YAAY,CAAC,SAAS,SAAS,iBAAiB;AACvE,MAAI,SAAS,SAAS,uBAAuB;AAC3C,UAAM,SAAS,wBAAwB;AACvC,QAAI,QAAQ;AACV,mBAAa,EAAE,IAAI,MAAM,MAAM,OAAO,MAAM,KAAK,OAAO,IAAI,CAAC;AAAA,IAC/D,OAAO;AACL,mBAAa,EAAE,IAAI,OAAO,OAAO,sHAAiC,CAAC;AAAA,IACrE;AACA,WAAO;AAAA,EACT;AACA,SAAO;AACT,CAAC;",
  "names": []
}
